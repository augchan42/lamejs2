"use strict";var lamejs2=(()=>{var Zt=Object.create;var j1=Object.defineProperty;var zt=Object.getOwnPropertyDescriptor;var Qt=Object.getOwnPropertyNames;var Wt=Object.getPrototypeOf,jt=Object.prototype.hasOwnProperty;var T0=(M,c)=>()=>(c||M((c={exports:{}}).exports,c),c.exports),Jt=(M,c)=>{for(var w in c)j1(M,w,{get:c[w],enumerable:!0})},ir=(M,c,w,f)=>{if(c&&typeof c=="object"||typeof c=="function")for(let k of Qt(c))!jt.call(M,k)&&k!==w&&j1(M,k,{get:()=>c[k],enumerable:!(f=zt(c,k))||f.enumerable});return M};var Ye=(M,c,w)=>(w=M!=null?Zt(Wt(M)):{},ir(c||!M||!M.__esModule?j1(w,"default",{value:M,enumerable:!0}):w,M)),$t=M=>ir(j1({},"__esModule",{value:!0}),M);var Ia=T0((Bi,sr)=>{"use strict";var pa=class{constructor(c){this.context=c}getLameShortVersion(){return"3.100"}getLameVersion(){return"3.100"}getLameVeryShortVersion(){return"LAME3.100"}getPsyVersion(){return"0.93"}getLameUrl(){return"http://www.mp3dev.org/"}getLameOsBitness(){return"32bits"}};sr.exports=pa});var Y0=T0((Ei,mr)=>{"use strict";function gt(M){return new Int8Array(M)}function nr(M){return new Int16Array(M)}function _r(M){return new Int32Array(M)}function lr(M){return new Float32Array(M)}function e2(M){return new Float64Array(M)}function or(M){if(M.length==1)return lr(M[0]);var c=M[0];M=M.slice(1);for(var w=[],f=0;f<c;f++)w.push(or(M));return w}function vr(M){if(M.length==1)return _r(M[0]);var c=M[0];M=M.slice(1);for(var w=[],f=0;f<c;f++)w.push(vr(M));return w}function hr(M){if(M.length==1)return nr(M[0]);var c=M[0];M=M.slice(1);for(var w=[],f=0;f<c;f++)w.push(hr(M));return w}function ur(M){if(M.length==1)return new Array(M[0]);var c=M[0];M=M.slice(1);for(var w=[],f=0;f<c;f++)w.push(ur(M));return w}var fr={};fr.fill=function(M,c,w,f){if(arguments.length==2)for(var k=0;k<M.length;k++)M[k]=arguments[1];else for(var k=c;k<w;k++)M[k]=f};var C1={};C1.arraycopy=function(M,c,w,f,k){for(var V=c+k;c<V;)w[f++]=M[c++]};C1.out={};C1.out.println=function(M){console.log(M)};C1.out.printf=function(){console.log.apply(console,arguments)};var $1={};$1.SQRT2=1.4142135623730951;$1.FAST_LOG10=function(M){return Math.log10(M)};$1.FAST_LOG10_X=function(M,c){return Math.log10(M)*c};function r1(M){this.ordinal=M}r1.short_block_allowed=new r1(0);r1.short_block_coupled=new r1(1);r1.short_block_dispensed=new r1(2);r1.short_block_forced=new r1(3);var br={};br.MAX_VALUE=34028235e31;function qe(M){this.ordinal=M}qe.vbr_off=new qe(0);qe.vbr_mt=new qe(1);qe.vbr_rh=new qe(2);qe.vbr_abr=new qe(3);qe.vbr_mtrh=new qe(4);qe.vbr_default=qe.vbr_mtrh;var a2=function(M){};mr.exports={System:C1,VbrMode:qe,Float:br,ShortBlock:r1,Util:$1,Arrays:fr,new_array_n:ur,new_byte:gt,new_double:e2,new_float:lr,new_float_n:or,new_int:_r,new_int_n:vr,new_short:nr,new_short_n:hr,assert:a2}});var dr=T0((qi,cr)=>{"use strict";var ve=Y0(),r2=ve.System,yi=ve.VbrMode,Ti=ve.Float,pi=ve.ShortBlock,U0=ve.Util,t2=ve.Arrays,Ii=ve.new_array_n,Li=ve.new_byte,Vi=ve.new_double,i2=ve.new_float,Ni=ve.new_float_n,Hi=ve.new_int,Oi=ve.new_int_n,Ci=ve.assert,Fe=te();function s2(){var M=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.035780907*U0.SQRT2*.5/2384e-9,.017876148*U0.SQRT2*.5/2384e-9,.003134727*U0.SQRT2*.5/2384e-9,.002457142*U0.SQRT2*.5/2384e-9,971317e-9*U0.SQRT2*.5/2384e-9,218868e-9*U0.SQRT2*.5/2384e-9,101566e-9*U0.SQRT2*.5/2384e-9,13828e-9*U0.SQRT2*.5/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],c=12,w=36,f=[[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,940084909404969e-27,6423305872147839e-28,2382191739347918e-28,5456116108943412e-27,4878985199565852e-27,4240448995017367e-27,3559909094758252e-27,2858043359288075e-27,2156177623817898e-27,1475637723558783e-27,8371015190102974e-28,2599706096327376e-28,-5456116108943412e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758252e-27,-2858043359288076e-27,-2156177623817898e-27,-1475637723558783e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347923e-28,-6423305872147843e-28,-9400849094049696e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049694e-28,-642330587214784e-27,-2382191739347918e-28],[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,9400849094049688e-28,6423305872147841e-28,2382191739347918e-28,5456116108943413e-27,4878985199565852e-27,4240448995017367e-27,3559909094758253e-27,2858043359288075e-27,2156177623817898e-27,1475637723558782e-27,8371015190102975e-28,2599706096327376e-28,-5461314069809755e-27,-4921085770524055e-27,-4343405037091838e-27,-3732668368707687e-27,-3093523840190885e-27,-2430835727329465e-27,-1734679010007751e-27,-974825365660928e-27,-2797435120168326e-28,0,0,0,0,0,0,-2283748241799531e-28,-4037858874020686e-28,-2146547464825323e-28],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2283748241799531e-28,4037858874020686e-28,2146547464825323e-28,5461314069809755e-27,4921085770524055e-27,4343405037091838e-27,3732668368707687e-27,3093523840190885e-27,2430835727329466e-27,1734679010007751e-27,974825365660928e-27,2797435120168326e-28,-5456116108943413e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758253e-27,-2858043359288075e-27,-2156177623817898e-27,-1475637723558782e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347913e-28,-6423305872147834e-28,-9400849094049688e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049688e-28,-6423305872147841e-28,-2382191739347918e-28]],k=f[Fe.SHORT_TYPE],V=f[Fe.SHORT_TYPE],U=f[Fe.SHORT_TYPE],D=f[Fe.SHORT_TYPE],O=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];function J(T,I,e){for(var R=10,p=I+238-14-286,d=-15;d<0;d++){var n,S,H;n=M[R+-10],S=T[p+-224]*n,H=T[I+224]*n,n=M[R+-9],S+=T[p+-160]*n,H+=T[I+160]*n,n=M[R+-8],S+=T[p+-96]*n,H+=T[I+96]*n,n=M[R+-7],S+=T[p+-32]*n,H+=T[I+32]*n,n=M[R+-6],S+=T[p+32]*n,H+=T[I+-32]*n,n=M[R+-5],S+=T[p+96]*n,H+=T[I+-96]*n,n=M[R+-4],S+=T[p+160]*n,H+=T[I+-160]*n,n=M[R+-3],S+=T[p+224]*n,H+=T[I+-224]*n,n=M[R+-2],S+=T[I+-256]*n,H-=T[p+256]*n,n=M[R+-1],S+=T[I+-192]*n,H-=T[p+192]*n,n=M[R+0],S+=T[I+-128]*n,H-=T[p+128]*n,n=M[R+1],S+=T[I+-64]*n,H-=T[p+64]*n,n=M[R+2],S+=T[I+0]*n,H-=T[p+0]*n,n=M[R+3],S+=T[I+64]*n,H-=T[p+-64]*n,n=M[R+4],S+=T[I+128]*n,H-=T[p+-128]*n,n=M[R+5],S+=T[I+192]*n,H-=T[p+-192]*n,S*=M[R+6],n=H-S,e[30+d*2]=H+S,e[31+d*2]=M[R+7]*n,R+=18,I--,p++}{var S,H,x,B;H=T[I+-16]*M[R+-10],S=T[I+-32]*M[R+-2],H+=(T[I+-48]-T[I+16])*M[R+-9],S+=T[I+-96]*M[R+-1],H+=(T[I+-80]+T[I+48])*M[R+-8],S+=T[I+-160]*M[R+0],H+=(T[I+-112]-T[I+80])*M[R+-7],S+=T[I+-224]*M[R+1],H+=(T[I+-144]+T[I+112])*M[R+-6],S-=T[I+32]*M[R+2],H+=(T[I+-176]-T[I+144])*M[R+-5],S-=T[I+96]*M[R+3],H+=(T[I+-208]+T[I+176])*M[R+-4],S-=T[I+160]*M[R+4],H+=(T[I+-240]-T[I+208])*M[R+-3],S-=T[I+224],x=S-H,B=S+H,H=e[14],S=e[15]-H,e[31]=B+H,e[30]=x+S,e[15]=x-S,e[14]=B-H}{var a;a=e[28]-e[0],e[0]+=e[28],e[28]=a*M[R+-2*18+7],a=e[29]-e[1],e[1]+=e[29],e[29]=a*M[R+-2*18+7],a=e[26]-e[2],e[2]+=e[26],e[26]=a*M[R+-4*18+7],a=e[27]-e[3],e[3]+=e[27],e[27]=a*M[R+-4*18+7],a=e[24]-e[4],e[4]+=e[24],e[24]=a*M[R+-6*18+7],a=e[25]-e[5],e[5]+=e[25],e[25]=a*M[R+-6*18+7],a=e[22]-e[6],e[6]+=e[22],e[22]=a*U0.SQRT2,a=e[23]-e[7],e[7]+=e[23],e[23]=a*U0.SQRT2-e[7],e[7]-=e[6],e[22]-=e[7],e[23]-=e[22],a=e[6],e[6]=e[31]-a,e[31]=e[31]+a,a=e[7],e[7]=e[30]-a,e[30]=e[30]+a,a=e[22],e[22]=e[15]-a,e[15]=e[15]+a,a=e[23],e[23]=e[14]-a,e[14]=e[14]+a,a=e[20]-e[8],e[8]+=e[20],e[20]=a*M[R+-10*18+7],a=e[21]-e[9],e[9]+=e[21],e[21]=a*M[R+-10*18+7],a=e[18]-e[10],e[10]+=e[18],e[18]=a*M[R+-12*18+7],a=e[19]-e[11],e[11]+=e[19],e[19]=a*M[R+-12*18+7],a=e[16]-e[12],e[12]+=e[16],e[16]=a*M[R+-14*18+7],a=e[17]-e[13],e[13]+=e[17],e[17]=a*M[R+-14*18+7],a=-e[20]+e[24],e[20]+=e[24],e[24]=a*M[R+-12*18+7],a=-e[21]+e[25],e[21]+=e[25],e[25]=a*M[R+-12*18+7],a=e[4]-e[8],e[4]+=e[8],e[8]=a*M[R+-12*18+7],a=e[5]-e[9],e[5]+=e[9],e[9]=a*M[R+-12*18+7],a=e[0]-e[12],e[0]+=e[12],e[12]=a*M[R+-4*18+7],a=e[1]-e[13],e[1]+=e[13],e[13]=a*M[R+-4*18+7],a=e[16]-e[28],e[16]+=e[28],e[28]=a*M[R+-4*18+7],a=-e[17]+e[29],e[17]+=e[29],e[29]=a*M[R+-4*18+7],a=U0.SQRT2*(e[2]-e[10]),e[2]+=e[10],e[10]=a,a=U0.SQRT2*(e[3]-e[11]),e[3]+=e[11],e[11]=a,a=U0.SQRT2*(-e[18]+e[26]),e[18]+=e[26],e[26]=a-e[18],a=U0.SQRT2*(-e[19]+e[27]),e[19]+=e[27],e[27]=a-e[19],a=e[2],e[19]-=e[3],e[3]-=a,e[2]=e[31]-a,e[31]+=a,a=e[3],e[11]-=e[19],e[18]-=a,e[3]=e[30]-a,e[30]+=a,a=e[18],e[27]-=e[11],e[19]-=a,e[18]=e[15]-a,e[15]+=a,a=e[19],e[10]-=a,e[19]=e[14]-a,e[14]+=a,a=e[10],e[11]-=a,e[10]=e[23]-a,e[23]+=a,a=e[11],e[26]-=a,e[11]=e[22]-a,e[22]+=a,a=e[26],e[27]-=a,e[26]=e[7]-a,e[7]+=a,a=e[27],e[27]=e[6]-a,e[6]+=a,a=U0.SQRT2*(e[0]-e[4]),e[0]+=e[4],e[4]=a,a=U0.SQRT2*(e[1]-e[5]),e[1]+=e[5],e[5]=a,a=U0.SQRT2*(e[16]-e[20]),e[16]+=e[20],e[20]=a,a=U0.SQRT2*(e[17]-e[21]),e[17]+=e[21],e[21]=a,a=-U0.SQRT2*(e[8]-e[12]),e[8]+=e[12],e[12]=a-e[8],a=-U0.SQRT2*(e[9]-e[13]),e[9]+=e[13],e[13]=a-e[9],a=-U0.SQRT2*(e[25]-e[29]),e[25]+=e[29],e[29]=a-e[25],a=-U0.SQRT2*(e[24]+e[28]),e[24]-=e[28],e[28]=a-e[24],a=e[24]-e[16],e[24]=a,a=e[20]-a,e[20]=a,a=e[28]-a,e[28]=a,a=e[25]-e[17],e[25]=a,a=e[21]-a,e[21]=a,a=e[29]-a,e[29]=a,a=e[17]-e[1],e[17]=a,a=e[9]-a,e[9]=a,a=e[25]-a,e[25]=a,a=e[5]-a,e[5]=a,a=e[21]-a,e[21]=a,a=e[13]-a,e[13]=a,a=e[29]-a,e[29]=a,a=e[1]-e[0],e[1]=a,a=e[16]-a,e[16]=a,a=e[17]-a,e[17]=a,a=e[8]-a,e[8]=a,a=e[9]-a,e[9]=a,a=e[24]-a,e[24]=a,a=e[25]-a,e[25]=a,a=e[4]-a,e[4]=a,a=e[5]-a,e[5]=a,a=e[20]-a,e[20]=a,a=e[21]-a,e[21]=a,a=e[12]-a,e[12]=a,a=e[13]-a,e[13]=a,a=e[28]-a,e[28]=a,a=e[29]-a,e[29]=a,a=e[0],e[0]+=e[31],e[31]-=a,a=e[1],e[1]+=e[30],e[30]-=a,a=e[16],e[16]+=e[15],e[15]-=a,a=e[17],e[17]+=e[14],e[14]-=a,a=e[8],e[8]+=e[23],e[23]-=a,a=e[9],e[9]+=e[22],e[22]-=a,a=e[24],e[24]+=e[7],e[7]-=a,a=e[25],e[25]+=e[6],e[6]-=a,a=e[4],e[4]+=e[27],e[27]-=a,a=e[5],e[5]+=e[26],e[26]-=a,a=e[20],e[20]+=e[11],e[11]-=a,a=e[21],e[21]+=e[10],e[10]-=a,a=e[12],e[12]+=e[19],e[19]-=a,a=e[13],e[13]+=e[18],e[18]-=a,a=e[28],e[28]+=e[3],e[3]-=a,a=e[29],e[29]+=e[2],e[2]-=a}}function y(T,I){for(var e=0;e<3;e++){var R,p,d,n,S,H;n=T[I+2*3]*f[Fe.SHORT_TYPE][0]-T[I+5*3],R=T[I+0*3]*f[Fe.SHORT_TYPE][2]-T[I+3*3],p=n+R,d=n-R,n=T[I+5*3]*f[Fe.SHORT_TYPE][0]+T[I+2*3],R=T[I+3*3]*f[Fe.SHORT_TYPE][2]+T[I+0*3],S=n+R,H=-n+R,R=(T[I+1*3]*f[Fe.SHORT_TYPE][1]-T[I+4*3])*2069978111953089e-26,n=(T[I+4*3]*f[Fe.SHORT_TYPE][1]+T[I+1*3])*2069978111953089e-26,T[I+3*0]=p*190752519173728e-25+R,T[I+3*5]=-S*190752519173728e-25+n,d=d*.8660254037844387*1907525191737281e-26,S=S*.5*1907525191737281e-26+n,T[I+3*1]=d-S,T[I+3*2]=d+S,p=p*.5*1907525191737281e-26-R,H=H*.8660254037844387*1907525191737281e-26,T[I+3*3]=p+H,T[I+3*4]=p-H,I++}}function K(T,I,e){var R,p;{var d,n,S,H,x,B,a,r;d=e[17]-e[9],S=e[15]-e[11],H=e[14]-e[12],x=e[0]+e[8],B=e[1]+e[7],a=e[2]+e[6],r=e[3]+e[5],T[I+17]=x+a-r-(B-e[4]),p=(x+a-r)*V[19]+(B-e[4]),R=(d-S-H)*V[18],T[I+5]=R+p,T[I+6]=R-p,n=(e[16]-e[10])*V[18],B=B*V[19]+e[4],R=d*V[12]+n+S*V[13]+H*V[14],p=-x*V[16]+B-a*V[17]+r*V[15],T[I+1]=R+p,T[I+2]=R-p,R=d*V[13]-n-S*V[14]+H*V[12],p=-x*V[17]+B-a*V[15]+r*V[16],T[I+9]=R+p,T[I+10]=R-p,R=d*V[14]-n+S*V[12]-H*V[13],p=x*V[15]-B+a*V[16]-r*V[17],T[I+13]=R+p,T[I+14]=R-p}{var s,i,u,h,_,v,l,L;s=e[8]-e[0],u=e[6]-e[2],h=e[5]-e[3],_=e[17]+e[9],v=e[16]+e[10],l=e[15]+e[11],L=e[14]+e[12],T[I+0]=_+l+L+(v+e[13]),R=(_+l+L)*V[19]-(v+e[13]),p=(s-u+h)*V[18],T[I+11]=R+p,T[I+12]=R-p,i=(e[7]-e[1])*V[18],v=e[13]-v*V[19],R=_*V[15]-v+l*V[16]+L*V[17],p=s*V[14]+i+u*V[12]+h*V[13],T[I+3]=R+p,T[I+4]=R-p,R=-_*V[17]+v-l*V[15]-L*V[16],p=s*V[13]+i-u*V[14]-h*V[12],T[I+7]=R+p,T[I+8]=R-p,R=-_*V[16]+v-l*V[17]-L*V[15],p=s*V[12]-i+u*V[13]-h*V[14],T[I+15]=R+p,T[I+16]=R-p}}this.mdct_sub48=function(T,I,e){for(var R=I,p=286,d=0;d<T.channels_out;d++){for(var n=0;n<T.mode_gr;n++){for(var S,H=T.l3_side.tt[n][d],x=H.xr,B=0,a=T.sb_sample[d][1-n],r=0,s=0;s<18/2;s++)for(J(R,p,a[r]),J(R,p+32,a[r+1]),r+=2,p+=64,S=1;S<32;S+=2)a[r-1][S]*=-1;for(S=0;S<32;S++,B+=18){var i=H.block_type,u=T.sb_sample[d][n],h=T.sb_sample[d][1-n];if(H.mixed_block_flag!=0&&S<2&&(i=0),T.amp_filter[S]<1e-12)t2.fill(x,B+0,B+18,0);else{if(T.amp_filter[S]<1)for(var s=0;s<18;s++)h[s][O[S]]*=T.amp_filter[S];if(i==Fe.SHORT_TYPE){for(var s=-c/4;s<0;s++){var _=f[Fe.SHORT_TYPE][s+3];x[B+s*3+9]=u[9+s][O[S]]*_-u[8-s][O[S]],x[B+s*3+18]=u[14-s][O[S]]*_+u[15+s][O[S]],x[B+s*3+10]=u[15+s][O[S]]*_-u[14-s][O[S]],x[B+s*3+19]=h[2-s][O[S]]*_+h[3+s][O[S]],x[B+s*3+11]=h[3+s][O[S]]*_-h[2-s][O[S]],x[B+s*3+20]=h[8-s][O[S]]*_+h[9+s][O[S]]}y(x,B)}else{for(var v=i2(18),s=-w/4;s<0;s++){var l,L;l=f[i][s+27]*h[s+9][O[S]]+f[i][s+36]*h[8-s][O[S]],L=f[i][s+9]*u[s+9][O[S]]-f[i][s+18]*u[8-s][O[S]],v[s+9]=l-L*k[3+s+9],v[s+18]=l*k[3+s+9]+L}K(x,B,v)}}if(i!=Fe.SHORT_TYPE&&S!=0)for(var s=7;s>=0;--s){var Z,G;Z=x[B+s]*U[20+s]+x[B+-1-s]*D[28+s],G=x[B+s]*D[28+s]-x[B+-1-s]*U[20+s],x[B+-1-s]=Z,x[B+s]=G}}}if(R=e,p=286,T.mode_gr==1)for(var j=0;j<18;j++)r2.arraycopy(T.sb_sample[d][1][j],0,T.sb_sample[d][0][j],0,32)}}}cr.exports=s2});var La=T0((Qi,Sr)=>{"use strict";var g1=te(),he=Y0(),n2=he.System,Fi=he.VbrMode,ki=he.Float,Xi=he.ShortBlock,Yi=he.Util,Di=he.Arrays,Gi=he.new_array_n,Ui=he.new_byte,Pi=he.new_double,_2=he.new_float,l2=he.new_float_n,Ki=he.new_int,Zi=he.new_int_n,zi=he.assert;function o2(){this.l=_2(g1.SBMAX_l),this.s=l2([g1.SBMAX_s,3]);var M=this;this.assign=function(c){n2.arraycopy(c.l,0,M.l,0,g1.SBMAX_l);for(var w=0;w<g1.SBMAX_s;w++)for(var f=0;f<3;f++)M.s[w][f]=c.s[w][f]}}Sr.exports=o2});var wr=T0((Wi,xr)=>{"use strict";var Ar=La();function v2(){this.thm=new Ar,this.en=new Ar}xr.exports=v2});var q1=T0((ji,Mr)=>{"use strict";function je(M){var c=M;this.ordinal=function(){return c}}je.STEREO=new je(0);je.JOINT_STEREO=new je(1);je.DUAL_CHANNEL=new je(2);je.MONO=new je(3);je.NOT_SET=new je(4);Mr.exports=je});var te=T0((is,yr)=>{"use strict";var ue=Y0(),Rr=ue.System,ea=ue.VbrMode,Ji=ue.Float,$i=ue.ShortBlock,gi=ue.Util,es=ue.Arrays,Br=ue.new_array_n,as=ue.new_byte,rs=ue.new_double,Er=ue.new_float,h2=ue.new_float_n,u2=ue.new_int,ts=ue.new_int_n,F1=ue.assert;y0.ENCDELAY=576;y0.POSTDELAY=1152;y0.MDCTDELAY=48;y0.FFTOFFSET=224+y0.MDCTDELAY;y0.DECDELAY=528;y0.SBLIMIT=32;y0.CBANDS=64;y0.SBPSY_l=21;y0.SBPSY_s=12;y0.SBMAX_l=22;y0.SBMAX_s=13;y0.PSFB21=6;y0.PSFB12=6;y0.BLKSIZE=1024;y0.HBLKSIZE=y0.BLKSIZE/2+1;y0.BLKSIZE_s=256;y0.HBLKSIZE_s=y0.BLKSIZE_s/2+1;y0.NORM_TYPE=0;y0.START_TYPE=1;y0.SHORT_TYPE=2;y0.STOP_TYPE=3;y0.MPG_MD_LR_LR=0;y0.MPG_MD_LR_I=1;y0.MPG_MD_MS_LR=2;y0.MPG_MD_MS_I=3;y0.fircoef=[-.0207887*5,-.0378413*5,-.0432472*5,-.031183*5,779609e-23*5,.0467745*5,.10091*5,.151365*5,.187098*5];function y0(){var M=dr(),c=wr(),w=q1(),f=y0.FFTOFFSET,k=y0.MPG_MD_MS_LR,V=null;this.psy=null;var U=null,D=null,O=null;this.setModules=function(I,e,R,p){V=I,this.psy=e,U=e,D=p,O=R};var J=new M;function y(I){var e,R;if(I.ATH.useAdjust==0){I.ATH.adjust=1;return}if(R=I.loudness_sq[0][0],e=I.loudness_sq[1][0],I.channels_out==2?(R+=I.loudness_sq[0][1],e+=I.loudness_sq[1][1]):(R+=R,e+=e),I.mode_gr==2&&(R=Math.max(R,e)),R*=.5,R*=I.ATH.aaSensitivityP,R>.03125)I.ATH.adjust>=1?I.ATH.adjust=1:I.ATH.adjust<I.ATH.adjustLimit&&(I.ATH.adjust=I.ATH.adjustLimit),I.ATH.adjustLimit=1;else{var p=31.98*R+625e-6;I.ATH.adjust>=p?(I.ATH.adjust*=p*.075+.925,I.ATH.adjust<p&&(I.ATH.adjust=p)):I.ATH.adjustLimit>=p?I.ATH.adjust=p:I.ATH.adjust<I.ATH.adjustLimit&&(I.ATH.adjust=I.ATH.adjustLimit),I.ATH.adjustLimit=p}}function K(I){var e,R;for(F1(0<=I.bitrate_index&&I.bitrate_index<16),F1(0<=I.mode_ext&&I.mode_ext<4),I.bitrate_stereoMode_Hist[I.bitrate_index][4]++,I.bitrate_stereoMode_Hist[15][4]++,I.channels_out==2&&(I.bitrate_stereoMode_Hist[I.bitrate_index][I.mode_ext]++,I.bitrate_stereoMode_Hist[15][I.mode_ext]++),e=0;e<I.mode_gr;++e)for(R=0;R<I.channels_out;++R){var p=I.l3_side.tt[e][R].block_type|0;I.l3_side.tt[e][R].mixed_block_flag!=0&&(p=4),I.bitrate_blockType_Hist[I.bitrate_index][p]++,I.bitrate_blockType_Hist[I.bitrate_index][5]++,I.bitrate_blockType_Hist[15][p]++,I.bitrate_blockType_Hist[15][5]++}}function T(I,e){var R=I.internal_flags,p,d;if(R.lame_encode_frame_init==0){var n,S,H=Er(2014),x=Er(2014);for(R.lame_encode_frame_init=1,n=0,S=0;n<286+576*(1+R.mode_gr);++n)n<576*R.mode_gr?(H[n]=0,R.channels_out==2&&(x[n]=0)):(H[n]=e[0][S],R.channels_out==2&&(x[n]=e[1][S]),++S);for(d=0;d<R.mode_gr;d++)for(p=0;p<R.channels_out;p++)R.l3_side.tt[d][p].block_type=y0.SHORT_TYPE;J.mdct_sub48(R,H,x),F1(576>=y0.FFTOFFSET),F1(R.mf_size>=y0.BLKSIZE+I.framesize-y0.FFTOFFSET),F1(R.mf_size>=512+I.framesize-32)}}this.lame_encode_mp3_frame=function(I,e,R,p,d,n){var S,H=Br([2,2]);H[0][0]=new c,H[0][1]=new c,H[1][0]=new c,H[1][1]=new c;var x=Br([2,2]);x[0][0]=new c,x[0][1]=new c,x[1][0]=new c,x[1][1]=new c;var B,a=[null,null],r=I.internal_flags,s=h2([2,4]),i=[.5,.5],u=[[0,0],[0,0]],h=[[0,0],[0,0]],_,v,l;if(a[0]=e,a[1]=R,r.lame_encode_frame_init==0&&T(I,a),r.padding=0,(r.slot_lag-=r.frac_SpF)<0&&(r.slot_lag+=I.out_samplerate,r.padding=1),r.psymodel!=0){var L,Z=[null,null],G=0,j=u2(2);for(l=0;l<r.mode_gr;l++){for(v=0;v<r.channels_out;v++)Z[v]=a[v],G=576+l*576-y0.FFTOFFSET;if(I.VBR==ea.vbr_mtrh||I.VBR==ea.vbr_mt?L=U.L3psycho_anal_vbr(I,Z,G,l,H,x,u[l],h[l],s[l],j):L=U.L3psycho_anal_ns(I,Z,G,l,H,x,u[l],h[l],s[l],j),L!=0)return-4;for(I.mode==w.JOINT_STEREO&&(i[l]=s[l][2]+s[l][3],i[l]>0&&(i[l]=s[l][3]/i[l])),v=0;v<r.channels_out;v++){var l0=r.l3_side.tt[l][v];l0.block_type=j[v],l0.mixed_block_flag=0}}}else for(l=0;l<r.mode_gr;l++)for(v=0;v<r.channels_out;v++)r.l3_side.tt[l][v].block_type=y0.NORM_TYPE,r.l3_side.tt[l][v].mixed_block_flag=0,h[l][v]=u[l][v]=700;if(y(r),J.mdct_sub48(r,a[0],a[1]),r.mode_ext=y0.MPG_MD_LR_LR,I.force_ms)r.mode_ext=y0.MPG_MD_MS_LR;else if(I.mode==w.JOINT_STEREO){var m0=0,b0=0;for(l=0;l<r.mode_gr;l++)for(v=0;v<r.channels_out;v++)m0+=h[l][v],b0+=u[l][v];if(m0<=1*b0){var t=r.l3_side.tt[0],o=r.l3_side.tt[r.mode_gr-1];t[0].block_type==t[1].block_type&&o[0].block_type==o[1].block_type&&(r.mode_ext=y0.MPG_MD_MS_LR)}}if(r.mode_ext==k?(B=x,_=h):(B=H,_=u),I.analysis&&r.pinfo!=null)for(l=0;l<r.mode_gr;l++)for(v=0;v<r.channels_out;v++)r.pinfo.ms_ratio[l]=r.ms_ratio[l],r.pinfo.ms_ener_ratio[l]=i[l],r.pinfo.blocktype[l][v]=r.l3_side.tt[l][v].block_type,r.pinfo.pe[l][v]=_[l][v],Rr.arraycopy(r.l3_side.tt[l][v].xr,0,r.pinfo.xr[l][v],0,576),r.mode_ext==k&&(r.pinfo.ers[l][v]=r.pinfo.ers[l][v+2],Rr.arraycopy(r.pinfo.energy[l][v+2],0,r.pinfo.energy[l][v],0,r.pinfo.energy[l][v].length));if(I.VBR==ea.vbr_off||I.VBR==ea.vbr_abr){var $,a0;for($=0;$<18;$++)r.nsPsy.pefirbuf[$]=r.nsPsy.pefirbuf[$+1];for(a0=0,l=0;l<r.mode_gr;l++)for(v=0;v<r.channels_out;v++)a0+=_[l][v];for(r.nsPsy.pefirbuf[18]=a0,a0=r.nsPsy.pefirbuf[9],$=0;$<9;$++)a0+=(r.nsPsy.pefirbuf[$]+r.nsPsy.pefirbuf[18-$])*y0.fircoef[$];for(a0=670*5*r.mode_gr*r.channels_out/a0,l=0;l<r.mode_gr;l++)for(v=0;v<r.channels_out;v++)_[l][v]*=a0}if(r.iteration_loop.iteration_loop(I,_,i,B),V.format_bitstream(I),S=V.copy_buffer(r,p,d,n,1),I.bWriteVbrTag&&D.addVbrFrame(I),I.analysis&&r.pinfo!=null){for(v=0;v<r.channels_out;v++){var h0;for(h0=0;h0<f;h0++)r.pinfo.pcmdata[v][h0]=r.pinfo.pcmdata[v][h0+I.framesize];for(h0=f;h0<1600;h0++)r.pinfo.pcmdata[v][h0]=a[v][h0-f]}O.set_frame_pinfo(I,B)}return K(r),S}}yr.exports=y0});var aa=T0((ss,Tr)=>{"use strict";function I0(M,c,w,f){this.xlen=M,this.linmax=c,this.table=w,this.hlen=f}var t0={};t0.t1HB=[1,1,1,0];t0.t2HB=[1,2,1,3,1,1,3,2,0];t0.t3HB=[3,2,1,1,1,1,3,2,0];t0.t5HB=[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0];t0.t6HB=[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0];t0.t7HB=[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0];t0.t8HB=[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0];t0.t9HB=[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0];t0.t10HB=[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0];t0.t11HB=[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0];t0.t12HB=[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0];t0.t13HB=[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1];t0.t15HB=[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0];t0.t16HB=[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3];t0.t24HB=[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3];t0.t32HB=[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16];t0.t33HB=[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0];t0.t1l=[1,4,3,5];t0.t2l=[1,4,7,4,5,7,6,7,8];t0.t3l=[2,3,7,4,4,7,6,7,8];t0.t5l=[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10];t0.t6l=[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9];t0.t7l=[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12];t0.t8l=[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13];t0.t9l=[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11];t0.t10l=[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13];t0.t11l=[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12];t0.t12l=[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12];t0.t13l=[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18];t0.t15l=[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15];t0.t16_5l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12];t0.t16l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10];t0.t24l=[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6];t0.t32l=[1,5,5,7,5,8,7,9,5,7,7,9,7,9,9,10];t0.t33l=[4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8];t0.ht=[new I0(0,0,null,null),new I0(2,0,t0.t1HB,t0.t1l),new I0(3,0,t0.t2HB,t0.t2l),new I0(3,0,t0.t3HB,t0.t3l),new I0(0,0,null,null),new I0(4,0,t0.t5HB,t0.t5l),new I0(4,0,t0.t6HB,t0.t6l),new I0(6,0,t0.t7HB,t0.t7l),new I0(6,0,t0.t8HB,t0.t8l),new I0(6,0,t0.t9HB,t0.t9l),new I0(8,0,t0.t10HB,t0.t10l),new I0(8,0,t0.t11HB,t0.t11l),new I0(8,0,t0.t12HB,t0.t12l),new I0(16,0,t0.t13HB,t0.t13l),new I0(0,0,null,t0.t16_5l),new I0(16,0,t0.t15HB,t0.t15l),new I0(1,1,t0.t16HB,t0.t16l),new I0(2,3,t0.t16HB,t0.t16l),new I0(3,7,t0.t16HB,t0.t16l),new I0(4,15,t0.t16HB,t0.t16l),new I0(6,63,t0.t16HB,t0.t16l),new I0(8,255,t0.t16HB,t0.t16l),new I0(10,1023,t0.t16HB,t0.t16l),new I0(13,8191,t0.t16HB,t0.t16l),new I0(4,15,t0.t24HB,t0.t24l),new I0(5,31,t0.t24HB,t0.t24l),new I0(6,63,t0.t24HB,t0.t24l),new I0(7,127,t0.t24HB,t0.t24l),new I0(8,255,t0.t24HB,t0.t24l),new I0(9,511,t0.t24HB,t0.t24l),new I0(11,2047,t0.t24HB,t0.t24l),new I0(13,8191,t0.t24HB,t0.t24l),new I0(0,0,t0.t32HB,t0.t32l),new I0(0,0,t0.t33HB,t0.t33l)];t0.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366];t0.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296];t0.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369];t0.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]];t0.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]];t0.scfsi_band=[0,6,11,16,21];Tr.exports=t0});var k1=T0((ns,Ir)=>{"use strict";var f2=te(),pr={};pr.SFBMAX=f2.SBMAX_s*3;Ir.exports=pr});var ra=T0((As,Lr)=>{"use strict";var fe=Y0(),_s=fe.System,ls=fe.VbrMode,os=fe.Float,vs=fe.ShortBlock,hs=fe.Util,us=fe.Arrays,fs=fe.new_array_n,bs=fe.new_byte,ms=fe.new_double,b2=fe.new_float,cs=fe.new_float_n,u1=fe.new_int,ds=fe.new_int_n,Ss=fe.assert,Va=k1();function m2(){this.xr=b2(576),this.l3_enc=u1(576),this.scalefac=u1(Va.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=u1(3),this.subblock_gain=u1(4),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=u1(Va.SFBMAX),this.window=u1(Va.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=u1(4),this.max_nonzero_coeff=0;var M=this;function c(f){return new Int32Array(f)}function w(f){return new Float32Array(f)}this.assign=function(f){M.xr=w(f.xr),M.l3_enc=c(f.l3_enc),M.scalefac=c(f.scalefac),M.xrpow_max=f.xrpow_max,M.part2_3_length=f.part2_3_length,M.big_values=f.big_values,M.count1=f.count1,M.global_gain=f.global_gain,M.scalefac_compress=f.scalefac_compress,M.block_type=f.block_type,M.mixed_block_flag=f.mixed_block_flag,M.table_select=c(f.table_select),M.subblock_gain=c(f.subblock_gain),M.region0_count=f.region0_count,M.region1_count=f.region1_count,M.preflag=f.preflag,M.scalefac_scale=f.scalefac_scale,M.count1table_select=f.count1table_select,M.part2_length=f.part2_length,M.sfb_lmax=f.sfb_lmax,M.sfb_smin=f.sfb_smin,M.psy_lmax=f.psy_lmax,M.sfbmax=f.sfbmax,M.psymax=f.psymax,M.sfbdivide=f.sfbdivide,M.width=c(f.width),M.window=c(f.window),M.count1bits=f.count1bits,M.sfb_partition_table=f.sfb_partition_table.slice(0),M.slen=c(f.slen),M.max_nonzero_coeff=f.max_nonzero_coeff}}Lr.exports=m2});var Na=T0((Ns,Vr)=>{"use strict";var be=Y0(),ta=be.System,xs=be.VbrMode,ws=be.Float,Ms=be.ShortBlock,Rs=be.Util,Bs=be.Arrays,Es=be.new_array_n,ys=be.new_byte,Ts=be.new_double,ps=be.new_float,Is=be.new_float_n,ia=be.new_int,Ls=be.new_int_n,Vs=be.assert,sa=te();function c2(M,c,w,f){this.l=ia(1+sa.SBMAX_l),this.s=ia(1+sa.SBMAX_s),this.psfb21=ia(1+sa.PSFB21),this.psfb12=ia(1+sa.PSFB12);var k=this.l,V=this.s;arguments.length==4&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],ta.arraycopy(this.arrL,0,k,0,Math.min(this.arrL.length,this.l.length)),ta.arraycopy(this.arrS,0,V,0,Math.min(this.arrS.length,this.s.length)),ta.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),ta.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}Vr.exports=c2});var Ha=T0((Hs,Nr)=>{"use strict";function d2(M){this.bits=M}Nr.exports=d2});var Cr=T0((zs,Or)=>{"use strict";var me=Y0(),Os=me.System,Cs=me.VbrMode,qs=me.Float,Fs=me.ShortBlock,ks=me.Util,Xs=me.Arrays,Ys=me.new_array_n,Ds=me.new_byte,Gs=me.new_double,Us=me.new_float,Ps=me.new_float_n,Hr=me.new_int,Ks=me.new_int_n,Zs=me.assert,S2=ra();function A2(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[Hr(4),Hr(4)];for(var M=0;M<2;M++)for(var c=0;c<2;c++)this.tt[M][c]=new S2}Or.exports=A2});var kr=T0((nn,Fr)=>{"use strict";var ce=Y0(),Qs=ce.System,Ws=ce.VbrMode,js=ce.Float,Js=ce.ShortBlock,$s=ce.Util,gs=ce.Arrays,en=ce.new_array_n,an=ce.new_byte,rn=ce.new_double,Oa=ce.new_float,x2=ce.new_float_n,w2=ce.new_int,tn=ce.new_int_n,sn=ce.assert,qr=te();function M2(){this.last_en_subshort=x2([4,9]),this.lastAttacks=w2(4),this.pefirbuf=Oa(19),this.longfact=Oa(qr.SBMAX_l),this.shortfact=Oa(qr.SBMAX_s),this.attackthre=0,this.attackthre_s=0}Fr.exports=M2});var Yr=T0((_n,Xr)=>{"use strict";function R2(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0}Xr.exports=R2});var X1=T0((cn,Gr)=>{"use strict";var de=Y0(),ln=de.System,on=de.VbrMode,vn=de.Float,hn=de.ShortBlock,un=de.Util,fn=de.Arrays,bn=de.new_array_n,B2=de.new_byte,E2=de.new_double,De=de.new_float,f1=de.new_float_n,Je=de.new_int,na=de.new_int_n,mn=de.assert,y2=Cr(),T2=Na(),p2=kr(),I2=Yr(),Dr=La(),P0=te(),L2=k1();t1.MFSIZE=3*1152+P0.ENCDELAY-P0.MDCTDELAY;t1.MAX_HEADER_BUF=256;t1.MAX_BITS_PER_CHANNEL=4095;t1.MAX_BITS_PER_GRANULE=7680;t1.BPC=320;function t1(){var M=40;this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=f1([2,t1.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new y2,this.ms_ratio=De(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=Je(2),this.CurrentStep=Je(2),this.masking_lower=0,this.bv_scf=Je(576),this.pseudohalf=Je(L2.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=new Array(2),this.blackfilt=new Array(2*t1.BPC+1),this.itime=E2(2),this.sideinfo_len=0,this.sb_sample=f1([2,2,18,P0.SBLIMIT]),this.amp_filter=De(32);function c(){this.write_timing=0,this.ptr=0,this.buf=B2(M)}this.header=new Array(t1.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new T2,this.minval_l=De(P0.CBANDS),this.minval_s=De(P0.CBANDS),this.nb_1=f1([4,P0.CBANDS]),this.nb_2=f1([4,P0.CBANDS]),this.nb_s1=f1([4,P0.CBANDS]),this.nb_s2=f1([4,P0.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=new Array(4),this.en=new Array(4),this.tot_ener=De(4),this.loudness_sq=f1([2,2]),this.loudness_sq_save=De(2),this.mld_l=De(P0.SBMAX_l),this.mld_s=De(P0.SBMAX_s),this.bm_l=Je(P0.SBMAX_l),this.bo_l=Je(P0.SBMAX_l),this.bm_s=Je(P0.SBMAX_s),this.bo_s=Je(P0.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=na([P0.CBANDS,2]),this.s3ind_s=na([P0.CBANDS,2]),this.numlines_s=Je(P0.CBANDS),this.numlines_l=Je(P0.CBANDS),this.rnumlines_l=De(P0.CBANDS),this.mld_cb_l=De(P0.CBANDS),this.mld_cb_s=De(P0.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=De(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=Je(2),this.nsPsy=new p2,this.VBR_seek_table=new I2,this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=na([16,5]),this.bitrate_blockType_Hist=na([16,6]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var w=0;w<this.en.length;w++)this.en[w]=new Dr;for(var w=0;w<this.thm.length;w++)this.thm[w]=new Dr;for(var w=0;w<this.header.length;w++)this.header[w]=new c}Gr.exports=t1});var Zr=T0((In,Kr)=>{"use strict";var Se=Y0(),dn=Se.System,Sn=Se.VbrMode,An=Se.Float,xn=Se.ShortBlock,Ur=Se.Util,wn=Se.Arrays,Mn=Se.new_array_n,Rn=Se.new_byte,Bn=Se.new_double,Pr=Se.new_float,En=Se.new_float_n,yn=Se.new_int,Tn=Se.new_int_n,pn=Se.assert,Q0=te();function V2(){var M=Pr(Q0.BLKSIZE),c=Pr(Q0.BLKSIZE_s/2),w=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475];function f(V,U,D){var O=0,J,y,K;D<<=1;var T=U+D;J=4;do{var I,e,R,p,d,n,S;S=J>>1,p=J,d=J<<1,n=d+p,J=d<<1,y=U,K=y+S;do{var H,x,B,a;x=V[y+0]-V[y+p],H=V[y+0]+V[y+p],a=V[y+d]-V[y+n],B=V[y+d]+V[y+n],V[y+d]=H-B,V[y+0]=H+B,V[y+n]=x-a,V[y+p]=x+a,x=V[K+0]-V[K+p],H=V[K+0]+V[K+p],a=Ur.SQRT2*V[K+n],B=Ur.SQRT2*V[K+d],V[K+d]=H-B,V[K+0]=H+B,V[K+n]=x-a,V[K+p]=x+a,K+=J,y+=J}while(y<T);for(e=w[O+0],I=w[O+1],R=1;R<S;R++){var r,s;r=1-2*I*I,s=2*I*e,y=U+R,K=U+p-R;do{var i,u,h,H,x,_,B,v,a,l;u=s*V[y+p]-r*V[K+p],i=r*V[y+p]+s*V[K+p],x=V[y+0]-i,H=V[y+0]+i,_=V[K+0]-u,h=V[K+0]+u,u=s*V[y+n]-r*V[K+n],i=r*V[y+n]+s*V[K+n],a=V[y+d]-i,B=V[y+d]+i,l=V[K+d]-u,v=V[K+d]+u,u=I*B-e*l,i=e*B+I*l,V[y+d]=H-i,V[y+0]=H+i,V[K+n]=_-u,V[K+p]=_+u,u=e*v-I*a,i=I*v+e*a,V[K+d]=h-i,V[K+0]=h+i,V[y+n]=x-u,V[y+p]=x+u,K+=J,y+=J}while(y<T);r=e,e=r*w[O+0]-I*w[O+1],I=r*w[O+1]+I*w[O+0]}O+=2}while(J<D)}var k=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(V,U,D,O,J){for(var y=0;y<3;y++){var K=Q0.BLKSIZE_s/2,T=65535&576/3*(y+1),I=Q0.BLKSIZE_s/8-1;do{var e,R,p,d,n,S=k[I<<2]&255;e=c[S]*O[D][J+S+T],n=c[127-S]*O[D][J+S+T+128],R=e-n,e=e+n,p=c[S+64]*O[D][J+S+T+64],n=c[63-S]*O[D][J+S+T+192],d=p-n,p=p+n,K-=4,U[y][K+0]=e+p,U[y][K+2]=e-p,U[y][K+1]=R+d,U[y][K+3]=R-d,e=c[S+1]*O[D][J+S+T+1],n=c[126-S]*O[D][J+S+T+129],R=e-n,e=e+n,p=c[S+65]*O[D][J+S+T+65],n=c[62-S]*O[D][J+S+T+193],d=p-n,p=p+n,U[y][K+Q0.BLKSIZE_s/2+0]=e+p,U[y][K+Q0.BLKSIZE_s/2+2]=e-p,U[y][K+Q0.BLKSIZE_s/2+1]=R+d,U[y][K+Q0.BLKSIZE_s/2+3]=R-d}while(--I>=0);f(U[y],K,Q0.BLKSIZE_s/2)}},this.fft_long=function(V,U,D,O,J){var y=Q0.BLKSIZE/8-1,K=Q0.BLKSIZE/2;do{var T,I,e,R,p,d=k[y]&255;T=M[d]*O[D][J+d],p=M[d+512]*O[D][J+d+512],I=T-p,T=T+p,e=M[d+256]*O[D][J+d+256],p=M[d+768]*O[D][J+d+768],R=e-p,e=e+p,K-=4,U[K+0]=T+e,U[K+2]=T-e,U[K+1]=I+R,U[K+3]=I-R,T=M[d+1]*O[D][J+d+1],p=M[d+513]*O[D][J+d+513],I=T-p,T=T+p,e=M[d+257]*O[D][J+d+257],p=M[d+769]*O[D][J+d+769],R=e-p,e=e+p,U[K+Q0.BLKSIZE/2+0]=T+e,U[K+Q0.BLKSIZE/2+2]=T-e,U[K+Q0.BLKSIZE/2+1]=I+R,U[K+Q0.BLKSIZE/2+3]=I-R}while(--y>=0);f(U,K,Q0.BLKSIZE/2)},this.init_fft=function(V){for(var U=0;U<Q0.BLKSIZE;U++)M[U]=.42-.5*Math.cos(2*Math.PI*(U+.5)/Q0.BLKSIZE)+.08*Math.cos(4*Math.PI*(U+.5)/Q0.BLKSIZE);for(var U=0;U<Q0.BLKSIZE_s/2;U++)c[U]=.5*(1-Math.cos(2*Math.PI*(U+.5)/Q0.BLKSIZE_s))}}Kr.exports=V2});var _a=T0((Cn,Qr)=>{"use strict";var xe=Y0(),Ln=xe.System,y1=xe.VbrMode,zr=xe.Float,T1=xe.ShortBlock,Ae=xe.Util,N2=xe.Arrays,Vn=xe.new_array_n,Nn=xe.new_byte,Hn=xe.new_double,j0=xe.new_float,Ge=xe.new_float_n,b1=xe.new_int,On=xe.new_int_n,v0=xe.assert,H2=Zr(),z=te();function O2(){var M=q1(),c=new H2,w=2.302585092994046,f=2,k=16,V=2,U=16,D=.34,O=1/(14752*14752)/(z.BLKSIZE/2),J=.01,y=.8,K=.6,T=.3,I=3.5,e=4.4,R=25,p=21,d=.2302585093;function n(b){return b}function S(b,m){for(var E=0,N=0;N<z.BLKSIZE/2;++N)E+=b[N]*m.ATH.eql_w[N];return E*=O,E}function H(b,m,E,N,F,A,q,X,C,Q,Y){var W=b.internal_flags;if(C<2)c.fft_long(W,N[F],C,Q,Y),c.fft_short(W,A[q],C,Q,Y);else if(C==2){for(var s0=z.BLKSIZE-1;s0>=0;--s0){var x0=N[F+0][s0],g=N[F+1][s0];N[F+0][s0]=(x0+g)*Ae.SQRT2*.5,N[F+1][s0]=(x0-g)*Ae.SQRT2*.5}for(var d0=2;d0>=0;--d0)for(var s0=z.BLKSIZE_s-1;s0>=0;--s0){var x0=A[q+0][d0][s0],g=A[q+1][d0][s0];A[q+0][d0][s0]=(x0+g)*Ae.SQRT2*.5,A[q+1][d0][s0]=(x0-g)*Ae.SQRT2*.5}}m[0]=N[F+0][0],m[0]*=m[0];for(var s0=z.BLKSIZE/2-1;s0>=0;--s0){var P=N[F+0][z.BLKSIZE/2-s0],o0=N[F+0][z.BLKSIZE/2+s0];m[z.BLKSIZE/2-s0]=(P*P+o0*o0)*.5}for(var d0=2;d0>=0;--d0){E[d0][0]=A[q+0][d0][0],E[d0][0]*=E[d0][0];for(var s0=z.BLKSIZE_s/2-1;s0>=0;--s0){var P=A[q+0][d0][z.BLKSIZE_s/2-s0],o0=A[q+0][d0][z.BLKSIZE_s/2+s0];E[d0][z.BLKSIZE_s/2-s0]=(P*P+o0*o0)*.5}}{for(var B0=0,s0=11;s0<z.HBLKSIZE;s0++)B0+=m[s0];W.tot_ener[C]=B0}if(b.analysis){for(var s0=0;s0<z.HBLKSIZE;s0++)W.pinfo.energy[X][C][s0]=W.pinfo.energy_save[C][s0],W.pinfo.energy_save[C][s0]=m[s0];W.pinfo.pe[X][C]=W.pe[C]}b.athaa_loudapprox==2&&C<2&&(W.loudness_sq[X][C]=W.loudness_sq_save[C],W.loudness_sq_save[C]=S(m,W))}var x=8,B=23,a=15,r,s,i,u=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749];function h(){r=Math.pow(10,(x+1)/16),s=Math.pow(10,(B+1)/16),i=Math.pow(10,a/10)}var _=[3.3246*3.3246,3.23837*3.23837,3.15437*3.15437,3.00412*3.00412,2.86103*2.86103,2.65407*2.65407,2.46209*2.46209,2.284*2.284,2.11879*2.11879,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,1.56911*1.56911,1.46658*1.46658,1.37074*1.37074,1.31036*1.31036,1.25264*1.25264,1.20648*1.20648,1.16203*1.16203,1.12765*1.12765,1.09428*1.09428,1.0659*1.0659,1.03826*1.03826,1.01895*1.01895,1],v=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1],l=[2.35364*2.35364,2.29259*2.29259,2.23313*2.23313,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,1.49999*1.49999,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.11084*1.11084,1.03826*1.03826];function L(b,m,E,N,F,A){var q;if(m>b)if(m<b*s)q=m/b;else return b+m;else{if(b>=m*s)return b+m;q=b/m}if(v0(b>=0),v0(m>=0),b+=m,N+3<=6){if(q>=r)return b;var X=0|Ae.FAST_LOG10_X(q,16);return b*v[X]}var X=0|Ae.FAST_LOG10_X(q,16);if(A!=0?m=F.ATH.cb_s[E]*F.ATH.adjust:m=F.ATH.cb_l[E]*F.ATH.adjust,v0(m>=0),b<i*m){if(b>m){var C,Q;return C=1,X<=13&&(C=l[X]),Q=Ae.FAST_LOG10_X(b/m,10/15),b*((_[X]-C)*Q+C)}return X>13?b:b*l[X]}return b*_[X]}var Z=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1];function G(b,m,E){var N;if(b<0&&(b=0),m<0&&(m=0),b<=0)return m;if(m<=0)return b;if(m>b?N=m/b:N=b/m,-2<=E&&E<=2){if(N>=r)return b+m;var F=0|Ae.FAST_LOG10_X(N,16);return(b+m)*Z[F]}return N<s?b+m:(b<m&&(b=m),b)}function j(b,m){var E=b.internal_flags;if(E.channels_out>1){for(var N=0;N<z.SBMAX_l;N++){var F=E.thm[0].l[N],A=E.thm[1].l[N];E.thm[0].l[N]+=A*m,E.thm[1].l[N]+=F*m}for(var N=0;N<z.SBMAX_s;N++)for(var q=0;q<3;q++){var F=E.thm[0].s[N][q],A=E.thm[1].s[N][q];E.thm[0].s[N][q]+=A*m,E.thm[1].s[N][q]+=F*m}}}function l0(b){for(var m=0;m<z.SBMAX_l;m++)if(!(b.thm[0].l[m]>1.58*b.thm[1].l[m]||b.thm[1].l[m]>1.58*b.thm[0].l[m])){var E=b.mld_l[m]*b.en[3].l[m],N=Math.max(b.thm[2].l[m],Math.min(b.thm[3].l[m],E));E=b.mld_l[m]*b.en[2].l[m];var F=Math.max(b.thm[3].l[m],Math.min(b.thm[2].l[m],E));b.thm[2].l[m]=N,b.thm[3].l[m]=F}for(var m=0;m<z.SBMAX_s;m++)for(var A=0;A<3;A++)if(!(b.thm[0].s[m][A]>1.58*b.thm[1].s[m][A]||b.thm[1].s[m][A]>1.58*b.thm[0].s[m][A])){var E=b.mld_s[m]*b.en[3].s[m][A],N=Math.max(b.thm[2].s[m][A],Math.min(b.thm[3].s[m][A],E));E=b.mld_s[m]*b.en[2].s[m][A];var F=Math.max(b.thm[3].s[m][A],Math.min(b.thm[2].s[m][A],E));b.thm[2].s[m][A]=N,b.thm[3].s[m][A]=F}}function m0(b,m,E){var N=m,F=Math.pow(10,E);m*=2,N*=2;for(var A=0;A<z.SBMAX_l;A++){var q,X,C,Q;if(Q=b.ATH.cb_l[b.bm_l[A]]*F,q=Math.min(Math.max(b.thm[0].l[A],Q),Math.max(b.thm[1].l[A],Q)),X=Math.max(b.thm[2].l[A],Q),C=Math.max(b.thm[3].l[A],Q),q*m<X+C){var Y=q*N/(X+C);X*=Y,C*=Y,v0(X+C>0)}b.thm[2].l[A]=Math.min(X,b.thm[2].l[A]),b.thm[3].l[A]=Math.min(C,b.thm[3].l[A])}F*=z.BLKSIZE_s/z.BLKSIZE;for(var A=0;A<z.SBMAX_s;A++)for(var W=0;W<3;W++){var q,X,C,Q;if(Q=b.ATH.cb_s[b.bm_s[A]]*F,q=Math.min(Math.max(b.thm[0].s[A][W],Q),Math.max(b.thm[1].s[A][W],Q)),X=Math.max(b.thm[2].s[A][W],Q),C=Math.max(b.thm[3].s[A][W],Q),q*m<X+C){var Y=q*m/(X+C);X*=Y,C*=Y,v0(X+C>0)}b.thm[2].s[A][W]=Math.min(b.thm[2].s[A][W],X),b.thm[3].s[A][W]=Math.min(b.thm[3].s[A][W],C)}}function b0(b,m,E,N,F){var A,q,X=0,C=0;for(A=q=0;A<z.SBMAX_s;++q,++A){for(var Q=b.bo_s[A],Y=b.npart_s,W=Q<Y?Q:Y;q<W;)v0(m[q]>=0),v0(E[q]>=0),X+=m[q],C+=E[q],q++;if(b.en[N].s[A][F]=X,b.thm[N].s[A][F]=C,q>=Y){++A;break}v0(m[q]>=0),v0(E[q]>=0);{var s0=b.PSY.bo_s_weight[A],x0=1-s0;X=s0*m[q],C=s0*E[q],b.en[N].s[A][F]+=X,b.thm[N].s[A][F]+=C,X=x0*m[q],C=x0*E[q]}}for(;A<z.SBMAX_s;++A)b.en[N].s[A][F]=0,b.thm[N].s[A][F]=0}function t(b,m,E,N){var F,A,q=0,X=0;for(F=A=0;F<z.SBMAX_l;++A,++F){for(var C=b.bo_l[F],Q=b.npart_l,Y=C<Q?C:Q;A<Y;)v0(m[A]>=0),v0(E[A]>=0),q+=m[A],X+=E[A],A++;if(b.en[N].l[F]=q,b.thm[N].l[F]=X,A>=Q){++F;break}v0(m[A]>=0),v0(E[A]>=0);{var W=b.PSY.bo_l_weight[F],s0=1-W;q=W*m[A],X=W*E[A],b.en[N].l[F]+=q,b.thm[N].l[F]+=X,q=s0*m[A],X=s0*E[A]}}for(;F<z.SBMAX_l;++F)b.en[N].l[F]=0,b.thm[N].l[F]=0}function o(b,m,E,N,F,A){var q=b.internal_flags,X,C;for(C=X=0;C<q.npart_s;++C){for(var Q=0,Y=0,W=q.numlines_s[C],s0=0;s0<W;++s0,++X){var x0=m[A][X];Q+=x0,Y<x0&&(Y=x0)}E[C]=Q}for(v0(C==q.npart_s),v0(X==129),X=C=0;C<q.npart_s;C++){var g=q.s3ind_s[C][0],d0=q.s3_ss[X++]*E[g];for(++g;g<=q.s3ind_s[C][1];)d0+=q.s3_ss[X]*E[g],++X,++g;{var P=V*q.nb_s1[F][C];N[C]=Math.min(d0,P)}if(q.blocktype_old[F&1]==z.SHORT_TYPE){var P=U*q.nb_s2[F][C],o0=N[C];N[C]=Math.min(P,o0)}q.nb_s2[F][C]=q.nb_s1[F][C],q.nb_s1[F][C]=d0,v0(N[C]>=0)}for(;C<=z.CBANDS;++C)E[C]=0,N[C]=0}function $(b,m,E,N){var F=b.internal_flags;b.short_blocks==T1.short_block_coupled&&!(m[0]!=0&&m[1]!=0)&&(m[0]=m[1]=0);for(var A=0;A<F.channels_out;A++)N[A]=z.NORM_TYPE,b.short_blocks==T1.short_block_dispensed&&(m[A]=1),b.short_blocks==T1.short_block_forced&&(m[A]=0),m[A]!=0?(v0(F.blocktype_old[A]!=z.START_TYPE),F.blocktype_old[A]==z.SHORT_TYPE&&(N[A]=z.STOP_TYPE)):(N[A]=z.SHORT_TYPE,F.blocktype_old[A]==z.NORM_TYPE&&(F.blocktype_old[A]=z.START_TYPE),F.blocktype_old[A]==z.STOP_TYPE&&(F.blocktype_old[A]=z.SHORT_TYPE)),E[A]=F.blocktype_old[A],F.blocktype_old[A]=N[A]}function a0(b,m,E){return E>=1?b:E<=0?m:m>0?Math.pow(b/m,E)*m:0}var h0=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130];function S0(b,m){for(var E=309.07,N=0;N<z.SBMAX_s-1;N++)for(var F=0;F<3;F++){var A=b.thm.s[N][F];if(v0(N<h0.length),A>0){var q=A*m,X=b.en.s[N][F];X>q&&(X>q*1e10?E+=h0[N]*(10*w):(v0(q>0),E+=h0[N]*Ae.FAST_LOG10(X/q)))}}return E}var f0=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1];function _0(b,m){for(var E=281.0575,N=0;N<z.SBMAX_l-1;N++){var F=b.thm.l[N];if(v0(N<f0.length),F>0){var A=F*m,q=b.en.l[N];q>A&&(q>A*1e10?E+=f0[N]*(10*w):(v0(A>0),E+=f0[N]*Ae.FAST_LOG10(q/A)))}}return E}function w0(b,m,E,N,F){var A,q;for(A=q=0;A<b.npart_l;++A){var X=0,C=0,Q;for(Q=0;Q<b.numlines_l[A];++Q,++q){var Y=m[q];v0(Y>=0),X+=Y,C<Y&&(C=Y)}E[A]=X,N[A]=C,F[A]=X*b.rnumlines_l[A],v0(b.rnumlines_l[A]>=0),v0(X>=0),v0(E[A]>=0),v0(N[A]>=0),v0(F[A]>=0)}}function c0(b,m,E,N){var F=u.length-1,A=0,q=E[A]+E[A+1];if(v0(q>=0),q>0){var X=m[A];X<m[A+1]&&(X=m[A+1]),v0(b.numlines_l[A]+b.numlines_l[A+1]-1>0),q=20*(X*2-q)/(q*(b.numlines_l[A]+b.numlines_l[A+1]-1));var C=0|q;C>F&&(C=F),N[A]=C}else N[A]=0;for(A=1;A<b.npart_l-1;A++)if(q=E[A-1]+E[A]+E[A+1],v0(q>=0),q>0){var X=m[A-1];X<m[A]&&(X=m[A]),X<m[A+1]&&(X=m[A+1]),v0(b.numlines_l[A-1]+b.numlines_l[A]+b.numlines_l[A+1]-1>0),q=20*(X*3-q)/(q*(b.numlines_l[A-1]+b.numlines_l[A]+b.numlines_l[A+1]-1));var C=0|q;C>F&&(C=F),N[A]=C}else N[A]=0;if(v0(A>0),v0(A==b.npart_l-1),q=E[A-1]+E[A],v0(q>=0),q>0){var X=m[A-1];X<m[A]&&(X=m[A]),v0(b.numlines_l[A-1]+b.numlines_l[A]-1>0),q=20*(X*2-q)/(q*(b.numlines_l[A-1]+b.numlines_l[A]-1));var C=0|q;C>F&&(C=F),N[A]=C}else N[A]=0;v0(A==b.npart_l-1)}var i0=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];this.L3psycho_anal_ns=function(b,m,E,N,F,A,q,X,C,Q){var Y=b.internal_flags,W=Ge([2,z.BLKSIZE]),s0=Ge([2,3,z.BLKSIZE_s]),x0=j0(z.CBANDS+1),g=j0(z.CBANDS+1),d0=j0(z.CBANDS+2),P=b1(2),o0=b1(2),B0,r0,u0,e0,A0,H0,n0,M0,E0=Ge([2,576]),k0,He=b1(z.CBANDS+2),z0=b1(z.CBANDS+2);for(N2.fill(z0,0),B0=Y.channels_out,b.mode==M.JOINT_STEREO&&(B0=4),b.VBR==y1.vbr_off?k0=Y.ResvMax==0?0:Y.ResvSize/Y.ResvMax*.5:b.VBR==y1.vbr_rh||b.VBR==y1.vbr_mtrh||b.VBR==y1.vbr_mt?k0=.6:k0=1,r0=0;r0<Y.channels_out;r0++){var C0=m[r0],le=E+576-350-p+192;for(v0(i0.length==(p-1)/2),e0=0;e0<576;e0++){var Oe,Ce;for(Oe=C0[le+e0+10],Ce=0,A0=0;A0<(p-1)/2-1;A0+=2)Oe+=i0[A0]*(C0[le+e0+A0]+C0[le+e0+p-A0]),Ce+=i0[A0+1]*(C0[le+e0+A0+1]+C0[le+e0+p-A0-1]);E0[r0][e0]=Oe+Ce}F[N][r0].en.assign(Y.en[r0]),F[N][r0].thm.assign(Y.thm[r0]),B0>2&&(A[N][r0].en.assign(Y.en[r0+2]),A[N][r0].thm.assign(Y.thm[r0+2]))}for(r0=0;r0<B0;r0++){var Qe,We,re=j0(12),$e=[0,0,0,0],B1=j0(12),xa=1,Ja,$a=j0(z.CBANDS),er=j0(z.CBANDS),X0=[0,0,0,0],ar=j0(z.HBLKSIZE),rr=Ge([3,z.HBLKSIZE_s]);for(v0(Y.npart_s<=z.CBANDS),v0(Y.npart_l<=z.CBANDS),e0=0;e0<3;e0++)re[e0]=Y.nsPsy.last_en_subshort[r0][e0+6],v0(Y.nsPsy.last_en_subshort[r0][e0+4]>0),B1[e0]=re[e0]/Y.nsPsy.last_en_subshort[r0][e0+4],$e[0]+=re[e0];if(r0==2)for(e0=0;e0<576;e0++){var wa,Ma;wa=E0[0][e0],Ma=E0[1][e0],E0[0][e0]=wa+Ma,E0[1][e0]=wa-Ma}{var tr=E0[r0&1],V1=0;for(e0=0;e0<9;e0++){for(var Kt=V1+64,g0=1;V1<Kt;V1++)g0<Math.abs(tr[V1])&&(g0=Math.abs(tr[V1]));Y.nsPsy.last_en_subshort[r0][e0]=re[e0+3]=g0,$e[1+e0/3]+=g0,g0>re[e0+3-2]?(v0(re[e0+3-2]>0),g0=g0/re[e0+3-2]):re[e0+3-2]>g0*10?(v0(g0>0),g0=re[e0+3-2]/(g0*10)):g0=0,B1[e0+3]=g0}}if(b.analysis){var Ra=B1[0];for(e0=1;e0<12;e0++)Ra<B1[e0]&&(Ra=B1[e0]);Y.pinfo.ers[N][r0]=Y.pinfo.ers_save[r0],Y.pinfo.ers_save[r0]=Ra}for(Ja=r0==3?Y.nsPsy.attackthre_s:Y.nsPsy.attackthre,e0=0;e0<12;e0++)X0[e0/3]==0&&B1[e0]>Ja&&(X0[e0/3]=e0%3+1);for(e0=1;e0<4;e0++){var Ba;$e[e0-1]>$e[e0]?(v0($e[e0]>0),Ba=$e[e0-1]/$e[e0]):(v0($e[e0-1]>0),Ba=$e[e0]/$e[e0-1]),Ba<1.7&&(X0[e0]=0,e0==1&&(X0[0]=0))}for(X0[0]!=0&&Y.nsPsy.lastAttacks[r0]!=0&&(X0[0]=0),(Y.nsPsy.lastAttacks[r0]==3||X0[0]+X0[1]+X0[2]+X0[3]!=0)&&(xa=0,X0[1]!=0&&X0[0]!=0&&(X0[1]=0),X0[2]!=0&&X0[1]!=0&&(X0[2]=0),X0[3]!=0&&X0[2]!=0&&(X0[3]=0)),r0<2?o0[r0]=xa:xa==0&&(o0[0]=o0[1]=0),C[r0]=Y.tot_ener[r0],We=s0,Qe=W,H(b,ar,rr,Qe,r0&1,We,r0&1,N,r0,m,E),w0(Y,ar,x0,$a,er),c0(Y,$a,er,He),M0=0;M0<3;M0++){var Ea,oe;for(o(b,rr,g,d0,r0,M0),b0(Y,g,d0,r0,M0),n0=0;n0<z.SBMAX_s;n0++){if(oe=Y.thm[r0].s[n0][M0],oe*=y,X0[M0]>=2||X0[M0+1]==1){var N1=M0!=0?M0-1:2,g0=a0(Y.thm[r0].s[n0][N1],oe,K*k0);oe=Math.min(oe,g0)}if(X0[M0]==1){var N1=M0!=0?M0-1:2,g0=a0(Y.thm[r0].s[n0][N1],oe,T*k0);oe=Math.min(oe,g0)}else if(M0!=0&&X0[M0-1]==3||M0==0&&Y.nsPsy.lastAttacks[r0]==3){var N1=M0!=2?M0+1:0,g0=a0(Y.thm[r0].s[n0][N1],oe,T*k0);oe=Math.min(oe,g0)}Ea=re[M0*3+3]+re[M0*3+4]+re[M0*3+5],re[M0*3+5]*6<Ea&&(oe*=.5,re[M0*3+4]*6<Ea&&(oe*=.5)),Y.thm[r0].s[n0][M0]=oe}}for(Y.nsPsy.lastAttacks[r0]=X0[2],H0=0,u0=0;u0<Y.npart_l;u0++){for(var v1=Y.s3ind[u0][0],ya=x0[v1]*u[He[v1]],h1=Y.s3_ll[H0++]*ya;++v1<=Y.s3ind[u0][1];)ya=x0[v1]*u[He[v1]],h1=L(h1,Y.s3_ll[H0++]*ya,v1,v1-u0,Y,0);h1*=.158489319246111,Y.blocktype_old[r0&1]==z.SHORT_TYPE?d0[u0]=h1:d0[u0]=a0(Math.min(h1,Math.min(f*Y.nb_1[r0][u0],k*Y.nb_2[r0][u0])),h1,k0),Y.nb_2[r0][u0]=Y.nb_1[r0][u0],Y.nb_1[r0][u0]=h1}for(;u0<=z.CBANDS;++u0)x0[u0]=0,d0[u0]=0;t(Y,x0,d0,r0)}if((b.mode==M.STEREO||b.mode==M.JOINT_STEREO)&&b.interChRatio>0&&j(b,b.interChRatio),b.mode==M.JOINT_STEREO){var Ta;l0(Y),Ta=b.msfix,Math.abs(Ta)>0&&m0(Y,Ta,b.ATHlower*Y.ATH.adjust)}for($(b,o0,Q,P),r0=0;r0<B0;r0++){var H1,O1=0,Q1,W1;r0>1?(H1=X,O1=-2,Q1=z.NORM_TYPE,(Q[0]==z.SHORT_TYPE||Q[1]==z.SHORT_TYPE)&&(Q1=z.SHORT_TYPE),W1=A[N][r0-2]):(H1=q,O1=0,Q1=Q[r0],W1=F[N][r0]),Q1==z.SHORT_TYPE?H1[O1+r0]=S0(W1,Y.masking_lower):H1[O1+r0]=_0(W1,Y.masking_lower),b.analysis&&(Y.pinfo.pe[N][r0]=H1[O1+r0])}return 0};function p0(b,m,E,N,F,A,q,X){var C=b.internal_flags;if(N<2)c.fft_long(C,q[X],N,m,E);else if(N==2)for(var Q=z.BLKSIZE-1;Q>=0;--Q){var Y=q[X+0][Q],W=q[X+1][Q];q[X+0][Q]=(Y+W)*Ae.SQRT2*.5,q[X+1][Q]=(Y-W)*Ae.SQRT2*.5}A[0]=q[X+0][0],A[0]*=A[0];for(var Q=z.BLKSIZE/2-1;Q>=0;--Q){var s0=q[X+0][z.BLKSIZE/2-Q],x0=q[X+0][z.BLKSIZE/2+Q];A[z.BLKSIZE/2-Q]=(s0*s0+x0*x0)*.5}{for(var g=0,Q=11;Q<z.HBLKSIZE;Q++)g+=A[Q];C.tot_ener[N]=g}if(b.analysis){for(var Q=0;Q<z.HBLKSIZE;Q++)C.pinfo.energy[F][N][Q]=C.pinfo.energy_save[N][Q],C.pinfo.energy_save[N][Q]=A[Q];C.pinfo.pe[F][N]=C.pe[N]}}function F0(b,m,E,N,F,A,q,X){var C=b.internal_flags;if(F==0&&N<2&&c.fft_short(C,q[X],N,m,E),N==2)for(var Q=z.BLKSIZE_s-1;Q>=0;--Q){var Y=q[X+0][F][Q],W=q[X+1][F][Q];q[X+0][F][Q]=(Y+W)*Ae.SQRT2*.5,q[X+1][F][Q]=(Y-W)*Ae.SQRT2*.5}A[F][0]=q[X+0][F][0],A[F][0]*=A[F][0];for(var Q=z.BLKSIZE_s/2-1;Q>=0;--Q){var s0=q[X+0][F][z.BLKSIZE_s/2-Q],x0=q[X+0][F][z.BLKSIZE_s/2+Q];A[F][z.BLKSIZE_s/2-Q]=(s0*s0+x0*x0)*.5}}function V0(b,m,E,N){var F=b.internal_flags;b.athaa_loudapprox==2&&E<2&&(F.loudness_sq[m][E]=F.loudness_sq_save[E],F.loudness_sq_save[E]=S(N,F))}var O0=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];function W0(b,m,E,N,F,A,q,X,C,Q){for(var Y=Ge([2,576]),W=b.internal_flags,s0=W.channels_out,x0=b.mode==M.JOINT_STEREO?4:s0,g=0;g<s0;g++){firbuf=m[g];var d0=E+576-350-p+192;v0(O0.length==(p-1)/2);for(var P=0;P<576;P++){var o0,B0;o0=firbuf[d0+P+10],B0=0;for(var r0=0;r0<(p-1)/2-1;r0+=2)o0+=O0[r0]*(firbuf[d0+P+r0]+firbuf[d0+P+p-r0]),B0+=O0[r0+1]*(firbuf[d0+P+r0+1]+firbuf[d0+P+p-r0-1]);Y[g][P]=o0+B0}F[N][g].en.assign(W.en[g]),F[N][g].thm.assign(W.thm[g]),x0>2&&(A[N][g].en.assign(W.en[g+2]),A[N][g].thm.assign(W.thm[g+2]))}for(var g=0;g<x0;g++){var u0=j0(12),e0=j0(12),A0=[0,0,0,0],H0=Y[g&1],n0=0,M0=g==3?W.nsPsy.attackthre_s:W.nsPsy.attackthre,E0=1;if(g==2)for(var P=0,r0=576;r0>0;++P,--r0){var k0=Y[0][P],He=Y[1][P];Y[0][P]=k0+He,Y[1][P]=k0-He}for(var P=0;P<3;P++)e0[P]=W.nsPsy.last_en_subshort[g][P+6],v0(W.nsPsy.last_en_subshort[g][P+4]>0),u0[P]=e0[P]/W.nsPsy.last_en_subshort[g][P+4],A0[0]+=e0[P];for(var P=0;P<9;P++){for(var z0=n0+64,C0=1;n0<z0;n0++)C0<Math.abs(H0[n0])&&(C0=Math.abs(H0[n0]));W.nsPsy.last_en_subshort[g][P]=e0[P+3]=C0,A0[1+P/3]+=C0,C0>e0[P+3-2]?(v0(e0[P+3-2]>0),C0=C0/e0[P+3-2]):e0[P+3-2]>C0*10?(v0(C0>0),C0=e0[P+3-2]/(C0*10)):C0=0,u0[P+3]=C0}for(var P=0;P<3;++P){var le=e0[P*3+3]+e0[P*3+4]+e0[P*3+5],Oe=1;e0[P*3+5]*6<le&&(Oe*=.5,e0[P*3+4]*6<le&&(Oe*=.5)),X[g][P]=Oe}if(b.analysis){for(var Ce=u0[0],P=1;P<12;P++)Ce<u0[P]&&(Ce=u0[P]);W.pinfo.ers[N][g]=W.pinfo.ers_save[g],W.pinfo.ers_save[g]=Ce}for(var P=0;P<12;P++)C[g][P/3]==0&&u0[P]>M0&&(C[g][P/3]=P%3+1);for(var P=1;P<4;P++){var Qe=A0[P-1],We=A0[P],re=Math.max(Qe,We);re<4e4&&Qe<1.7*We&&We<1.7*Qe&&(P==1&&C[g][0]<=C[g][P]&&(C[g][0]=0),C[g][P]=0)}C[g][0]<=W.nsPsy.lastAttacks[g]&&(C[g][0]=0),(W.nsPsy.lastAttacks[g]==3||C[g][0]+C[g][1]+C[g][2]+C[g][3]!=0)&&(E0=0,C[g][1]!=0&&C[g][0]!=0&&(C[g][1]=0),C[g][2]!=0&&C[g][1]!=0&&(C[g][2]=0),C[g][3]!=0&&C[g][2]!=0&&(C[g][3]=0)),g<2?Q[g]=E0:E0==0&&(Q[0]=Q[1]=0),q[g]=W.tot_ener[g]}}function Z0(b,m,E){if(E==0)for(var N=0;N<b.npart_s;N++)b.nb_s2[m][N]=b.nb_s1[m][N],b.nb_s1[m][N]=0}function $0(b,m){for(var E=0;E<b.npart_l;E++)b.nb_2[m][E]=b.nb_1[m][E],b.nb_1[m][E]=0}function Ke(b,m,E,N){var F=u.length-1,A=0,q=E[A]+E[A+1];if(v0(q>=0),q>0){var X=m[A];X<m[A+1]&&(X=m[A+1]),v0(b.numlines_s[A]+b.numlines_s[A+1]-1>0),q=20*(X*2-q)/(q*(b.numlines_s[A]+b.numlines_s[A+1]-1));var C=0|q;C>F&&(C=F),N[A]=C}else N[A]=0;for(A=1;A<b.npart_s-1;A++)if(q=E[A-1]+E[A]+E[A+1],v0(A+1<b.npart_s),v0(q>=0),q>0){var X=m[A-1];X<m[A]&&(X=m[A]),X<m[A+1]&&(X=m[A+1]),v0(b.numlines_s[A-1]+b.numlines_s[A]+b.numlines_s[A+1]-1>0),q=20*(X*3-q)/(q*(b.numlines_s[A-1]+b.numlines_s[A]+b.numlines_s[A+1]-1));var C=0|q;C>F&&(C=F),N[A]=C}else N[A]=0;if(v0(A>0),v0(A==b.npart_s-1),q=E[A-1]+E[A],v0(q>=0),q>0){var X=m[A-1];X<m[A]&&(X=m[A]),v0(b.numlines_s[A-1]+b.numlines_s[A]-1>0),q=20*(X*2-q)/(q*(b.numlines_s[A-1]+b.numlines_s[A]-1));var C=0|q;C>F&&(C=F),N[A]=C}else N[A]=0;v0(A==b.npart_s-1)}function ne(b,m,E,N,F,A){var q=b.internal_flags,X=new float[z.CBANDS],C=j0(z.CBANDS),Q,Y,W,s0=new int[z.CBANDS];for(W=Y=0;W<q.npart_s;++W){var x0=0,g=0,d0=q.numlines_s[W];for(Q=0;Q<d0;++Q,++Y){var P=m[A][Y];x0+=P,g<P&&(g=P)}E[W]=x0,v0(x0>=0),X[W]=g,v0(d0>0),C[W]=x0/d0,v0(C[W]>=0)}for(v0(W==q.npart_s),v0(Y==129);W<z.CBANDS;++W)X[W]=0,C[W]=0;for(Ke(q,X,C,s0),Y=W=0;W<q.npart_s;W++){var o0=q.s3ind_s[W][0],B0=q.s3ind_s[W][1],r0,u0,e0,A0,H0;for(r0=s0[o0],u0=1,A0=q.s3_ss[Y]*E[o0]*u[s0[o0]],++Y,++o0;o0<=B0;)r0+=s0[o0],u0+=1,e0=q.s3_ss[Y]*E[o0]*u[s0[o0]],A0=G(A0,e0,o0-W),++Y,++o0;r0=(1+2*r0)/(2*u0),H0=u[r0]*.5,A0*=H0,N[W]=A0,q.nb_s2[F][W]=q.nb_s1[F][W],q.nb_s1[F][W]=A0,e0=X[W],e0*=q.minval_s[W],e0*=H0,N[W]>e0&&(N[W]=e0),q.masking_lower>1&&(N[W]*=q.masking_lower),N[W]>E[W]&&(N[W]=E[W]),q.masking_lower<1&&(N[W]*=q.masking_lower),v0(N[W]>=0)}for(;W<z.CBANDS;++W)E[W]=0,N[W]=0}function _e(b,m,E,N,F){var A=j0(z.CBANDS),q=j0(z.CBANDS),X=b1(z.CBANDS+2),C;w0(b,m,E,A,q),c0(b,A,q,X);var Q=0;for(C=0;C<b.npart_l;C++){var Y,W,s0,x0,g=b.s3ind[C][0],d0=b.s3ind[C][1],P=0,o0=0;for(P=X[g],o0+=1,W=b.s3_ll[Q]*E[g]*u[X[g]],++Q,++g;g<=d0;)P+=X[g],o0+=1,Y=b.s3_ll[Q]*E[g]*u[X[g]],x0=G(W,Y,g-C),W=x0,++Q,++g;if(P=(1+2*P)/(2*o0),s0=u[P]*.5,W*=s0,b.blocktype_old[F&1]==z.SHORT_TYPE){var B0=f*b.nb_1[F][C];B0>0?N[C]=Math.min(W,B0):N[C]=Math.min(W,E[C]*T)}else{var r0=k*b.nb_2[F][C],u0=f*b.nb_1[F][C],B0;r0<=0&&(r0=W),u0<=0&&(u0=W),b.blocktype_old[F&1]==z.NORM_TYPE?B0=Math.min(u0,r0):B0=u0,N[C]=Math.min(W,B0)}b.nb_2[F][C]=b.nb_1[F][C],b.nb_1[F][C]=W,Y=A[C],Y*=b.minval_l[C],Y*=s0,N[C]>Y&&(N[C]=Y),b.masking_lower>1&&(N[C]*=b.masking_lower),N[C]>E[C]&&(N[C]=E[C]),b.masking_lower<1&&(N[C]*=b.masking_lower),v0(N[C]>=0)}for(;C<z.CBANDS;++C)E[C]=0,N[C]=0}function Ze(b,m){var E=b.internal_flags;b.short_blocks==T1.short_block_coupled&&!(m[0]!=0&&m[1]!=0)&&(m[0]=m[1]=0);for(var N=0;N<E.channels_out;N++)b.short_blocks==T1.short_block_dispensed&&(m[N]=1),b.short_blocks==T1.short_block_forced&&(m[N]=0)}function o1(b,m,E){for(var N=b.internal_flags,F=0;F<N.channels_out;F++){var A=z.NORM_TYPE;m[F]!=0?(v0(N.blocktype_old[F]!=z.START_TYPE),N.blocktype_old[F]==z.SHORT_TYPE&&(A=z.STOP_TYPE)):(A=z.SHORT_TYPE,N.blocktype_old[F]==z.NORM_TYPE&&(N.blocktype_old[F]=z.START_TYPE),N.blocktype_old[F]==z.STOP_TYPE&&(N.blocktype_old[F]=z.SHORT_TYPE)),E[F]=N.blocktype_old[F],N.blocktype_old[F]=A}}function ze(b,m,E,N,F,A,q){for(var X=A*2,C=A>0?Math.pow(10,F):1,Q,Y,W=0;W<q;++W){var s0=b[2][W],x0=b[3][W],g=m[0][W],d0=m[1][W],P=m[2][W],o0=m[3][W];if(g<=1.58*d0&&d0<=1.58*g){var B0=E[W]*x0,r0=E[W]*s0;Y=Math.max(P,Math.min(o0,B0)),Q=Math.max(o0,Math.min(P,r0))}else Y=P,Q=o0;if(A>0){var u0,e0,A0=N[W]*C;if(u0=Math.min(Math.max(g,A0),Math.max(d0,A0)),P=Math.max(Y,A0),o0=Math.max(Q,A0),e0=P+o0,e0>0&&u0*X<e0){var H0=u0*X/e0;P*=H0,o0*=H0,v0(e0>0)}Y=Math.min(P,Y),Q=Math.min(o0,Q)}Y>s0&&(Y=s0),Q>x0&&(Q=x0),m[2][W]=Y,m[3][W]=Q}}this.L3psycho_anal_vbr=function(b,m,E,N,F,A,q,X,C,Q){var Y=b.internal_flags,W,s0,x0=j0(z.HBLKSIZE),g=Ge([3,z.HBLKSIZE_s]),d0=Ge([2,z.BLKSIZE]),P=Ge([2,3,z.BLKSIZE_s]),o0=Ge([4,z.CBANDS]),B0=Ge([4,z.CBANDS]),r0=Ge([4,3]),u0=.6,e0=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],A0=b1(2),H0=b.mode==M.JOINT_STEREO?4:Y.channels_out;W0(b,m,E,N,F,A,C,r0,e0,A0),Ze(b,A0);{for(var n0=0;n0<H0;n0++){var M0=n0&1;W=d0,p0(b,m,E,n0,N,x0,W,M0),V0(b,N,n0,x0),A0[M0]!=0?_e(Y,x0,o0[n0],B0[n0],n0):$0(Y,n0)}A0[0]+A0[1]==2&&b.mode==M.JOINT_STEREO&&ze(o0,B0,Y.mld_cb_l,Y.ATH.cb_l,b.ATHlower*Y.ATH.adjust,b.msfix,Y.npart_l);for(var n0=0;n0<H0;n0++){var M0=n0&1;A0[M0]!=0&&t(Y,o0[n0],B0[n0],n0)}}{for(var E0=0;E0<3;E0++){for(var n0=0;n0<H0;++n0){var M0=n0&1;A0[M0]!=0?Z0(Y,n0,E0):(s0=P,F0(b,m,E,n0,E0,g,s0,M0),ne(b,g,o0[n0],B0[n0],n0,E0))}A0[0]+A0[1]==0&&b.mode==M.JOINT_STEREO&&ze(o0,B0,Y.mld_cb_s,Y.ATH.cb_s,b.ATHlower*Y.ATH.adjust,b.msfix,Y.npart_s);for(var n0=0;n0<H0;++n0){var M0=n0&1;A0[M0]==0&&b0(Y,o0[n0],B0[n0],n0,E0)}}for(var n0=0;n0<H0;n0++){var M0=n0&1;if(A0[M0]==0)for(var k0=0;k0<z.SBMAX_s;k0++){for(var He=j0(3),E0=0;E0<3;E0++){var z0=Y.thm[n0].s[k0][E0];if(z0*=y,e0[n0][E0]>=2||e0[n0][E0+1]==1){var C0=E0!=0?E0-1:2,le=a0(Y.thm[n0].s[k0][C0],z0,K*u0);z0=Math.min(z0,le)}else if(e0[n0][E0]==1){var C0=E0!=0?E0-1:2,le=a0(Y.thm[n0].s[k0][C0],z0,T*u0);z0=Math.min(z0,le)}else if(E0!=0&&e0[n0][E0-1]==3||E0==0&&Y.nsPsy.lastAttacks[n0]==3){var C0=E0!=2?E0+1:0,le=a0(Y.thm[n0].s[k0][C0],z0,T*u0);z0=Math.min(z0,le)}z0*=r0[n0][E0],He[E0]=z0}for(var E0=0;E0<3;E0++)Y.thm[n0].s[k0][E0]=He[E0]}}}for(var n0=0;n0<H0;n0++)Y.nsPsy.lastAttacks[n0]=e0[n0][2];o1(b,A0,Q);for(var n0=0;n0<H0;n0++){var Oe,Ce,Qe,We;n0>1?(Oe=X,Ce=-2,Qe=z.NORM_TYPE,(Q[0]==z.SHORT_TYPE||Q[1]==z.SHORT_TYPE)&&(Qe=z.SHORT_TYPE),We=A[N][n0-2]):(Oe=q,Ce=0,Qe=Q[n0],We=F[N][n0]),Qe==z.SHORT_TYPE?Oe[Ce+n0]=S0(We,Y.masking_lower):Oe[Ce+n0]=_0(We,Y.masking_lower),b.analysis&&(Y.pinfo.pe[N][n0]=Oe[Ce+n0])}return 0};function ae(b,m){var E=b,N;return E>=0?N=-E*27:N=E*m,N<=-72?0:Math.exp(N*d)}function n1(b){var m=0,E=0;{var N=0,F,A;for(N=0;ae(N,b)>1e-20;N-=1);for(F=N,A=0;Math.abs(A-F)>1e-12;)N=(A+F)/2,ae(N,b)>0?A=N:F=N;m=F}{var N=0,F,A;for(N=0;ae(N,b)>1e-20;N+=1);for(F=0,A=N;Math.abs(A-F)>1e-12;)N=(A+F)/2,ae(N,b)>0?F=N:A=N;E=A}{var q=0,X=1e3,C;for(C=0;C<=X;++C){var N=m+C*(E-m)/X,Q=ae(N,b);q+=Q}{var Y=(X+1)/(q*(E-m));return Y}}}function Aa(b){var m,E,N,F;return m=b,m>=0?m*=3:m*=1.5,m>=.5&&m<=2.5?(F=m-.5,E=8*(F*F-2*F)):E=0,m+=.474,N=15.811389+7.5*m-17.5*Math.sqrt(1+m*m),N<=-60?0:(m=Math.exp((E+N)*d),m/=.6609193,m)}function _1(b){return b<0&&(b=0),b=b*.001,13*Math.atan(.76*b)+3.5*Math.atan(b*b/(7.5*7.5))}function Qa(b,m,E,N,F,A,q,X,C,Q,Y,W){var s0=j0(z.CBANDS+1),x0=X/(W>15?2*576:2*192),g=b1(z.HBLKSIZE),d0;X/=C;var P=0,o0=0;for(d0=0;d0<z.CBANDS;d0++){var B0,r0;for(B0=_1(X*P),s0[d0]=X*P,r0=P;_1(X*r0)-B0<D&&r0<=C/2;r0++);for(b[d0]=r0-P,o0=d0+1;P<r0;)v0(P<z.HBLKSIZE),g[P++]=d0;if(P>C/2){P=C/2,++d0;break}}v0(d0<z.CBANDS),s0[d0]=X*P;for(var u0=0;u0<W;u0++){var e0,A0,H0,n0,M0;H0=Q[u0],n0=Q[u0+1],e0=0|Math.floor(.5+Y*(H0-.5)),e0<0&&(e0=0),A0=0|Math.floor(.5+Y*(n0-.5)),A0>C/2&&(A0=C/2),E[u0]=(g[e0]+g[A0])/2,m[u0]=g[A0];var E0=x0*n0;q[u0]=(E0-s0[m[u0]])/(s0[m[u0]+1]-s0[m[u0]]),q[u0]<0?q[u0]=0:q[u0]>1&&(q[u0]=1),M0=_1(X*Q[u0]*Y),M0=Math.min(M0,15.5)/15.5,A[u0]=Math.pow(10,1.25*(1-Math.cos(Math.PI*M0))-2.5)}P=0;for(var k0=0;k0<o0;k0++){var He=b[k0],B0,z0;B0=_1(X*P),z0=_1(X*(P+He-1)),N[k0]=.5*(B0+z0),B0=_1(X*(P-.5)),z0=_1(X*(P+He-.5)),F[k0]=z0-B0,P+=He}return o0}function Wa(b,m,E,N,F,A){var q=Ge([z.CBANDS,z.CBANDS]),X,C=0;if(A)for(var Q=0;Q<m;Q++)for(X=0;X<m;X++){var Y=Aa(E[Q]-E[X])*N[X];q[Q][X]=Y*F[Q]}else for(X=0;X<m;X++)for(var W=15+Math.min(21/E[X],12),s0=n1(W),Q=0;Q<m;Q++){var Y=s0*ae(E[Q]-E[X],W)*N[X];q[Q][X]=Y*F[Q]}for(var Q=0;Q<m;Q++){for(X=0;X<m&&!(q[Q][X]>0);X++);for(b[Q][0]=X,X=m-1;X>0&&!(q[Q][X]>0);X--);b[Q][1]=X,C+=b[Q][1]-b[Q][0]+1}for(var x0=j0(C),g=0,Q=0;Q<m;Q++)for(X=b[Q][0];X<=b[Q][1];X++)x0[g++]=q[Q][X];return x0}function ja(b){var m=_1(b);return m=Math.min(m,15.5)/15.5,Math.pow(10,1.25*(1-Math.cos(Math.PI*m))-2.5)}this.psymodel_init=function(b){var m=b.internal_flags,E,N=!0,F=13,A=24,q=0,X=0,C=-8.25,Q=-4.5,Y=j0(z.CBANDS),W=j0(z.CBANDS),s0=j0(z.CBANDS),x0=b.out_samplerate;switch(b.experimentalZ){default:case 0:N=!0;break;case 1:N=!(b.VBR==y1.vbr_mtrh||b.VBR==y1.vbr_mt);break;case 2:N=!1;break;case 3:F=8,q=-1.75,X=-.0125,C=-8.25,Q=-2.25;break}for(m.ms_ener_ratio_old=.25,m.blocktype_old[0]=m.blocktype_old[1]=z.NORM_TYPE,E=0;E<4;++E){for(var P=0;P<z.CBANDS;++P)m.nb_1[E][P]=1e20,m.nb_2[E][P]=1e20,m.nb_s1[E][P]=m.nb_s2[E][P]=1;for(var g=0;g<z.SBMAX_l;g++)m.en[E].l[g]=1e20,m.thm[E].l[g]=1e20;for(var P=0;P<3;++P){for(var g=0;g<z.SBMAX_s;g++)m.en[E].s[g][P]=1e20,m.thm[E].s[g][P]=1e20;m.nsPsy.lastAttacks[E]=0}for(var P=0;P<9;P++)m.nsPsy.last_en_subshort[E][P]=10}for(m.loudness_sq_save[0]=m.loudness_sq_save[1]=0,m.npart_l=Qa(m.numlines_l,m.bo_l,m.bm_l,Y,W,m.mld_l,m.PSY.bo_l_weight,x0,z.BLKSIZE,m.scalefac_band.l,z.BLKSIZE/(2*576),z.SBMAX_l),v0(m.npart_l<z.CBANDS),E=0;E<m.npart_l;E++){var d0=q;Y[E]>=F&&(d0=X*(Y[E]-F)/(A-F)+q*(A-Y[E])/(A-F)),s0[E]=Math.pow(10,d0/10),m.numlines_l[E]>0?m.rnumlines_l[E]=1/m.numlines_l[E]:m.rnumlines_l[E]=0}m.s3_ll=Wa(m.s3ind,m.npart_l,Y,W,s0,N);var P=0;for(E=0;E<m.npart_l;E++){var o0;o0=zr.MAX_VALUE;for(var B0=0;B0<m.numlines_l[E];B0++,P++){var r0=x0*P/(1e3*z.BLKSIZE),u0;u0=this.ATHformula(r0*1e3,b)-20,u0=Math.pow(10,.1*u0),u0*=m.numlines_l[E],o0>u0&&(o0=u0)}m.ATH.cb_l[E]=o0,o0=-20+Y[E]*20/10,o0>6&&(o0=100),o0<-15&&(o0=-15),o0-=8,m.minval_l[E]=Math.pow(10,o0/10)*m.numlines_l[E]}for(m.npart_s=Qa(m.numlines_s,m.bo_s,m.bm_s,Y,W,m.mld_s,m.PSY.bo_s_weight,x0,z.BLKSIZE_s,m.scalefac_band.s,z.BLKSIZE_s/(2*192),z.SBMAX_s),v0(m.npart_s<z.CBANDS),P=0,E=0;E<m.npart_s;E++){var o0,d0=C;Y[E]>=F&&(d0=Q*(Y[E]-F)/(A-F)+C*(A-Y[E])/(A-F)),s0[E]=Math.pow(10,d0/10),o0=zr.MAX_VALUE;for(var B0=0;B0<m.numlines_s[E];B0++,P++){var r0=x0*P/(1e3*z.BLKSIZE_s),u0;u0=this.ATHformula(r0*1e3,b)-20,u0=Math.pow(10,.1*u0),u0*=m.numlines_s[E],o0>u0&&(o0=u0)}m.ATH.cb_s[E]=o0,o0=-7+Y[E]*7/12,Y[E]>12&&(o0*=1+Math.log(1+o0)*3.1),Y[E]<12&&(o0*=1+Math.log(1-o0)*2.3),o0<-15&&(o0=-15),o0-=8,m.minval_s[E]=Math.pow(10,o0/10)*m.numlines_s[E]}m.s3_ss=Wa(m.s3ind_s,m.npart_s,Y,W,s0,N),h(),c.init_fft(m),m.decay=Math.exp(-1*w/(J*x0/192));{var e0;e0=I,(b.exp_nspsytune&2)!=0&&(e0=1),Math.abs(b.msfix)>0&&(e0=b.msfix),b.msfix=e0;for(var A0=0;A0<m.npart_l;A0++)m.s3ind[A0][1]>m.npart_l-1&&(m.s3ind[A0][1]=m.npart_l-1)}var H0=576*m.mode_gr/x0;if(m.ATH.decay=Math.pow(10,-12/10*H0),m.ATH.adjust=.01,m.ATH.adjustLimit=1,v0(m.bo_l[z.SBMAX_l-1]<=m.npart_l),v0(m.bo_s[z.SBMAX_s-1]<=m.npart_s),b.ATHtype!=-1){var r0,n0=b.out_samplerate/z.BLKSIZE,M0=0;for(r0=0,E=0;E<z.BLKSIZE/2;++E)r0+=n0,m.ATH.eql_w[E]=1/Math.pow(10,this.ATHformula(r0,b)/10),M0+=m.ATH.eql_w[E];for(M0=1/M0,E=z.BLKSIZE/2;--E>=0;)m.ATH.eql_w[E]*=M0}{for(var A0=P=0;A0<m.npart_s;++A0)for(E=0;E<m.numlines_s[A0];++E)++P;v0(P==129);for(var A0=P=0;A0<m.npart_l;++A0)for(E=0;E<m.numlines_l[A0];++E)++P;v0(P==513)}for(P=0,E=0;E<m.npart_l;E++){var r0=x0*(P+m.numlines_l[E]/2)/(1*z.BLKSIZE);m.mld_cb_l[E]=ja(r0),P+=m.numlines_l[E]}for(;E<z.CBANDS;++E)m.mld_cb_l[E]=1;for(P=0,E=0;E<m.npart_s;E++){var r0=x0*(P+m.numlines_s[E]/2)/(1*z.BLKSIZE_s);m.mld_cb_s[E]=ja(r0),P+=m.numlines_s[E]}for(;E<z.CBANDS;++E)m.mld_cb_s[E]=1;return 0};function R1(b,m){b<-.3&&(b=3410),b/=1e3,b=Math.max(.1,b);var E=3.64*Math.pow(b,-.8)-6.8*Math.exp(-.6*Math.pow(b-3.4,2))+6*Math.exp(-.15*Math.pow(b-8.7,2))+(.6+.04*m)*.001*Math.pow(b,4);return E}this.ATHformula=function(b,m){var E;switch(m.ATHtype){case 0:E=R1(b,9);break;case 1:E=R1(b,-1);break;case 2:E=R1(b,0);break;case 3:E=R1(b,1)+6;break;case 4:E=R1(b,m.ATHcurve);break;default:E=R1(b,0);break}return E}}Qr.exports=O2});var oa=T0((qn,Wr)=>{"use strict";var C2=Y0(),la=C2.assert;function q2(){var M;this.setModules=function(c){M=c},this.ResvFrameBegin=function(c,w){var f=c.internal_flags,k,V=f.l3_side,U=M.getframebits(c);w.bits=(U-f.sideinfo_len*8)/f.mode_gr;var D=8*256*f.mode_gr-8;c.brate>320?k=8*int(c.brate*1e3/(c.out_samplerate/1152)/8+.5):(k=8*1440,c.strict_ISO&&(k=8*int(32e4/(c.out_samplerate/1152)/8+.5))),f.ResvMax=k-U,f.ResvMax>D&&(f.ResvMax=D),(f.ResvMax<0||c.disable_reservoir)&&(f.ResvMax=0);var O=w.bits*f.mode_gr+Math.min(f.ResvSize,f.ResvMax);return O>k&&(O=k),la(f.ResvMax%8==0),la(f.ResvMax>=0),V.resvDrain_pre=0,f.pinfo!=null&&(f.pinfo.mean_bits=w.bits/2,f.pinfo.resvsize=f.ResvSize),O},this.ResvMaxBits=function(c,w,f,k){var V=c.internal_flags,U,D=V.ResvSize,O=V.ResvMax;k!=0&&(D+=w),(V.substep_shaping&1)!=0&&(O*=.9),f.bits=w,D*10>O*9?(U=D-O*9/10,f.bits+=U,V.substep_shaping|=128):(U=0,V.substep_shaping&=127,!c.disable_reservoir&&(V.substep_shaping&1)==0&&(f.bits-=.1*w));var J=D<V.ResvMax*6/10?D:V.ResvMax*6/10;return J-=U,J<0&&(J=0),J},this.ResvAdjust=function(c,w){c.ResvSize-=w.part2_3_length+w.part2_length},this.ResvFrameEnd=function(c,w){var f,k=c.l3_side;c.ResvSize+=w*c.mode_gr;var V=0;k.resvDrain_post=0,k.resvDrain_pre=0,(f=c.ResvSize%8)!=0&&(V+=f),f=c.ResvSize-V-c.ResvMax,f>0&&(la(f%8==0),la(f>=0),V+=f);{var U=Math.min(k.main_data_begin*8,V)/8;k.resvDrain_pre+=8*U,V-=8*U,c.ResvSize-=8*U,k.main_data_begin-=U}k.resvDrain_post+=V,c.ResvSize-=V}}Wr.exports=q2});var ha=T0((Pn,$r)=>{"use strict";var i1=Na(),we=Y0(),jr=we.System,m1=we.VbrMode,va=we.Float,Fn=we.ShortBlock,Ca=we.Util,kn=we.Arrays,Xn=we.new_array_n,Yn=we.new_byte,Dn=we.new_double,c1=we.new_float,Gn=we.new_float_n,Jr=we.new_int,Un=we.new_int_n,s1=we.assert,ee=te(),F2=Ha(),ie=X1(),k2=_a(),X2=Y1(),Y2=oa();ke.Q_MAX=257;ke.Q_MAX2=116;ke.LARGE_BITS=1e5;ke.IXMAX_VAL=8206;function ke(){var M=D1(),c=new X2,w=new Y2,f=new k2;this.setModules=function(x,B,a){c=x,w=B,f=a};function k(x){return s1(0<=x+ke.Q_MAX2&&x<ke.Q_MAX),I[x+ke.Q_MAX2]}this.IPOW20=function(x){return s1(0<=x&&x<ke.Q_MAX),e[x]};var V=2220446049250313e-31,U=ke.IXMAX_VAL,D=U+2,O=ke.Q_MAX,J=ke.Q_MAX2,y=ke.LARGE_BITS,K=100;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var T=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=T,this.sfBandIndex=[new i1([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new i1([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new i1([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new i1([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new i1([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new i1([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new i1([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new i1([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new i1([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0/3,24/3,48/3,72/3,108/3,156/3,216/3,288/3,372/3,480/3,486/3,492/3,498/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var I=c1(O+J+1),e=c1(O),R=c1(D),p=c1(D);this.adj43=p;function d(x,B){var a=f.ATHformula(B,x);return a-=K,a=Math.pow(10,a/10+x.ATHlower),a}function n(x){for(var B=x.internal_flags.ATH.l,a=x.internal_flags.ATH.psfb21,r=x.internal_flags.ATH.s,s=x.internal_flags.ATH.psfb12,i=x.internal_flags,u=x.out_samplerate,h=0;h<ee.SBMAX_l;h++){var _=i.scalefac_band.l[h],v=i.scalefac_band.l[h+1];B[h]=va.MAX_VALUE;for(var l=_;l<v;l++){var L=l*u/1152,Z=d(x,L);B[h]=Math.min(B[h],Z)}}for(var h=0;h<ee.PSFB21;h++){var _=i.scalefac_band.psfb21[h],v=i.scalefac_band.psfb21[h+1];a[h]=va.MAX_VALUE;for(var l=_;l<v;l++){var L=l*u/1152,Z=d(x,L);a[h]=Math.min(a[h],Z)}}for(var h=0;h<ee.SBMAX_s;h++){var _=i.scalefac_band.s[h],v=i.scalefac_band.s[h+1];r[h]=va.MAX_VALUE;for(var l=_;l<v;l++){var L=l*u/384,Z=d(x,L);r[h]=Math.min(r[h],Z)}r[h]*=i.scalefac_band.s[h+1]-i.scalefac_band.s[h]}for(var h=0;h<ee.PSFB12;h++){var _=i.scalefac_band.psfb12[h],v=i.scalefac_band.psfb12[h+1];s[h]=va.MAX_VALUE;for(var l=_;l<v;l++){var L=l*u/384,Z=d(x,L);s[h]=Math.min(s[h],Z)}s[h]*=i.scalefac_band.s[13]-i.scalefac_band.s[12]}if(x.noATH){for(var h=0;h<ee.SBMAX_l;h++)B[h]=1e-20;for(var h=0;h<ee.PSFB21;h++)a[h]=1e-20;for(var h=0;h<ee.SBMAX_s;h++)r[h]=1e-20;for(var h=0;h<ee.PSFB12;h++)s[h]=1e-20}i.ATH.floor=10*Math.log10(d(x,-1))}this.iteration_init=function(x){var B=x.internal_flags,a=B.l3_side,r;if(B.iteration_init_init==0){for(B.iteration_init_init=1,a.main_data_begin=0,n(x),R[0]=0,r=1;r<D;r++)R[r]=Math.pow(r,4/3);for(r=0;r<D-1;r++)p[r]=r+1-Math.pow(.5*(R[r]+R[r+1]),.75);for(p[r]=.5,r=0;r<O;r++)e[r]=Math.pow(2,(r-210)*-.1875);for(r=0;r<=O+J;r++)I[r]=Math.pow(2,(r-210-J)*.25);c.huffman_init(B);{var s,i,u,h;for(r=x.exp_nspsytune>>2&63,r>=32&&(r-=64),s=Math.pow(10,r/4/10),r=x.exp_nspsytune>>8&63,r>=32&&(r-=64),i=Math.pow(10,r/4/10),r=x.exp_nspsytune>>14&63,r>=32&&(r-=64),u=Math.pow(10,r/4/10),r=x.exp_nspsytune>>20&63,r>=32&&(r-=64),h=u*Math.pow(10,r/4/10),r=0;r<ee.SBMAX_l;r++){var _;r<=6?_=s:r<=13?_=i:r<=20?_=u:_=h,B.nsPsy.longfact[r]=_}for(r=0;r<ee.SBMAX_s;r++){var _;r<=5?_=s:r<=10?_=i:r<=11?_=u:_=h,B.nsPsy.shortfact[r]=_}}}},this.on_pe=function(x,B,a,r,s,i){var u=x.internal_flags,h=0,_,v=Jr(2),l,L=new F2(h),Z=w.ResvMaxBits(x,r,L,i);h=L.bits;var G=h+Z;for(G>ie.MAX_BITS_PER_GRANULE&&(G=ie.MAX_BITS_PER_GRANULE),_=0,l=0;l<u.channels_out;++l)a[l]=Math.min(ie.MAX_BITS_PER_CHANNEL,h/u.channels_out),v[l]=0|a[l]*B[s][l]/700-a[l],v[l]>r*3/4&&(v[l]=r*3/4),v[l]<0&&(v[l]=0),v[l]+a[l]>ie.MAX_BITS_PER_CHANNEL&&(v[l]=Math.max(0,ie.MAX_BITS_PER_CHANNEL-a[l])),_+=v[l];if(_>Z)for(l=0;l<u.channels_out;++l)v[l]=Z*v[l]/_;for(l=0;l<u.channels_out;++l)a[l]+=v[l],Z-=v[l];for(_=0,l=0;l<u.channels_out;++l)_+=a[l];if(_>ie.MAX_BITS_PER_GRANULE){var j=0;for(l=0;l<u.channels_out;++l)a[l]*=ie.MAX_BITS_PER_GRANULE,a[l]/=_,j+=a[l];s1(j<=ie.MAX_BITS_PER_GRANULE)}return G},this.reduce_side=function(x,B,a,r){s1(r<=ie.MAX_BITS_PER_GRANULE),s1(x[0]+x[1]<=ie.MAX_BITS_PER_GRANULE);var s=.33*(.5-B)/.5;s<0&&(s=0),s>.5&&(s=.5);var i=0|s*.5*(x[0]+x[1]);i>ie.MAX_BITS_PER_CHANNEL-x[0]&&(i=ie.MAX_BITS_PER_CHANNEL-x[0]),i<0&&(i=0),x[1]>=125&&(x[1]-i>125?(x[0]<a&&(x[0]+=i),x[1]-=i):(x[0]+=x[1]-125,x[1]=125)),i=x[0]+x[1],i>r&&(x[0]=r*x[0]/i,x[1]=r*x[1]/i),s1(x[0]<=ie.MAX_BITS_PER_CHANNEL),s1(x[1]<=ie.MAX_BITS_PER_CHANNEL),s1(x[0]+x[1]<=ie.MAX_BITS_PER_GRANULE)},this.athAdjust=function(x,B,a){var r=90.30873362,s=94.82444863,i=Ca.FAST_LOG10_X(B,10),u=x*x,h=0;return i-=a,u>1e-20&&(h=1+Ca.FAST_LOG10_X(u,10/r)),h<0&&(h=0),i*=h,i+=a+r-s,Math.pow(10,.1*i)},this.calc_xmin=function(x,B,a,r){var s=0,i=x.internal_flags,u,h=0,_=0,v=i.ATH,l=a.xr,L=x.VBR==m1.vbr_mtrh?1:0,Z=i.masking_lower;for((x.VBR==m1.vbr_mtrh||x.VBR==m1.vbr_mt)&&(Z=1),u=0;u<a.psy_lmax;u++){var G,j,l0,m0,b0,t;x.VBR==m1.vbr_rh||x.VBR==m1.vbr_mtrh?j=athAdjust(v.adjust,v.l[u],v.floor):j=v.adjust*v.l[u],b0=a.width[u],l0=j/b0,m0=V,t=b0>>1,G=0;do{var o,$;o=l[h]*l[h],G+=o,m0+=o<l0?o:l0,h++,$=l[h]*l[h],G+=$,m0+=$<l0?$:l0,h++}while(--t>0);if(G>j&&_++,u==ee.SBPSY_l){var a0=j*i.nsPsy.longfact[u];m0<a0&&(m0=a0)}if(L!=0&&(j=m0),!x.ATHonly){var h0=B.en.l[u];if(h0>0){var a0;a0=G*B.thm.l[u]*Z/h0,L!=0&&(a0*=i.nsPsy.longfact[u]),j<a0&&(j=a0)}}L!=0?r[s++]=j:r[s++]=j*i.nsPsy.longfact[u]}var S0=575;if(a.block_type!=ee.SHORT_TYPE)for(var f0=576;f0--!=0&&M.EQ(l[f0],0);)S0=f0;a.max_nonzero_coeff=S0;for(var _0=a.sfb_smin;u<a.psymax;_0++,u+=3){var b0,w0,c0;for(x.VBR==m1.vbr_rh||x.VBR==m1.vbr_mtrh?c0=athAdjust(v.adjust,v.s[_0],v.floor):c0=v.adjust*v.s[_0],b0=a.width[u],w0=0;w0<3;w0++){var G=0,j,l0,m0,t=b0>>1;l0=c0/b0,m0=V;do{var o,$;o=l[h]*l[h],G+=o,m0+=o<l0?o:l0,h++,$=l[h]*l[h],G+=$,m0+=$<l0?$:l0,h++}while(--t>0);if(G>c0&&_++,_0==ee.SBPSY_s){var a0=c0*i.nsPsy.shortfact[_0];m0<a0&&(m0=a0)}if(L!=0?j=m0:j=c0,!x.ATHonly&&!x.ATHshort){var h0=B.en.s[_0][w0];if(h0>0){var a0;a0=G*B.thm.s[_0][w0]*Z/h0,L!=0&&(a0*=i.nsPsy.shortfact[_0]),j<a0&&(j=a0)}}L!=0?r[s++]=j:r[s++]=j*i.nsPsy.shortfact[_0]}x.useTemporal&&(r[s-3]>r[s-3+1]&&(r[s-3+1]+=(r[s-3]-r[s-3+1])*i.decay),r[s-3+1]>r[s-3+2]&&(r[s-3+2]+=(r[s-3+1]-r[s-3+2])*i.decay))}return _};function S(x){this.s=x}this.calc_noise_core=function(x,B,a,r){var s=0,i=B.s,u=x.l3_enc;if(i>x.count1)for(;a--!=0;){var h;h=x.xr[i],i++,s+=h*h,h=x.xr[i],i++,s+=h*h}else if(i>x.big_values){var _=c1(2);for(_[0]=0,_[1]=r;a--!=0;){var h;h=Math.abs(x.xr[i])-_[u[i]],i++,s+=h*h,h=Math.abs(x.xr[i])-_[u[i]],i++,s+=h*h}}else for(;a--!=0;){var h;h=Math.abs(x.xr[i])-R[u[i]]*r,i++,s+=h*h,h=Math.abs(x.xr[i])-R[u[i]]*r,i++,s+=h*h}return B.s=i,s},this.calc_noise=function(x,B,a,r,s){var i=0,u=0,h,_,v=0,l=0,L=0,Z=-20,G=0,j=x.scalefac,l0=0;for(r.over_SSD=0,h=0;h<x.psymax;h++){var m0=x.global_gain-(j[l0++]+(x.preflag!=0?T[h]:0)<<x.scalefac_scale+1)-x.subblock_gain[x.window[h]]*8,b0=0;if(s!=null&&s.step[h]==m0)b0=s.noise[h],G+=x.width[h],a[i++]=b0/B[u++],b0=s.noise_log[h];else{var t=k(m0);if(_=x.width[h]>>1,G+x.width[h]>x.max_nonzero_coeff){var o;o=x.max_nonzero_coeff-G+1,o>0?_=o>>1:_=0}var $=new S(G);b0=this.calc_noise_core(x,$,_,t),G=$.s,s!=null&&(s.step[h]=m0,s.noise[h]=b0),b0=a[i++]=b0/B[u++],b0=Ca.FAST_LOG10(Math.max(b0,1e-20)),s!=null&&(s.noise_log[h]=b0)}if(s!=null&&(s.global_gain=x.global_gain),L+=b0,b0>0){var a0;a0=Math.max(0|b0*10+.5,1),r.over_SSD+=a0*a0,v++,l+=b0}Z=Math.max(Z,b0)}return r.over_count=v,r.tot_noise=L,r.over_noise=l,r.max_noise=Z,v},this.set_pinfo=function(x,B,a,r,s){var i=x.internal_flags,u,h,_,v,l,L=B.scalefac_scale==0?.5:1,Z=B.scalefac,G=c1(L3Side.SFBMAX),j=c1(L3Side.SFBMAX),l0=new CalcNoiseResult;calc_xmin(x,a,B,G),calc_noise(B,G,j,l0,null);var m0=0;for(h=B.sfb_lmax,B.block_type!=ee.SHORT_TYPE&&B.mixed_block_flag==0&&(h=22),u=0;u<h;u++){var b0=i.scalefac_band.l[u],t=i.scalefac_band.l[u+1],o=t-b0;for(v=0;m0<t;m0++)v+=B.xr[m0]*B.xr[m0];v/=o,l=1e15,i.pinfo.en[r][s][u]=l*v,i.pinfo.xfsf[r][s][u]=l*G[u]*j[u]/o,a.en.l[u]>0&&!x.ATHonly?v=v/a.en.l[u]:v=0,i.pinfo.thr[r][s][u]=l*Math.max(v*a.thm.l[u],i.ATH.l[u]),i.pinfo.LAMEsfb[r][s][u]=0,B.preflag!=0&&u>=11&&(i.pinfo.LAMEsfb[r][s][u]=-L*T[u]),u<ee.SBPSY_l&&(s1(Z[u]>=0),i.pinfo.LAMEsfb[r][s][u]-=L*Z[u])}if(B.block_type==ee.SHORT_TYPE)for(h=u,u=B.sfb_smin;u<ee.SBMAX_s;u++)for(var b0=i.scalefac_band.s[u],t=i.scalefac_band.s[u+1],o=t-b0,$=0;$<3;$++){for(v=0,_=b0;_<t;_++)v+=B.xr[m0]*B.xr[m0],m0++;v=Math.max(v/o,1e-20),l=1e15,i.pinfo.en_s[r][s][3*u+$]=l*v,i.pinfo.xfsf_s[r][s][3*u+$]=l*G[h]*j[h]/o,a.en.s[u][$]>0?v=v/a.en.s[u][$]:v=0,(x.ATHonly||x.ATHshort)&&(v=0),i.pinfo.thr_s[r][s][3*u+$]=l*Math.max(v*a.thm.s[u][$],i.ATH.s[u]),i.pinfo.LAMEsfb_s[r][s][3*u+$]=-2*B.subblock_gain[$],u<ee.SBPSY_s&&(i.pinfo.LAMEsfb_s[r][s][3*u+$]-=L*Z[h]),h++}i.pinfo.LAMEqss[r][s]=B.global_gain,i.pinfo.LAMEmainbits[r][s]=B.part2_3_length+B.part2_length,i.pinfo.LAMEsfbits[r][s]=B.part2_length,i.pinfo.over[r][s]=l0.over_count,i.pinfo.max_noise[r][s]=l0.max_noise*10,i.pinfo.over_noise[r][s]=l0.over_noise*10,i.pinfo.tot_noise[r][s]=l0.tot_noise*10,i.pinfo.over_SSD[r][s]=l0.over_SSD};function H(x,B){var a=x.internal_flags;a.masking_lower=1;for(var r=0;r<a.mode_gr;r++)for(var s=0;s<a.channels_out;s++){var i=a.l3_side.tt[r][s],u=Jr(L3Side.SFBMAX);if(jr.arraycopy(i.scalefac,0,u,0,u.length),r==1){var h;for(h=0;h<i.sfb_lmax;h++)i.scalefac[h]<0&&(i.scalefac[h]=a.l3_side.tt[0][s].scalefac[h])}set_pinfo(x,i,B[r][s],r,s),jr.arraycopy(u,0,i.scalefac,0,u.length)}}}$r.exports=ke});var Y1=T0((a_,gr)=>{"use strict";var Me=Y0(),D2=Me.System,Kn=Me.VbrMode,Zn=Me.Float,zn=Me.ShortBlock,Qn=Me.Util,G2=Me.Arrays,Wn=Me.new_array_n,jn=Me.new_byte,Jn=Me.new_double,$n=Me.new_float,gn=Me.new_float_n,G1=Me.new_int,e_=Me.new_int_n,Ue=Me.assert,D0=te(),G0=aa(),U2=ra(),d1=ha();function qa(M){this.qupvt=null,this.setModules=function(a){this.qupvt=a};function c(a){this.bits=0|a}var w=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]];this.quantize_lines_xrpow=function(a,r,s,i,u,h){Ue(a>0),a=a>>1;var _=a%2;for(a=a>>1;a--!=0;){var v,l,L,Z,G,j,l0,m0;v=s[i++]*r,l=s[i++]*r,G=0|v,L=s[i++]*r,j=0|l,Z=s[i++]*r,l0=0|L,v+=this.qupvt.adj43[G],m0=0|Z,l+=this.qupvt.adj43[j],u[h++]=0|v,L+=this.qupvt.adj43[l0],u[h++]=0|l,Z+=this.qupvt.adj43[m0],u[h++]=0|L,u[h++]=0|Z}if(_!=0){var v,l,G,j;v=s[i++]*r,l=s[i++]*r,G=0|v,j=0|l,v+=this.qupvt.adj43[G],l+=this.qupvt.adj43[j],u[h++]=0|v,u[h++]=0|l}},this.quantize_lines_xrpow_01=function(a,r,s,i,u,h){var _=.5946/r;for(Ue(a>0),a=a>>1;a--!=0;)u[h++]=_>s[i++]?0:1,u[h++]=_>s[i++]?0:1},this.quantize_xrpow=function(a,r,s,i,u){var h,_,v=0,l,L=0,Z=0,G=0,j=r,l0=0,m0=j,b0=0,t=a,o=0;for(l=u!=null&&i.global_gain==u.global_gain,i.block_type==D0.SHORT_TYPE?_=38:_=21,h=0;h<=_;h++){var $=-1;if((l||i.block_type==D0.NORM_TYPE)&&($=i.global_gain-(i.scalefac[h]+(i.preflag!=0?this.qupvt.pretab[h]:0)<<i.scalefac_scale+1)-i.subblock_gain[i.window[h]]*8),Ue(i.width[h]>=0),l&&u.step[h]==$)L!=0&&(this.quantize_lines_xrpow(L,s,t,o,m0,b0),L=0),Z!=0&&(this.quantize_lines_xrpow_01(Z,s,t,o,m0,b0),Z=0);else{var a0=i.width[h];if(v+i.width[h]>i.max_nonzero_coeff){var h0;h0=i.max_nonzero_coeff-v+1,G2.fill(r,i.max_nonzero_coeff,576,0),a0=h0,a0<0&&(a0=0),h=_+1}if(L==0&&Z==0&&(m0=j,b0=l0,t=a,o=G),u!=null&&u.sfb_count1>0&&h>=u.sfb_count1&&u.step[h]>0&&$>=u.step[h]?(L!=0&&(this.quantize_lines_xrpow(L,s,t,o,m0,b0),L=0,m0=j,b0=l0,t=a,o=G),Z+=a0):(Z!=0&&(this.quantize_lines_xrpow_01(Z,s,t,o,m0,b0),Z=0,m0=j,b0=l0,t=a,o=G),L+=a0),a0<=0){Z!=0&&(this.quantize_lines_xrpow_01(Z,s,t,o,m0,b0),Z=0),L!=0&&(this.quantize_lines_xrpow(L,s,t,o,m0,b0),L=0);break}}h<=_&&(l0+=i.width[h],G+=i.width[h],v+=i.width[h])}L!=0&&(this.quantize_lines_xrpow(L,s,t,o,m0,b0),L=0),Z!=0&&(this.quantize_lines_xrpow_01(Z,s,t,o,m0,b0),Z=0)};function f(a,r,s){var i=0,u=0;do{var h=a[r++],_=a[r++];i<h&&(i=h),u<_&&(u=_)}while(r<s);return i<u&&(i=u),i}function k(a,r,s,i,u,h){var _=G0.ht[i].xlen*65536+G0.ht[u].xlen,v=0,l;do{var L=a[r++],Z=a[r++];L!=0&&(L>14&&(L=15,v+=_),L*=16),Z!=0&&(Z>14&&(Z=15,v+=_),L+=Z),v+=G0.largetbl[L]}while(r<s);return l=v&65535,v>>=16,v>l&&(v=l,i=u),h.bits+=v,i}function V(a,r,s,i){var u=0,h=G0.ht[1].hlen;do{var _=a[r+0]*2+a[r+1];r+=2,u+=h[_]}while(r<s);return i.bits+=u,1}function U(a,r,s,i,u){var h=0,_,v=G0.ht[i].xlen,l;i==2?l=G0.table23:l=G0.table56;do{var L=a[r+0]*v+a[r+1];r+=2,h+=l[L]}while(r<s);return _=h&65535,h>>=16,h>_&&(h=_,i++),u.bits+=h,i}function D(a,r,s,i,u){var h=0,_=0,v=0,l=G0.ht[i].xlen,L=G0.ht[i].hlen,Z=G0.ht[i+1].hlen,G=G0.ht[i+2].hlen;do{var j=a[r+0]*l+a[r+1];r+=2,h+=L[j],_+=Z[j],v+=G[j]}while(r<s);var l0=i;return h>_&&(h=_,l0++),h>v&&(h=v,l0=i+2),u.bits+=h,l0}var O=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];function J(a,r,s,i){var u=f(a,r,s);switch(u){case 0:return u;case 1:return V(a,r,s,i);case 2:case 3:return U(a,r,s,O[u-1],i);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return D(a,r,s,O[u-1],i);default:if(u>d1.IXMAX_VAL)return i.bits=d1.LARGE_BITS,-1;u-=15;var h;for(h=24;h<32&&!(G0.ht[h].linmax>=u);h++);var _;for(_=h-8;_<24&&!(G0.ht[_].linmax>=u);_++);return k(a,r,s,_,h,i)}}this.noquant_count_bits=function(a,r,s){var i=r.l3_enc,u=Math.min(576,r.max_nonzero_coeff+2>>1<<1);for(s!=null&&(s.sfb_count1=0);u>1&&(i[u-1]|i[u-2])==0;u-=2);r.count1=u;for(var h=0,_=0;u>3;u-=4){var v;if(((i[u-1]|i[u-2]|i[u-3]|i[u-4])&2147483647)>1)break;v=((i[u-4]*2+i[u-3])*2+i[u-2])*2+i[u-1],h+=G0.t32l[v],_+=G0.t33l[v]}var l=h;if(r.count1table_select=0,h>_&&(l=_,r.count1table_select=1),r.count1bits=l,r.big_values=u,u==0)return l;if(r.block_type==D0.SHORT_TYPE)h=3*a.scalefac_band.s[3],h>r.big_values&&(h=r.big_values),_=r.big_values;else if(r.block_type==D0.NORM_TYPE){if(Ue(u<=576),h=r.region0_count=a.bv_scf[u-2],_=r.region1_count=a.bv_scf[u-1],Ue(h+_+2<D0.SBPSY_l),_=a.scalefac_band.l[h+_+2],h=a.scalefac_band.l[h+1],_<u){var L=new c(l);r.table_select[2]=J(i,_,u,L),l=L.bits}}else r.region0_count=7,r.region1_count=D0.SBMAX_l-1-7-1,h=a.scalefac_band.l[8],_=u,h>_&&(h=_);if(h=Math.min(h,u),_=Math.min(_,u),Ue(h>=0),Ue(_>=0),0<h){var L=new c(l);r.table_select[0]=J(i,0,h,L),l=L.bits}if(h<_){var L=new c(l);r.table_select[1]=J(i,h,_,L),l=L.bits}if(a.use_best_huffman==2&&(r.part2_3_length=l,best_huffman_divide(a,r),l=r.part2_3_length),s!=null&&r.block_type==D0.NORM_TYPE){for(var Z=0;a.scalefac_band.l[Z]<r.big_values;)Z++;s.sfb_count1=Z}return l},this.count_bits=function(a,r,s,i){var u=s.l3_enc,h=d1.IXMAX_VAL/this.qupvt.IPOW20(s.global_gain);if(s.xrpow_max>h)return d1.LARGE_BITS;if(this.quantize_xrpow(r,u,this.qupvt.IPOW20(s.global_gain),s,i),(a.substep_shaping&2)!=0)for(var _=0,v=s.global_gain+s.scalefac_scale,l=.634521682242439/this.qupvt.IPOW20(v),L=0;L<s.sfbmax;L++){var Z=s.width[L];if(Ue(Z>=0),a.pseudohalf[L]==0)_+=Z;else{var G;for(G=_,_+=Z;G<_;++G)u[G]=r[G]>=l?u[G]:0}}return this.noquant_count_bits(a,s,i)};function y(a,r,s,i,u,h,_){for(var v=r.big_values,l=0;l<=22;l++)i[l]=d1.LARGE_BITS;for(var l=0;l<16;l++){var L=a.scalefac_band.l[l+1];if(L>=v)break;var Z=0,G=new c(Z),j=J(s,0,L,G);Z=G.bits;for(var l0=0;l0<8;l0++){var m0=a.scalefac_band.l[l+l0+2];if(m0>=v)break;var b0=Z;G=new c(b0);var t=J(s,L,m0,G);b0=G.bits,i[l+l0]>b0&&(i[l+l0]=b0,u[l+l0]=l,h[l+l0]=j,_[l+l0]=t)}}}function K(a,r,s,i,u,h,_,v){for(var l=r.big_values,L=2;L<D0.SBMAX_l+1;L++){var Z=a.scalefac_band.l[L];if(Z>=l)break;var G=u[L-2]+r.count1bits;if(s.part2_3_length<=G)break;var j=new c(G),l0=J(i,Z,l,j);G=j.bits,!(s.part2_3_length<=G)&&(s.assign(r),s.part2_3_length=G,s.region0_count=h[L-2],s.region1_count=L-2-h[L-2],s.table_select[0]=_[L-2],s.table_select[1]=v[L-2],s.table_select[2]=l0)}}this.best_huffman_divide=function(a,r){var s=new U2,i=r.l3_enc,u=G1(23),h=G1(23),_=G1(23),v=G1(23);if(!(r.block_type==D0.SHORT_TYPE&&a.mode_gr==1)){s.assign(r),r.block_type==D0.NORM_TYPE&&(y(a,r,i,u,h,_,v),K(a,s,r,i,u,h,_,v));var l=s.big_values;if(!(l==0||(i[l-2]|i[l-1])>1)&&(l=r.count1+2,!(l>576))){s.assign(r),s.count1=l;var L=0,Z=0;for(Ue(l<=576);l>s.big_values;l-=4){var G=((i[l-4]*2+i[l-3])*2+i[l-2])*2+i[l-1];L+=G0.t32l[G],Z+=G0.t33l[G]}if(s.big_values=l,s.count1table_select=0,L>Z&&(L=Z,s.count1table_select=1),s.count1bits=L,s.block_type==D0.NORM_TYPE)K(a,s,r,i,u,h,_,v);else{if(s.part2_3_length=L,L=a.scalefac_band.l[8],L>l&&(L=l),L>0){var j=new c(s.part2_3_length);s.table_select[0]=J(i,0,L,j),s.part2_3_length=j.bits}if(l>L){var j=new c(s.part2_3_length);s.table_select[1]=J(i,L,l,j),s.part2_3_length=j.bits}r.part2_3_length>s.part2_3_length&&r.assign(s)}}}};var T=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],I=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],e=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],R=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];qa.slen1_tab=e,qa.slen2_tab=R;function p(a,r){for(var s,i=r.tt[1][a],u=r.tt[0][a],h=0;h<G0.scfsi_band.length-1;h++){for(s=G0.scfsi_band[h];s<G0.scfsi_band[h+1]&&!(u.scalefac[s]!=i.scalefac[s]&&i.scalefac[s]>=0);s++);if(s==G0.scfsi_band[h+1]){for(s=G0.scfsi_band[h];s<G0.scfsi_band[h+1];s++)i.scalefac[s]=-1;r.scfsi[a][h]=1}}var _=0,v=0;for(s=0;s<11;s++)i.scalefac[s]!=-1&&(v++,_<i.scalefac[s]&&(_=i.scalefac[s]));for(var l=0,L=0;s<D0.SBPSY_l;s++)i.scalefac[s]!=-1&&(L++,l<i.scalefac[s]&&(l=i.scalefac[s]));for(var h=0;h<16;h++)if(_<T[h]&&l<I[h]){var Z=e[h]*v+R[h]*L;i.part2_length>Z&&(i.part2_length=Z,i.scalefac_compress=h)}}this.best_scalefac_store=function(a,r,s,i){var u=i.tt[r][s],h,_,v,l,L=0;for(v=0,h=0;h<u.sfbmax;h++){var Z=u.width[h];for(Ue(Z>=0),v+=Z,l=-Z;l<0&&u.l3_enc[l+v]==0;l++);l==0&&(u.scalefac[h]=L=-2)}if(u.scalefac_scale==0&&u.preflag==0){var G=0;for(h=0;h<u.sfbmax;h++)u.scalefac[h]>0&&(G|=u.scalefac[h]);if((G&1)==0&&G!=0){for(h=0;h<u.sfbmax;h++)u.scalefac[h]>0&&(u.scalefac[h]>>=1);u.scalefac_scale=L=1}}if(u.preflag==0&&u.block_type!=D0.SHORT_TYPE&&a.mode_gr==2){for(h=11;h<D0.SBPSY_l&&!(u.scalefac[h]<this.qupvt.pretab[h]&&u.scalefac[h]!=-2);h++);if(h==D0.SBPSY_l){for(h=11;h<D0.SBPSY_l;h++)u.scalefac[h]>0&&(u.scalefac[h]-=this.qupvt.pretab[h]);u.preflag=L=1}}for(_=0;_<4;_++)i.scfsi[s][_]=0;for(a.mode_gr==2&&r==1&&i.tt[0][s].block_type!=D0.SHORT_TYPE&&i.tt[1][s].block_type!=D0.SHORT_TYPE&&(p(s,i),L=0),h=0;h<u.sfbmax;h++)u.scalefac[h]==-2&&(u.scalefac[h]=0);L!=0&&(a.mode_gr==2?this.scale_bitcount(u):this.scale_bitcount_lsf(a,u))};function d(a,r){for(var s=0;s<r;++s)if(a[s]<0)return!1;return!0}var n=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],S=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],H=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(a){var r,s,i=0,u=0,h,_=a.scalefac;if(Ue(d(_,a.sfbmax)),a.block_type==D0.SHORT_TYPE)h=n,a.mixed_block_flag!=0&&(h=S);else if(h=H,a.preflag==0){for(s=11;s<D0.SBPSY_l&&!(_[s]<this.qupvt.pretab[s]);s++);if(s==D0.SBPSY_l)for(a.preflag=1,s=11;s<D0.SBPSY_l;s++)_[s]-=this.qupvt.pretab[s]}for(s=0;s<a.sfbdivide;s++)i<_[s]&&(i=_[s]);for(;s<a.sfbmax;s++)u<_[s]&&(u=_[s]);for(a.part2_length=d1.LARGE_BITS,r=0;r<16;r++)i<T[r]&&u<I[r]&&a.part2_length>h[r]&&(a.part2_length=h[r],a.scalefac_compress=r);return a.part2_length==d1.LARGE_BITS};var x=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(a,r){var s,i,u,h,_,v,l,L,Z=G1(4),G=r.scalefac;for(r.preflag!=0?s=2:s=0,l=0;l<4;l++)Z[l]=0;if(r.block_type==D0.SHORT_TYPE){i=1;var j=this.qupvt.nr_of_sfb_block[s][i];for(L=0,u=0;u<4;u++)for(h=j[u]/3,l=0;l<h;l++,L++)for(_=0;_<3;_++)G[L*3+_]>Z[u]&&(Z[u]=G[L*3+_])}else{i=0;var j=this.qupvt.nr_of_sfb_block[s][i];for(L=0,u=0;u<4;u++)for(h=j[u],l=0;l<h;l++,L++)G[L]>Z[u]&&(Z[u]=G[L])}for(v=!1,u=0;u<4;u++)Z[u]>x[s][u]&&(v=!0);if(!v){var l0,m0,b0,t;for(r.sfb_partition_table=this.qupvt.nr_of_sfb_block[s][i],u=0;u<4;u++)r.slen[u]=B[Z[u]];switch(l0=r.slen[0],m0=r.slen[1],b0=r.slen[2],t=r.slen[3],s){case 0:r.scalefac_compress=(l0*5+m0<<4)+(b0<<2)+t;break;case 1:r.scalefac_compress=400+(l0*5+m0<<2)+b0;break;case 2:r.scalefac_compress=500+l0*3+m0;break;default:D2.err.printf(`intensity stereo not implemented yet
`);break}}if(!v)for(Ue(r.sfb_partition_table!=null),r.part2_length=0,u=0;u<4;u++)r.part2_length+=r.slen[u]*r.sfb_partition_table[u];return v};var B=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(a){for(var r=2;r<=576;r+=2){for(var s=0,i;a.scalefac_band.l[++s]<r;);for(i=w[s][0];a.scalefac_band.l[i+1]>r;)i--;for(i<0&&(i=w[s][0]),a.bv_scf[r-2]=i,i=w[s][1];a.scalefac_band.l[i+a.bv_scf[r-2]+2]>r;)i--;i<0&&(i=w[s][1]),a.bv_scf[r-1]=i}}}gr.exports=qa});var at=T0((r_,et)=>{"use strict";var P2=q1();function K2(){this.class_id=0,this.num_samples=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.scale=0,this.scale_left=0,this.scale_right=0,this.analysis=!1,this.bWriteVbrTag=!1,this.decode_only=!1,this.quality=0,this.mode=P2.STEREO,this.force_ms=!1,this.free_format=!1,this.findReplayGain=!1,this.decode_on_the_fly=!1,this.write_id3tag_automatic=!1,this.brate=0,this.compression_ratio=0,this.copyright=0,this.original=0,this.extension=0,this.emphasis=0,this.error_protection=0,this.strict_ISO=!1,this.disable_reservoir=!1,this.quant_comp=0,this.quant_comp_short=0,this.experimentalY=!1,this.experimentalZ=0,this.exp_nspsytune=0,this.preset=0,this.VBR=null,this.VBR_q_frac=0,this.VBR_q=0,this.VBR_mean_bitrate_kbps=0,this.VBR_min_bitrate_kbps=0,this.VBR_max_bitrate_kbps=0,this.VBR_hard_min=0,this.lowpassfreq=0,this.highpassfreq=0,this.lowpasswidth=0,this.highpasswidth=0,this.maskingadjust=0,this.maskingadjust_short=0,this.ATHonly=!1,this.ATHshort=!1,this.noATH=!1,this.ATHtype=0,this.ATHcurve=0,this.ATHlower=0,this.athaa_type=0,this.athaa_loudapprox=0,this.athaa_sensitivity=0,this.short_blocks=null,this.useTemporal=!1,this.interChRatio=0,this.msfix=0,this.tune=!1,this.tune_value_a=0,this.version=0,this.encoder_delay=0,this.encoder_padding=0,this.framesize=0,this.frameNum=0,this.lame_allocated_gfp=0,this.internal_flags=null}et.exports=K2});var tt=T0((c_,rt)=>{"use strict";var Re=Y0(),t_=Re.System,i_=Re.VbrMode,s_=Re.Float,n_=Re.ShortBlock,__=Re.Util,l_=Re.Arrays,o_=Re.new_array_n,v_=Re.new_byte,h_=Re.new_double,S1=Re.new_float,u_=Re.new_float_n,f_=Re.new_int,b_=Re.new_int_n,m_=Re.assert,A1=te();function Z2(){this.useAdjust=0,this.aaSensitivityP=0,this.adjust=0,this.adjustLimit=0,this.decay=0,this.floor=0,this.l=S1(A1.SBMAX_l),this.s=S1(A1.SBMAX_s),this.psfb21=S1(A1.PSFB21),this.psfb12=S1(A1.PSFB12),this.cb_l=S1(A1.CBANDS),this.cb_s=S1(A1.CBANDS),this.eql_w=S1(A1.BLKSIZE/2)}rt.exports=Z2});var ua=T0((I_,st)=>{"use strict";var Ee=Y0(),Be=Ee.System,d_=Ee.VbrMode,S_=Ee.Float,A_=Ee.ShortBlock,x_=Ee.Util,it=Ee.Arrays,w_=Ee.new_array_n,M_=Ee.new_byte,R_=Ee.new_double,B_=Ee.new_float,E_=Ee.new_float_n,y_=Ee.new_int,T_=Ee.new_int_n,p_=Ee.assert;q0.STEPS_per_dB=100;q0.MAX_dB=120;q0.GAIN_NOT_ENOUGH_SAMPLES=-24601;q0.GAIN_ANALYSIS_ERROR=0;q0.GAIN_ANALYSIS_OK=1;q0.INIT_GAIN_ANALYSIS_ERROR=0;q0.INIT_GAIN_ANALYSIS_OK=1;q0.YULE_ORDER=10;q0.MAX_ORDER=q0.YULE_ORDER;q0.MAX_SAMP_FREQ=48e3;q0.RMS_WINDOW_TIME_NUMERATOR=1;q0.RMS_WINDOW_TIME_DENOMINATOR=20;q0.MAX_SAMPLES_PER_WINDOW=q0.MAX_SAMP_FREQ*q0.RMS_WINDOW_TIME_NUMERATOR/q0.RMS_WINDOW_TIME_DENOMINATOR+1;function q0(){var M=64.82,c=q0.YULE_ORDER,w=.95,f=q0.MAX_SAMP_FREQ,k=q0.RMS_WINDOW_TIME_NUMERATOR,V=q0.RMS_WINDOW_TIME_DENOMINATOR,U=q0.MAX_SAMPLES_PER_WINDOW,D=[[.038575994352,-3.84664617118067,-.02160367184185,7.81501653005538,-.00123395316851,-11.34170355132042,-9291677959e-14,13.05504219327545,-.01655260341619,-12.28759895145294,.02161526843274,9.4829380631979,-.02074045215285,-5.87257861775999,.00594298065125,2.75465861874613,.00306428023191,-.86984376593551,.00012025322027,.13919314567432,.00288463683916],[.0541865640643,-3.47845948550071,-.02911007808948,6.36317777566148,-.00848709379851,-8.54751527471874,-.00851165645469,9.4769360780128,-.00834990904936,-8.81498681370155,.02245293253339,6.85401540936998,-.02596338512915,-4.39470996079559,.01624864962975,2.19611684890774,-.00240879051584,-.75104302451432,.00674613682247,.13149317958808,-.00187763777362],[.15457299681924,-2.37898834973084,-.09331049056315,2.84868151156327,-.06247880153653,-2.64577170229825,.02163541888798,2.23697657451713,-.05588393329856,-1.67148153367602,.04781476674921,1.00595954808547,.00222312597743,-.45953458054983,.03174092540049,.16378164858596,-.01390589421898,-.05032077717131,.00651420667831,.0234789740702,-.00881362733839],[.30296907319327,-1.61273165137247,-.22613988682123,1.0797749225997,-.08587323730772,-.2565625775407,.03282930172664,-.1627671912044,-.00915702933434,-.22638893773906,-.02364141202522,.39120800788284,-.00584456039913,-.22138138954925,.06276101321749,.04500235387352,-828086748e-14,.02005851806501,.00205861885564,.00302439095741,-.02950134983287],[.33642304856132,-1.49858979367799,-.2557224142557,.87350271418188,-.11828570177555,.12205022308084,.11921148675203,-.80774944671438,-.07834489609479,.47854794562326,-.0046997791438,-.12453458140019,-.0058950022444,-.04067510197014,.05724228140351,.08333755284107,.00832043980773,-.04237348025746,-.0163538138454,.02977207319925,-.0176017656815],[.4491525660845,-.62820619233671,-.14351757464547,.29661783706366,-.22784394429749,-.372563729424,-.01419140100551,.00213767857124,.04078262797139,-.42029820170918,-.12398163381748,.22199650564824,.04097565135648,.00613424350682,.10478503600251,.06747620744683,-.01863887810927,.05784820375801,-.03193428438915,.03222754072173,.00541907748707],[.56619470757641,-1.04800335126349,-.75464456939302,.29156311971249,.1624213774223,-.26806001042947,.16744243493672,.00819999645858,-.18901604199609,.45054734505008,.3093178284183,-.33032403314006,-.27562961986224,.0673936833311,.00647310677246,-.04784254229033,.08647503780351,.01639907836189,-.0378898455484,.01807364323573,-.00588215443421],[.58100494960553,-.51035327095184,-.53174909058578,-.31863563325245,-.14289799034253,-.20256413484477,.17520704835522,.1472815413433,.02377945217615,.38952639978999,.15558449135573,-.23313271880868,-.25344790059353,-.05246019024463,.01628462406333,-.02505961724053,.06920467763959,.02442357316099,-.03721611395801,.01818801111503,-.00749618797172],[.53648789255105,-.2504987195602,-.42163034350696,-.43193942311114,-.00275953611929,-.03424681017675,.04267842219415,-.04678328784242,-.10214864179676,.26408300200955,.14590772289388,.15113130533216,-.02459864859345,-.17556493366449,-.11202315195388,-.18823009262115,-.04060034127,.05477720428674,.0478866554818,.0470440968812,-.02217936801134]],O=[[.98621192462708,-1.97223372919527,-1.97242384925416,.97261396931306,.98621192462708],[.98500175787242,-1.96977855582618,-1.97000351574484,.9702284756635,.98500175787242],[.97938932735214,-1.95835380975398,-1.95877865470428,.95920349965459,.97938932735214],[.97531843204928,-1.95002759149878,-1.95063686409857,.95124613669835,.97531843204928],[.97316523498161,-1.94561023566527,-1.94633046996323,.94705070426118,.97316523498161],[.96454515552826,-1.92783286977036,-1.92909031105652,.93034775234268,.96454515552826],[.96009142950541,-1.91858953033784,-1.92018285901082,.92177618768381,.96009142950541],[.95856916599601,-1.9154210807478,-1.91713833199203,.91885558323625,.95856916599601],[.94597685600279,-1.88903307939452,-1.89195371200558,.89487434461664,.94597685600279]];function J(e,R,p,d,n,S){for(;n--!=0;)p[d]=1e-10+e[R+0]*S[0]-p[d-1]*S[1]+e[R-1]*S[2]-p[d-2]*S[3]+e[R-2]*S[4]-p[d-3]*S[5]+e[R-3]*S[6]-p[d-4]*S[7]+e[R-4]*S[8]-p[d-5]*S[9]+e[R-5]*S[10]-p[d-6]*S[11]+e[R-6]*S[12]-p[d-7]*S[13]+e[R-7]*S[14]-p[d-8]*S[15]+e[R-8]*S[16]-p[d-9]*S[17]+e[R-9]*S[18]-p[d-10]*S[19]+e[R-10]*S[20],++d,++R}function y(e,R,p,d,n,S){for(;n--!=0;)p[d]=e[R+0]*S[0]-p[d-1]*S[1]+e[R-1]*S[2]-p[d-2]*S[3]+e[R-2]*S[4],++d,++R}function K(e,R){for(var p=0;p<MAX_ORDER;p++)e.linprebuf[p]=e.lstepbuf[p]=e.loutbuf[p]=e.rinprebuf[p]=e.rstepbuf[p]=e.routbuf[p]=0;switch(0|R){case 48e3:e.reqindex=0;break;case 44100:e.reqindex=1;break;case 32e3:e.reqindex=2;break;case 24e3:e.reqindex=3;break;case 22050:e.reqindex=4;break;case 16e3:e.reqindex=5;break;case 12e3:e.reqindex=6;break;case 11025:e.reqindex=7;break;case 8e3:e.reqindex=8;break;default:return INIT_GAIN_ANALYSIS_ERROR}return e.sampleWindow=0|(R*k+V-1)/V,e.lsum=0,e.rsum=0,e.totsamp=0,it.ill(e.A,0),INIT_GAIN_ANALYSIS_OK}this.InitGainAnalysis=function(e,R){return K(e,R)!=INIT_GAIN_ANALYSIS_OK?INIT_GAIN_ANALYSIS_ERROR:(e.linpre=MAX_ORDER,e.rinpre=MAX_ORDER,e.lstep=MAX_ORDER,e.rstep=MAX_ORDER,e.lout=MAX_ORDER,e.rout=MAX_ORDER,it.fill(e.B,0),INIT_GAIN_ANALYSIS_OK)};function T(e){return e*e}this.AnalyzeSamples=function(e,R,p,d,n,S,H){var x,B,a,r,s,i,u;if(S==0)return GAIN_ANALYSIS_OK;switch(u=0,s=S,H){case 1:d=R,n=p;break;case 2:break;default:return GAIN_ANALYSIS_ERROR}for(S<MAX_ORDER?(Be.arraycopy(R,p,e.linprebuf,MAX_ORDER,S),Be.arraycopy(d,n,e.rinprebuf,MAX_ORDER,S)):(Be.arraycopy(R,p,e.linprebuf,MAX_ORDER,MAX_ORDER),Be.arraycopy(d,n,e.rinprebuf,MAX_ORDER,MAX_ORDER));s>0;){i=s>e.sampleWindow-e.totsamp?e.sampleWindow-e.totsamp:s,u<MAX_ORDER?(x=e.linpre+u,B=e.linprebuf,a=e.rinpre+u,r=e.rinprebuf,i>MAX_ORDER-u&&(i=MAX_ORDER-u)):(x=p+u,B=R,a=n+u,r=d),J(B,x,e.lstepbuf,e.lstep+e.totsamp,i,D[e.reqindex]),J(r,a,e.rstepbuf,e.rstep+e.totsamp,i,D[e.reqindex]),y(e.lstepbuf,e.lstep+e.totsamp,e.loutbuf,e.lout+e.totsamp,i,O[e.reqindex]),y(e.rstepbuf,e.rstep+e.totsamp,e.routbuf,e.rout+e.totsamp,i,O[e.reqindex]),x=e.lout+e.totsamp,B=e.loutbuf,a=e.rout+e.totsamp,r=e.routbuf;for(var h=i%8;h--!=0;)e.lsum+=T(B[x++]),e.rsum+=T(r[a++]);for(h=i/8;h--!=0;)e.lsum+=T(B[x+0])+T(B[x+1])+T(B[x+2])+T(B[x+3])+T(B[x+4])+T(B[x+5])+T(B[x+6])+T(B[x+7]),x+=8,e.rsum+=T(r[a+0])+T(r[a+1])+T(r[a+2])+T(r[a+3])+T(r[a+4])+T(r[a+5])+T(r[a+6])+T(r[a+7]),a+=8;if(s-=i,u+=i,e.totsamp+=i,e.totsamp==e.sampleWindow){var _=q0.STEPS_per_dB*10*Math.log10((e.lsum+e.rsum)/e.totsamp*.5+1e-37),v=_<=0?0:0|_;v>=e.A.length&&(v=e.A.length-1),e.A[v]++,e.lsum=e.rsum=0,Be.arraycopy(e.loutbuf,e.totsamp,e.loutbuf,0,MAX_ORDER),Be.arraycopy(e.routbuf,e.totsamp,e.routbuf,0,MAX_ORDER),Be.arraycopy(e.lstepbuf,e.totsamp,e.lstepbuf,0,MAX_ORDER),Be.arraycopy(e.rstepbuf,e.totsamp,e.rstepbuf,0,MAX_ORDER),e.totsamp=0}if(e.totsamp>e.sampleWindow)return GAIN_ANALYSIS_ERROR}return S<MAX_ORDER?(Be.arraycopy(e.linprebuf,S,e.linprebuf,0,MAX_ORDER-S),Be.arraycopy(e.rinprebuf,S,e.rinprebuf,0,MAX_ORDER-S),Be.arraycopy(R,p,e.linprebuf,MAX_ORDER-S,S),Be.arraycopy(d,n,e.rinprebuf,MAX_ORDER-S,S)):(Be.arraycopy(R,p+S-MAX_ORDER,e.linprebuf,0,MAX_ORDER),Be.arraycopy(d,n+S-MAX_ORDER,e.rinprebuf,0,MAX_ORDER)),GAIN_ANALYSIS_OK};function I(e,R){var p,d=0;for(p=0;p<R;p++)d+=e[p];if(d==0)return GAIN_NOT_ENOUGH_SAMPLES;var n=0|Math.ceil(d*(1-w));for(p=R;p-- >0&&!((n-=e[p])<=0););return M-p/q0.STEPS_per_dB}this.GetTitleGain=function(e){for(var R=I(e.A,e.A.length),p=0;p<e.A.length;p++)e.B[p]+=e.A[p],e.A[p]=0;for(var p=0;p<MAX_ORDER;p++)e.linprebuf[p]=e.lstepbuf[p]=e.loutbuf[p]=e.rinprebuf[p]=e.rstepbuf[p]=e.routbuf[p]=0;return e.totsamp=0,e.lsum=e.rsum=0,R}}st.exports=q0});var lt=T0((G_,_t)=>{"use strict";var Te=Y0(),L_=Te.System,V_=Te.VbrMode,N_=Te.Float,H_=Te.ShortBlock,O_=Te.Util,C_=Te.Arrays,q_=Te.new_array_n,F_=Te.new_byte,k_=Te.new_double,p1=Te.new_float,X_=Te.new_float_n,nt=Te.new_int,Y_=Te.new_int_n,D_=Te.assert,ye=ua();function z2(){this.linprebuf=p1(ye.MAX_ORDER*2),this.linpre=0,this.lstepbuf=p1(ye.MAX_SAMPLES_PER_WINDOW+ye.MAX_ORDER),this.lstep=0,this.loutbuf=p1(ye.MAX_SAMPLES_PER_WINDOW+ye.MAX_ORDER),this.lout=0,this.rinprebuf=p1(ye.MAX_ORDER*2),this.rinpre=0,this.rstepbuf=p1(ye.MAX_SAMPLES_PER_WINDOW+ye.MAX_ORDER),this.rstep=0,this.routbuf=p1(ye.MAX_SAMPLES_PER_WINDOW+ye.MAX_ORDER),this.rout=0,this.sampleWindow=0,this.totsamp=0,this.lsum=0,this.rsum=0,this.freqindex=0,this.first=0,this.A=nt(0|ye.STEPS_per_dB*ye.MAX_dB),this.B=nt(0|ye.STEPS_per_dB*ye.MAX_dB)}_t.exports=z2});var ft=T0((e3,ut)=>{"use strict";var pe=Y0(),U_=pe.System,P_=pe.VbrMode,K_=pe.Float,Z_=pe.ShortBlock,z_=pe.Util,Q_=pe.Arrays,W_=pe.new_array_n,j_=pe.new_byte,J_=pe.new_double,ot=pe.new_float,$_=pe.new_float_n,Q2=pe.new_int,g_=pe.new_int_n,vt=pe.assert,W2=Ha(),ht=te(),j2=k1(),J2=X1();function $2(M){var c=M;this.quantize=c,this.iteration_loop=function(w,f,k,V){var U=w.internal_flags,D=ot(j2.SFBMAX),O=ot(576),J=Q2(2),y=0,K,T=U.l3_side,I=new W2(y);this.quantize.rv.ResvFrameBegin(w,I),y=I.bits;for(var e=0;e<U.mode_gr;e++){K=this.quantize.qupvt.on_pe(w,f,J,y,e,e),U.mode_ext==ht.MPG_MD_MS_LR&&(this.quantize.ms_convert(U.l3_side,e),this.quantize.qupvt.reduce_side(J,k[e],y,K));for(var R=0;R<U.channels_out;R++){var p,d,n=T.tt[e][R];n.block_type!=ht.SHORT_TYPE?(p=0,d=U.PSY.mask_adjust-p):(p=0,d=U.PSY.mask_adjust_short-p),U.masking_lower=Math.pow(10,d*.1),this.quantize.init_outer_loop(U,n),this.quantize.init_xrpow(U,n,O)&&(this.quantize.qupvt.calc_xmin(w,V[e][R],n,D),this.quantize.outer_loop(w,n,D,O,R,J[R])),this.quantize.iteration_finish_one(U,e,R),vt(n.part2_3_length<=J2.MAX_BITS_PER_CHANNEL),vt(n.part2_3_length<=J[R])}}this.quantize.rv.ResvFrameEnd(U,y)}}ut.exports=$2});var fa=T0((b3,bt)=>{"use strict";var Ie=Y0(),a3=Ie.System,ge=Ie.VbrMode,r3=Ie.Float,t3=Ie.ShortBlock,i3=Ie.Util,s3=Ie.Arrays,n3=Ie.new_array_n,_3=Ie.new_byte,l3=Ie.new_double,o3=Ie.new_float,v3=Ie.new_float_n,h3=Ie.new_int,u3=Ie.new_int_n,f3=Ie.assert;function g2(){var M=U1();function c(y,K,T,I,e,R,p,d,n,S,H,x,B,a,r){this.vbr_q=y,this.quant_comp=K,this.quant_comp_s=T,this.expY=I,this.st_lrm=e,this.st_s=R,this.masking_adj=p,this.masking_adj_short=d,this.ath_lower=n,this.ath_curve=S,this.ath_sensitivity=H,this.interch=x,this.safejoint=B,this.sfb21mod=a,this.msfix=r}function w(y,K,T,I,e,R,p,d,n,S,H,x,B,a){this.quant_comp=K,this.quant_comp_s=T,this.safejoint=I,this.nsmsfix=e,this.st_lrm=R,this.st_s=p,this.nsbass=d,this.scale=n,this.masking_adj=S,this.ath_lower=H,this.ath_curve=x,this.interch=B,this.sfscale=a}var f;this.setModules=function(y){f=y};var k=[new c(0,9,9,0,5.2,125,-4.2,-6.3,4.8,1,0,0,2,21,.97),new c(1,9,9,0,5.3,125,-3.6,-5.6,4.5,1.5,0,0,2,21,1.35),new c(2,9,9,0,5.6,125,-2.2,-3.5,2.8,2,0,0,2,21,1.49),new c(3,9,9,1,5.8,130,-1.8,-2.8,2.6,3,-4,0,2,20,1.64),new c(4,9,9,1,6,135,-.7,-1.1,1.1,3.5,-8,0,2,0,1.79),new c(5,9,9,1,6.4,140,.5,.4,-7.5,4,-12,2e-4,0,0,1.95),new c(6,9,9,1,6.6,145,.67,.65,-14.7,6.5,-19,4e-4,0,0,2.3),new c(7,9,9,1,6.6,145,.8,.75,-19.7,8,-22,6e-4,0,0,2.7),new c(8,9,9,1,6.6,145,1.2,1.15,-27.5,10,-23,7e-4,0,0,0),new c(9,9,9,1,6.6,145,1.6,1.6,-36,11,-25,8e-4,0,0,0),new c(10,9,9,1,6.6,145,2,2,-36,12,-25,8e-4,0,0,0)],V=[new c(0,9,9,0,4.2,25,-7,-4,7.5,1,0,0,2,26,.97),new c(1,9,9,0,4.2,25,-5.6,-3.6,4.5,1.5,0,0,2,21,1.35),new c(2,9,9,0,4.2,25,-4.4,-1.8,2,2,0,0,2,18,1.49),new c(3,9,9,1,4.2,25,-3.4,-1.25,1.1,3,-4,0,2,15,1.64),new c(4,9,9,1,4.2,25,-2.2,.1,0,3.5,-8,0,2,0,1.79),new c(5,9,9,1,4.2,25,-1,1.65,-7.7,4,-12,2e-4,0,0,1.95),new c(6,9,9,1,4.2,25,-0,2.47,-7.7,6.5,-19,4e-4,0,0,2),new c(7,9,9,1,4.2,25,.5,2,-14.5,8,-22,6e-4,0,0,2),new c(8,9,9,1,4.2,25,1,2.4,-22,10,-23,7e-4,0,0,2),new c(9,9,9,1,4.2,25,1.5,2.95,-30,11,-25,8e-4,0,0,2),new c(10,9,9,1,4.2,25,2,2.95,-36,12,-30,8e-4,0,0,2)];function U(y,K,T){var I=y.VBR==ge.vbr_rh?k:V,e=y.VBR_q_frac,R=I[K],p=I[K+1],d=R;R.st_lrm=R.st_lrm+e*(p.st_lrm-R.st_lrm),R.st_s=R.st_s+e*(p.st_s-R.st_s),R.masking_adj=R.masking_adj+e*(p.masking_adj-R.masking_adj),R.masking_adj_short=R.masking_adj_short+e*(p.masking_adj_short-R.masking_adj_short),R.ath_lower=R.ath_lower+e*(p.ath_lower-R.ath_lower),R.ath_curve=R.ath_curve+e*(p.ath_curve-R.ath_curve),R.ath_sensitivity=R.ath_sensitivity+e*(p.ath_sensitivity-R.ath_sensitivity),R.interch=R.interch+e*(p.interch-R.interch),R.msfix=R.msfix+e*(p.msfix-R.msfix),J(y,d.vbr_q),T!=0?y.quant_comp=d.quant_comp:Math.abs(y.quant_comp- -1)>0||(y.quant_comp=d.quant_comp),T!=0?y.quant_comp_short=d.quant_comp_s:Math.abs(y.quant_comp_short- -1)>0||(y.quant_comp_short=d.quant_comp_s),d.expY!=0&&(y.experimentalY=d.expY!=0),T!=0?y.internal_flags.nsPsy.attackthre=d.st_lrm:Math.abs(y.internal_flags.nsPsy.attackthre- -1)>0||(y.internal_flags.nsPsy.attackthre=d.st_lrm),T!=0?y.internal_flags.nsPsy.attackthre_s=d.st_s:Math.abs(y.internal_flags.nsPsy.attackthre_s- -1)>0||(y.internal_flags.nsPsy.attackthre_s=d.st_s),T!=0?y.maskingadjust=d.masking_adj:Math.abs(y.maskingadjust-0)>0||(y.maskingadjust=d.masking_adj),T!=0?y.maskingadjust_short=d.masking_adj_short:Math.abs(y.maskingadjust_short-0)>0||(y.maskingadjust_short=d.masking_adj_short),T!=0?y.ATHlower=-d.ath_lower/10:Math.abs(-y.ATHlower*10-0)>0||(y.ATHlower=-d.ath_lower/10),T!=0?y.ATHcurve=d.ath_curve:Math.abs(y.ATHcurve- -1)>0||(y.ATHcurve=d.ath_curve),T!=0?y.athaa_sensitivity=d.ath_sensitivity:Math.abs(y.athaa_sensitivity- -1)>0||(y.athaa_sensitivity=d.ath_sensitivity),d.interch>0&&(T!=0?y.interChRatio=d.interch:Math.abs(y.interChRatio- -1)>0||(y.interChRatio=d.interch)),d.safejoint>0&&(y.exp_nspsytune=y.exp_nspsytune|d.safejoint),d.sfb21mod>0&&(y.exp_nspsytune=y.exp_nspsytune|d.sfb21mod<<20),T!=0?y.msfix=d.msfix:Math.abs(y.msfix- -1)>0||(y.msfix=d.msfix),T==0&&(y.VBR_q=K,y.VBR_q_frac=e)}var D=[new w(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new w(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new w(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new w(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new w(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new w(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new w(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8e-4,1),new w(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8e-4,1),new w(80,9,9,0,0,6.6,145,0,.95,0,0,8,7e-4,1),new w(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6e-4,1),new w(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5e-4,1),new w(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2e-4,1),new w(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new w(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new w(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new w(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new w(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];function O(y,K,T){var I=K,e=f.nearestBitrateFullIndex(K);if(y.VBR=ge.vbr_abr,y.VBR_mean_bitrate_kbps=I,y.VBR_mean_bitrate_kbps=Math.min(y.VBR_mean_bitrate_kbps,320),y.VBR_mean_bitrate_kbps=Math.max(y.VBR_mean_bitrate_kbps,8),y.brate=y.VBR_mean_bitrate_kbps,y.VBR_mean_bitrate_kbps>320&&(y.disable_reservoir=!0),D[e].safejoint>0&&(y.exp_nspsytune=y.exp_nspsytune|2),D[e].sfscale>0&&(y.internal_flags.noise_shaping=2),Math.abs(D[e].nsbass)>0){var R=int(D[e].nsbass*4);R<0&&(R+=64),y.exp_nspsytune=y.exp_nspsytune|R<<2}return T!=0?y.quant_comp=D[e].quant_comp:Math.abs(y.quant_comp- -1)>0||(y.quant_comp=D[e].quant_comp),T!=0?y.quant_comp_short=D[e].quant_comp_s:Math.abs(y.quant_comp_short- -1)>0||(y.quant_comp_short=D[e].quant_comp_s),T!=0?y.msfix=D[e].nsmsfix:Math.abs(y.msfix- -1)>0||(y.msfix=D[e].nsmsfix),T!=0?y.internal_flags.nsPsy.attackthre=D[e].st_lrm:Math.abs(y.internal_flags.nsPsy.attackthre- -1)>0||(y.internal_flags.nsPsy.attackthre=D[e].st_lrm),T!=0?y.internal_flags.nsPsy.attackthre_s=D[e].st_s:Math.abs(y.internal_flags.nsPsy.attackthre_s- -1)>0||(y.internal_flags.nsPsy.attackthre_s=D[e].st_s),T!=0?y.scale=D[e].scale:Math.abs(y.scale- -1)>0||(y.scale=D[e].scale),T!=0?y.maskingadjust=D[e].masking_adj:Math.abs(y.maskingadjust-0)>0||(y.maskingadjust=D[e].masking_adj),D[e].masking_adj>0?T!=0?y.maskingadjust_short=D[e].masking_adj*.9:Math.abs(y.maskingadjust_short-0)>0||(y.maskingadjust_short=D[e].masking_adj*.9):T!=0?y.maskingadjust_short=D[e].masking_adj*1.1:Math.abs(y.maskingadjust_short-0)>0||(y.maskingadjust_short=D[e].masking_adj*1.1),T!=0?y.ATHlower=-D[e].ath_lower/10:Math.abs(-y.ATHlower*10-0)>0||(y.ATHlower=-D[e].ath_lower/10),T!=0?y.ATHcurve=D[e].ath_curve:Math.abs(y.ATHcurve- -1)>0||(y.ATHcurve=D[e].ath_curve),T!=0?y.interChRatio=D[e].interch:Math.abs(y.interChRatio- -1)>0||(y.interChRatio=D[e].interch),K}this.apply_preset=function(y,K,T){switch(K){case M.R3MIX:{K=M.V3,y.VBR=ge.vbr_mtrh;break}case M.MEDIUM:{K=M.V4,y.VBR=ge.vbr_rh;break}case M.MEDIUM_FAST:{K=M.V4,y.VBR=ge.vbr_mtrh;break}case M.STANDARD:{K=M.V2,y.VBR=ge.vbr_rh;break}case M.STANDARD_FAST:{K=M.V2,y.VBR=ge.vbr_mtrh;break}case M.EXTREME:{K=M.V0,y.VBR=ge.vbr_rh;break}case M.EXTREME_FAST:{K=M.V0,y.VBR=ge.vbr_mtrh;break}case M.INSANE:return K=320,y.preset=K,O(y,K,T),y.VBR=ge.vbr_off,K}switch(y.preset=K,K){case M.V9:return U(y,9,T),K;case M.V8:return U(y,8,T),K;case M.V7:return U(y,7,T),K;case M.V6:return U(y,6,T),K;case M.V5:return U(y,5,T),K;case M.V4:return U(y,4,T),K;case M.V3:return U(y,3,T),K;case M.V2:return U(y,2,T),K;case M.V1:return U(y,1,T),K;case M.V0:return U(y,0,T),K;default:break}return 8<=K&&K<=320?O(y,K,T):(y.preset=0,K)};function J(y,K){var T=0;return 0>K&&(T=-1,K=0),9<K&&(T=-1,K=9),y.VBR_q=K,y.VBR_q_frac=0,T}}bt.exports=g2});var U1=T0((R3,ct)=>{"use strict";var se=Y0(),ei=se.System,N0=se.VbrMode,m3=se.Float,Fa=se.ShortBlock,c3=se.Util,d3=se.Arrays,S3=se.new_array_n,A3=se.new_byte,x3=se.new_double,x1=se.new_float,w3=se.new_float_n,M3=se.new_int,mt=se.new_int_n,ai=se.new_short_n,Xe=se.assert,ka=_a(),ri=at(),P1=X1(),ti=tt(),ii=lt(),si=ft(),w1=D1(),e1=aa(),K0=te(),ni=fa();function J0(){var M=q1(),c=this,w=128*1024;J0.V9=410,J0.V8=420,J0.V7=430,J0.V6=440,J0.V5=450,J0.V4=460,J0.V3=470,J0.V2=480,J0.V1=490,J0.V0=500,J0.R3MIX=1e3,J0.STANDARD=1001,J0.EXTREME=1002,J0.INSANE=1003,J0.STANDARD_FAST=1004,J0.EXTREME_FAST=1005,J0.MEDIUM=1006,J0.MEDIUM_FAST=1007;var f=16384+w;J0.LAME_MAXMP3BUFFER=f;var k,V,U=new ni,D,O,J=new ka,y,K,T,I,e;this.enc=new K0,this.setModules=function(t,o,$,a0,h0,S0,f0,_0,w0){k=t,V=o,U=$,D=a0,O=h0,y=S0,K=f0,T=_0,e=w0,this.enc.setModules(V,J,D,y)},U.setModules(this);function R(){this.mask_adjust=0,this.mask_adjust_short=0,this.bo_l_weight=x1(K0.SBMAX_l),this.bo_s_weight=x1(K0.SBMAX_s)}function p(){this.lowerlimit=0}function d(t,o){this.lowpass=o}var n=4294479419;function S(t){var o;return t.class_id=n,o=t.internal_flags=new P1,t.mode=M.NOT_SET,t.original=1,t.in_samplerate=44100,t.num_channels=2,t.num_samples=-1,t.bWriteVbrTag=!0,t.quality=-1,t.short_blocks=null,o.subblock_gain=-1,t.lowpassfreq=0,t.highpassfreq=0,t.lowpasswidth=-1,t.highpasswidth=-1,t.VBR=N0.vbr_off,t.VBR_q=4,t.ATHcurve=-1,t.VBR_mean_bitrate_kbps=128,t.VBR_min_bitrate_kbps=0,t.VBR_max_bitrate_kbps=0,t.VBR_hard_min=0,o.VBR_min_bitrate=1,o.VBR_max_bitrate=13,t.quant_comp=-1,t.quant_comp_short=-1,t.msfix=-1,o.resample_ratio=1,o.OldValue[0]=180,o.OldValue[1]=180,o.CurrentStep[0]=4,o.CurrentStep[1]=4,o.masking_lower=1,o.nsPsy.attackthre=-1,o.nsPsy.attackthre_s=-1,t.scale=-1,t.athaa_type=-1,t.ATHtype=-1,t.athaa_loudapprox=-1,t.athaa_sensitivity=0,t.useTemporal=null,t.interChRatio=-1,o.mf_samples_to_encode=K0.ENCDELAY+K0.POSTDELAY,t.encoder_padding=0,o.mf_size=K0.ENCDELAY-K0.MDCTDELAY,t.findReplayGain=!1,t.decode_on_the_fly=!1,o.decode_on_the_fly=!1,o.findReplayGain=!1,o.findPeakSample=!1,o.RadioGain=0,o.AudiophileGain=0,o.noclipGainChange=0,o.noclipScale=-1,t.preset=0,t.write_id3tag_automatic=!0,0}this.lame_init=function(){var t=new ri,o=S(t);return o!=0?null:(t.lame_allocated_gfp=1,t)};function H(t){return t>1?0:t<=0?1:Math.cos(Math.PI/2*t)}this.nearestBitrateFullIndex=function(t){var o=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],$=0,a0=0,h0=0,S0=0;S0=o[16],h0=16,a0=o[16],$=16;for(var f0=0;f0<16;f0++)if(Math.max(t,o[f0+1])!=t){S0=o[f0+1],h0=f0+1,a0=o[f0],$=f0;break}return S0-t>t-a0?$:h0};function x(t,o){var $=44100;return o>=48e3?$=48e3:o>=44100?$=44100:o>=32e3?$=32e3:o>=24e3?$=24e3:o>=22050?$=22050:o>=16e3?$=16e3:o>=12e3?$=12e3:o>=11025?$=11025:o>=8e3&&($=8e3),t==-1?$:(t<=15960&&($=44100),t<=15250&&($=32e3),t<=11220&&($=24e3),t<=9970&&($=22050),t<=7230&&($=16e3),t<=5420&&($=12e3),t<=4510&&($=11025),t<=3970&&($=8e3),o<$?o>44100?48e3:o>32e3?44100:o>24e3?32e3:o>22050?24e3:o>16e3?22050:o>12e3?16e3:o>11025?12e3:o>8e3?11025:8e3:$)}function B(t,o){switch(t){case 44100:return o.version=1,0;case 48e3:return o.version=1,1;case 32e3:return o.version=1,2;case 22050:return o.version=0,0;case 24e3:return o.version=0,1;case 16e3:return o.version=0,2;case 11025:return o.version=0,0;case 12e3:return o.version=0,1;case 8e3:return o.version=0,2;default:return o.version=0,-1}}function a(t,o,$){$<16e3&&(o=2);for(var a0=e1.bitrate_table[o][1],h0=2;h0<=14;h0++)e1.bitrate_table[o][h0]>0&&Math.abs(e1.bitrate_table[o][h0]-t)<Math.abs(a0-t)&&(a0=e1.bitrate_table[o][h0]);return a0}function r(t,o,$){$<16e3&&(o=2);for(var a0=0;a0<=14;a0++)if(e1.bitrate_table[o][a0]>0&&e1.bitrate_table[o][a0]==t)return a0;return-1}function s(t,o){var $=[new d(8,2e3),new d(16,3700),new d(24,3900),new d(32,5500),new d(40,7e3),new d(48,7500),new d(56,1e4),new d(64,11e3),new d(80,13500),new d(96,15100),new d(112,15600),new d(128,17e3),new d(160,17500),new d(192,18600),new d(224,19400),new d(256,19700),new d(320,20500)],a0=c.nearestBitrateFullIndex(o);t.lowerlimit=$[a0].lowpass}function i(t){var o=t.internal_flags,$=32,a0=-1;if(o.lowpass1>0){for(var h0=999,S0=0;S0<=31;S0++){var f0=S0/31;f0>=o.lowpass2&&($=Math.min($,S0)),o.lowpass1<f0&&f0<o.lowpass2&&(h0=Math.min(h0,S0))}h0==999?o.lowpass1=($-.75)/31:o.lowpass1=(h0-.75)/31,o.lowpass2=$/31}if(o.highpass2>0&&o.highpass2<.9*(.75/31)&&(o.highpass1=0,o.highpass2=0,ei.err.println(`Warning: highpass filter disabled.  highpass frequency too small
`)),o.highpass2>0){for(var _0=-1,S0=0;S0<=31;S0++){var f0=S0/31;f0<=o.highpass1&&(a0=Math.max(a0,S0)),o.highpass1<f0&&f0<o.highpass2&&(_0=Math.max(_0,S0))}o.highpass1=a0/31,_0==-1?o.highpass2=(a0+.75)/31:o.highpass2=(_0+.75)/31}for(var S0=0;S0<32;S0++){var w0,c0,f0=S0/31;o.highpass2>o.highpass1?w0=H((o.highpass2-f0)/(o.highpass2-o.highpass1+1e-20)):w0=1,o.lowpass2>o.lowpass1?c0=H((f0-o.lowpass1)/(o.lowpass2-o.lowpass1+1e-20)):c0=1,o.amp_filter[S0]=w0*c0}}function u(t){var o=t.internal_flags;switch(t.quality){default:case 9:o.psymodel=0,o.noise_shaping=0,o.noise_shaping_amp=0,o.noise_shaping_stop=0,o.use_best_huffman=0,o.full_outer_loop=0;break;case 8:t.quality=7;case 7:o.psymodel=1,o.noise_shaping=0,o.noise_shaping_amp=0,o.noise_shaping_stop=0,o.use_best_huffman=0,o.full_outer_loop=0;break;case 6:o.psymodel=1,o.noise_shaping==0&&(o.noise_shaping=1),o.noise_shaping_amp=0,o.noise_shaping_stop=0,o.subblock_gain==-1&&(o.subblock_gain=1),o.use_best_huffman=0,o.full_outer_loop=0;break;case 5:o.psymodel=1,o.noise_shaping==0&&(o.noise_shaping=1),o.noise_shaping_amp=0,o.noise_shaping_stop=0,o.subblock_gain==-1&&(o.subblock_gain=1),o.use_best_huffman=0,o.full_outer_loop=0;break;case 4:o.psymodel=1,o.noise_shaping==0&&(o.noise_shaping=1),o.noise_shaping_amp=0,o.noise_shaping_stop=0,o.subblock_gain==-1&&(o.subblock_gain=1),o.use_best_huffman=1,o.full_outer_loop=0;break;case 3:o.psymodel=1,o.noise_shaping==0&&(o.noise_shaping=1),o.noise_shaping_amp=1,o.noise_shaping_stop=1,o.subblock_gain==-1&&(o.subblock_gain=1),o.use_best_huffman=1,o.full_outer_loop=0;break;case 2:o.psymodel=1,o.noise_shaping==0&&(o.noise_shaping=1),o.substep_shaping==0&&(o.substep_shaping=2),o.noise_shaping_amp=1,o.noise_shaping_stop=1,o.subblock_gain==-1&&(o.subblock_gain=1),o.use_best_huffman=1,o.full_outer_loop=0;break;case 1:o.psymodel=1,o.noise_shaping==0&&(o.noise_shaping=1),o.substep_shaping==0&&(o.substep_shaping=2),o.noise_shaping_amp=2,o.noise_shaping_stop=1,o.subblock_gain==-1&&(o.subblock_gain=1),o.use_best_huffman=1,o.full_outer_loop=0;break;case 0:o.psymodel=1,o.noise_shaping==0&&(o.noise_shaping=1),o.substep_shaping==0&&(o.substep_shaping=2),o.noise_shaping_amp=2,o.noise_shaping_stop=1,o.subblock_gain==-1&&(o.subblock_gain=1),o.use_best_huffman=1,o.full_outer_loop=0;break}}function h(t){var o=t.internal_flags;t.frameNum=0,t.write_id3tag_automatic&&T.id3tag_write_v2(t),o.bitrate_stereoMode_Hist=mt([16,5]),o.bitrate_blockType_Hist=mt([16,6]),o.PeakSample=0,t.bWriteVbrTag&&y.InitVbrTag(t)}this.lame_init_params=function(t){var o=t.internal_flags;if(o.Class_ID=0,o.ATH==null&&(o.ATH=new ti),o.PSY==null&&(o.PSY=new R),o.rgdata==null&&(o.rgdata=new ii),o.channels_in=t.num_channels,o.channels_in==1&&(t.mode=M.MONO),o.channels_out=t.mode==M.MONO?1:2,o.mode_ext=K0.MPG_MD_MS_LR,t.mode==M.MONO&&(t.force_ms=!1),t.VBR==N0.vbr_off&&t.VBR_mean_bitrate_kbps!=128&&t.brate==0&&(t.brate=t.VBR_mean_bitrate_kbps),t.VBR==N0.vbr_off||t.VBR==N0.vbr_mtrh||t.VBR==N0.vbr_mt||(t.free_format=!1),t.VBR==N0.vbr_off&&t.brate==0&&w1.EQ(t.compression_ratio,0)&&(t.compression_ratio=11.025),t.VBR==N0.vbr_off&&t.compression_ratio>0&&(t.out_samplerate==0&&(t.out_samplerate=map2MP3Frequency(int(.97*t.in_samplerate))),t.brate=0|t.out_samplerate*16*o.channels_out/(1e3*t.compression_ratio),o.samplerate_index=B(t.out_samplerate,t),t.free_format||(t.brate=a(t.brate,t.version,t.out_samplerate))),t.out_samplerate!=0&&(t.out_samplerate<16e3?(t.VBR_mean_bitrate_kbps=Math.max(t.VBR_mean_bitrate_kbps,8),t.VBR_mean_bitrate_kbps=Math.min(t.VBR_mean_bitrate_kbps,64)):t.out_samplerate<32e3?(t.VBR_mean_bitrate_kbps=Math.max(t.VBR_mean_bitrate_kbps,8),t.VBR_mean_bitrate_kbps=Math.min(t.VBR_mean_bitrate_kbps,160)):(t.VBR_mean_bitrate_kbps=Math.max(t.VBR_mean_bitrate_kbps,32),t.VBR_mean_bitrate_kbps=Math.min(t.VBR_mean_bitrate_kbps,320))),t.lowpassfreq==0){var $=16e3;switch(t.VBR){case N0.vbr_off:{var a0=new p;s(a0,t.brate),$=a0.lowerlimit;break}case N0.vbr_abr:{var a0=new p;s(a0,t.VBR_mean_bitrate_kbps),$=a0.lowerlimit;break}case N0.vbr_rh:{var h0=[19500,19e3,18600,18e3,17500,16e3,15600,14900,12500,1e4,3950];if(0<=t.VBR_q&&t.VBR_q<=9){var S0=h0[t.VBR_q],f0=h0[t.VBR_q+1],_0=t.VBR_q_frac;$=linear_int(S0,f0,_0)}else $=19500;break}default:{var h0=[19500,19e3,18500,18e3,17500,16500,15500,14500,12500,9500,3950];if(0<=t.VBR_q&&t.VBR_q<=9){var S0=h0[t.VBR_q],f0=h0[t.VBR_q+1],_0=t.VBR_q_frac;$=linear_int(S0,f0,_0)}else $=19500}}t.mode==M.MONO&&(t.VBR==N0.vbr_off||t.VBR==N0.vbr_abr)&&($*=1.5),t.lowpassfreq=$|0}if(t.out_samplerate==0&&(2*t.lowpassfreq>t.in_samplerate&&(t.lowpassfreq=t.in_samplerate/2),t.out_samplerate=x(t.lowpassfreq|0,t.in_samplerate)),t.lowpassfreq=Math.min(20500,t.lowpassfreq),t.lowpassfreq=Math.min(t.out_samplerate/2,t.lowpassfreq),t.VBR==N0.vbr_off&&(t.compression_ratio=t.out_samplerate*16*o.channels_out/(1e3*t.brate)),t.VBR==N0.vbr_abr&&(t.compression_ratio=t.out_samplerate*16*o.channels_out/(1e3*t.VBR_mean_bitrate_kbps)),t.bWriteVbrTag||(t.findReplayGain=!1,t.decode_on_the_fly=!1,o.findPeakSample=!1),o.findReplayGain=t.findReplayGain,o.decode_on_the_fly=t.decode_on_the_fly,o.decode_on_the_fly&&(o.findPeakSample=!0),o.findReplayGain&&k.InitGainAnalysis(o.rgdata,t.out_samplerate)==GainAnalysis.INIT_GAIN_ANALYSIS_ERROR)return t.internal_flags=null,-6;switch(o.decode_on_the_fly&&!t.decode_only&&(o.hip!=null&&e.hip_decode_exit(o.hip),o.hip=e.hip_decode_init()),o.mode_gr=t.out_samplerate<=24e3?1:2,t.framesize=576*o.mode_gr,t.encoder_delay=K0.ENCDELAY,o.resample_ratio=t.in_samplerate/t.out_samplerate,t.VBR){case N0.vbr_mt:case N0.vbr_rh:case N0.vbr_mtrh:{var w0=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5];t.compression_ratio=w0[t.VBR_q]}break;case N0.vbr_abr:t.compression_ratio=t.out_samplerate*16*o.channels_out/(1e3*t.VBR_mean_bitrate_kbps);break;default:t.compression_ratio=t.out_samplerate*16*o.channels_out/(1e3*t.brate);break}if(t.mode==M.NOT_SET&&(t.mode=M.JOINT_STEREO),t.highpassfreq>0?(o.highpass1=2*t.highpassfreq,t.highpasswidth>=0?o.highpass2=2*(t.highpassfreq+t.highpasswidth):o.highpass2=1*2*t.highpassfreq,o.highpass1/=t.out_samplerate,o.highpass2/=t.out_samplerate):(o.highpass1=0,o.highpass2=0),t.lowpassfreq>0?(o.lowpass2=2*t.lowpassfreq,t.lowpasswidth>=0?(o.lowpass1=2*(t.lowpassfreq-t.lowpasswidth),o.lowpass1<0&&(o.lowpass1=0)):o.lowpass1=1*2*t.lowpassfreq,o.lowpass1/=t.out_samplerate,o.lowpass2/=t.out_samplerate):(o.lowpass1=0,o.lowpass2=0),i(t),o.samplerate_index=B(t.out_samplerate,t),o.samplerate_index<0)return t.internal_flags=null,-1;if(t.VBR==N0.vbr_off){if(t.free_format)o.bitrate_index=0;else if(t.brate=a(t.brate,t.version,t.out_samplerate),o.bitrate_index=r(t.brate,t.version,t.out_samplerate),o.bitrate_index<=0)return t.internal_flags=null,-1}else o.bitrate_index=1;t.analysis&&(t.bWriteVbrTag=!1),o.pinfo!=null&&(t.bWriteVbrTag=!1),V.init_bit_stream_w(o);for(var c0=o.samplerate_index+3*t.version+6*(t.out_samplerate<16e3?1:0),i0=0;i0<K0.SBMAX_l+1;i0++)o.scalefac_band.l[i0]=D.sfBandIndex[c0].l[i0];for(var i0=0;i0<K0.PSFB21+1;i0++){var p0=(o.scalefac_band.l[22]-o.scalefac_band.l[21])/K0.PSFB21,F0=o.scalefac_band.l[21]+i0*p0;o.scalefac_band.psfb21[i0]=F0}o.scalefac_band.psfb21[K0.PSFB21]=576;for(var i0=0;i0<K0.SBMAX_s+1;i0++)o.scalefac_band.s[i0]=D.sfBandIndex[c0].s[i0];for(var i0=0;i0<K0.PSFB12+1;i0++){var p0=(o.scalefac_band.s[13]-o.scalefac_band.s[12])/K0.PSFB12,F0=o.scalefac_band.s[12]+i0*p0;o.scalefac_band.psfb12[i0]=F0}o.scalefac_band.psfb12[K0.PSFB12]=192,t.version==1?o.sideinfo_len=o.channels_out==1?21:36:o.sideinfo_len=o.channels_out==1?13:21,t.error_protection&&(o.sideinfo_len+=2),h(t),o.Class_ID=n;{var V0;for(V0=0;V0<19;V0++)o.nsPsy.pefirbuf[V0]=700*o.mode_gr*o.channels_out;t.ATHtype==-1&&(t.ATHtype=4)}switch(Xe(t.VBR_q<=9),Xe(t.VBR_q>=0),t.VBR){case N0.vbr_mt:t.VBR=N0.vbr_mtrh;case N0.vbr_mtrh:{t.useTemporal==null&&(t.useTemporal=!1),U.apply_preset(t,500-t.VBR_q*10,0),t.quality<0&&(t.quality=LAME_DEFAULT_QUALITY),t.quality<5&&(t.quality=0),t.quality>5&&(t.quality=5),o.PSY.mask_adjust=t.maskingadjust,o.PSY.mask_adjust_short=t.maskingadjust_short,t.experimentalY?o.sfb21_extra=!1:o.sfb21_extra=t.out_samplerate>44e3,o.iteration_loop=new VBRNewIterationLoop(O);break}case N0.vbr_rh:{U.apply_preset(t,500-t.VBR_q*10,0),o.PSY.mask_adjust=t.maskingadjust,o.PSY.mask_adjust_short=t.maskingadjust_short,t.experimentalY?o.sfb21_extra=!1:o.sfb21_extra=t.out_samplerate>44e3,t.quality>6&&(t.quality=6),t.quality<0&&(t.quality=LAME_DEFAULT_QUALITY),o.iteration_loop=new VBROldIterationLoop(O);break}default:{var O0;o.sfb21_extra=!1,t.quality<0&&(t.quality=LAME_DEFAULT_QUALITY),O0=t.VBR,O0==N0.vbr_off&&(t.VBR_mean_bitrate_kbps=t.brate),U.apply_preset(t,t.VBR_mean_bitrate_kbps,0),t.VBR=O0,o.PSY.mask_adjust=t.maskingadjust,o.PSY.mask_adjust_short=t.maskingadjust_short,O0==N0.vbr_off?o.iteration_loop=new si(O):o.iteration_loop=new ABRIterationLoop(O);break}}if(Xe(t.scale>=0),t.VBR!=N0.vbr_off){if(o.VBR_min_bitrate=1,o.VBR_max_bitrate=14,t.out_samplerate<16e3&&(o.VBR_max_bitrate=8),t.VBR_min_bitrate_kbps!=0&&(t.VBR_min_bitrate_kbps=a(t.VBR_min_bitrate_kbps,t.version,t.out_samplerate),o.VBR_min_bitrate=r(t.VBR_min_bitrate_kbps,t.version,t.out_samplerate),o.VBR_min_bitrate<0)||t.VBR_max_bitrate_kbps!=0&&(t.VBR_max_bitrate_kbps=a(t.VBR_max_bitrate_kbps,t.version,t.out_samplerate),o.VBR_max_bitrate=r(t.VBR_max_bitrate_kbps,t.version,t.out_samplerate),o.VBR_max_bitrate<0))return-1;t.VBR_min_bitrate_kbps=e1.bitrate_table[t.version][o.VBR_min_bitrate],t.VBR_max_bitrate_kbps=e1.bitrate_table[t.version][o.VBR_max_bitrate],t.VBR_mean_bitrate_kbps=Math.min(e1.bitrate_table[t.version][o.VBR_max_bitrate],t.VBR_mean_bitrate_kbps),t.VBR_mean_bitrate_kbps=Math.max(e1.bitrate_table[t.version][o.VBR_min_bitrate],t.VBR_mean_bitrate_kbps)}return t.tune&&(o.PSY.mask_adjust+=t.tune_value_a,o.PSY.mask_adjust_short+=t.tune_value_a),u(t),Xe(t.scale>=0),t.athaa_type<0?o.ATH.useAdjust=3:o.ATH.useAdjust=t.athaa_type,o.ATH.aaSensitivityP=Math.pow(10,t.athaa_sensitivity/-10),t.short_blocks==null&&(t.short_blocks=Fa.short_block_allowed),t.short_blocks==Fa.short_block_allowed&&(t.mode==M.JOINT_STEREO||t.mode==M.STEREO)&&(t.short_blocks=Fa.short_block_coupled),t.quant_comp<0&&(t.quant_comp=1),t.quant_comp_short<0&&(t.quant_comp_short=0),t.msfix<0&&(t.msfix=0),t.exp_nspsytune=t.exp_nspsytune|1,t.internal_flags.nsPsy.attackthre<0&&(t.internal_flags.nsPsy.attackthre=ka.NSATTACKTHRE),t.internal_flags.nsPsy.attackthre_s<0&&(t.internal_flags.nsPsy.attackthre_s=ka.NSATTACKTHRE_S),Xe(t.scale>=0),t.scale<0&&(t.scale=1),t.ATHtype<0&&(t.ATHtype=4),t.ATHcurve<0&&(t.ATHcurve=4),t.athaa_loudapprox<0&&(t.athaa_loudapprox=2),t.interChRatio<0&&(t.interChRatio=0),t.useTemporal==null&&(t.useTemporal=!0),o.slot_lag=o.frac_SpF=0,t.VBR==N0.vbr_off&&(o.slot_lag=o.frac_SpF=(t.version+1)*72e3*t.brate%t.out_samplerate|0),D.iteration_init(t),J.psymodel_init(t),Xe(t.scale>=0),0};function _(t,o){(t.in_buffer_0==null||t.in_buffer_nsamples<o)&&(t.in_buffer_0=x1(o),t.in_buffer_1=x1(o),t.in_buffer_nsamples=o)}this.lame_encode_flush=function(t,o,$,a0){var h0=t.internal_flags,S0=ai([2,1152]),f0=0,_0,w0,c0,i0,p0=h0.mf_samples_to_encode-K0.POSTDELAY,F0=v(t);if(h0.mf_samples_to_encode<1)return 0;for(_0=0,t.in_samplerate!=t.out_samplerate&&(p0+=16*t.out_samplerate/t.in_samplerate),c0=t.framesize-p0%t.framesize,c0<576&&(c0+=t.framesize),t.encoder_padding=c0,i0=(p0+c0)/t.framesize;i0>0&&f0>=0;){var V0=F0-h0.mf_size,O0=t.frameNum;V0*=t.in_samplerate,V0/=t.out_samplerate,V0>1152&&(V0=1152),V0<1&&(V0=1),w0=a0-_0,a0==0&&(w0=0),f0=this.lame_encode_buffer(t,S0[0],S0[1],V0,o,$,w0),$+=f0,_0+=f0,i0-=O0!=t.frameNum?1:0}if(h0.mf_samples_to_encode=0,f0<0||(w0=a0-_0,a0==0&&(w0=0),V.flush_bitstream(t),f0=V.copy_buffer(h0,o,$,w0,1),f0<0))return f0;if($+=f0,_0+=f0,w0=a0-_0,a0==0&&(w0=0),t.write_id3tag_automatic){if(T.id3tag_write_v1(t),f0=V.copy_buffer(h0,o,$,w0,0),f0<0)return f0;_0+=f0}return _0},this.lame_encode_buffer=function(t,o,$,a0,h0,S0,f0){var _0=t.internal_flags,w0=[null,null];if(_0.Class_ID!=n)return-3;if(a0==0)return 0;_(_0,a0),w0[0]=_0.in_buffer_0,w0[1]=_0.in_buffer_1;for(var c0=0;c0<a0;c0++)w0[0][c0]=o[c0],_0.channels_in>1&&(w0[1][c0]=$[c0]);return l(t,w0[0],w0[1],a0,h0,S0,f0)};function v(t){var o=K0.BLKSIZE+t.framesize-K0.FFTOFFSET;return o=Math.max(o,512+t.framesize-32),Xe(P1.MFSIZE>=o),o}function l(t,o,$,a0,h0,S0,f0){var _0=t.internal_flags,w0=0,c0,i0,p0,F0,V0,O0=[null,null],W0=[null,null];if(_0.Class_ID!=n)return-3;if(a0==0)return 0;if(V0=V.copy_buffer(_0,h0,S0,f0,0),V0<0)return V0;if(S0+=V0,w0+=V0,W0[0]=o,W0[1]=$,w1.NEQ(t.scale,0)&&w1.NEQ(t.scale,1))for(i0=0;i0<a0;++i0)W0[0][i0]*=t.scale,_0.channels_out==2&&(W0[1][i0]*=t.scale);if(w1.NEQ(t.scale_left,0)&&w1.NEQ(t.scale_left,1))for(i0=0;i0<a0;++i0)W0[0][i0]*=t.scale_left;if(w1.NEQ(t.scale_right,0)&&w1.NEQ(t.scale_right,1))for(i0=0;i0<a0;++i0)W0[1][i0]*=t.scale_right;if(t.num_channels==2&&_0.channels_out==1)for(i0=0;i0<a0;++i0)W0[0][i0]=.5*(W0[0][i0]+W0[1][i0]),W0[1][i0]=0;F0=v(t),O0[0]=_0.mfbuf[0],O0[1]=_0.mfbuf[1];for(var Z0=0;a0>0;){var $0=[null,null],Ke=0,ne=0;$0[0]=W0[0],$0[1]=W0[1];var _e=new Z;if(b0(t,O0,$0,Z0,a0,_e),Ke=_e.n_in,ne=_e.n_out,_0.findReplayGain&&!_0.decode_on_the_fly&&k.AnalyzeSamples(_0.rgdata,O0[0],_0.mf_size,O0[1],_0.mf_size,ne,_0.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6;if(a0-=Ke,Z0+=Ke,_0.channels_out==2,_0.mf_size+=ne,Xe(_0.mf_size<=P1.MFSIZE),_0.mf_samples_to_encode<1&&(_0.mf_samples_to_encode=K0.ENCDELAY+K0.POSTDELAY),_0.mf_samples_to_encode+=ne,_0.mf_size>=F0){var Ze=f0-w0;if(f0==0&&(Ze=0),c0=L(t,O0[0],O0[1],h0,S0,Ze),c0<0)return c0;for(S0+=c0,w0+=c0,_0.mf_size-=t.framesize,_0.mf_samples_to_encode-=t.framesize,p0=0;p0<_0.channels_out;p0++)for(i0=0;i0<_0.mf_size;i0++)O0[p0][i0]=O0[p0][i0+t.framesize]}}return Xe(a0==0),w0}function L(t,o,$,a0,h0,S0){var f0=c.enc.lame_encode_mp3_frame(t,o,$,a0,h0,S0);return t.frameNum++,f0}function Z(){this.n_in=0,this.n_out=0}function G(){this.num_used=0}function j(t,o){return o!=0?j(o,t%o):t}function l0(t,o,$){var a0=Math.PI*o;t/=$,t<0&&(t=0),t>1&&(t=1);var h0=t-.5,S0=.42-.5*Math.cos(2*t*Math.PI)+.08*Math.cos(4*t*Math.PI);return Math.abs(h0)<1e-9?a0/Math.PI:S0*Math.sin($*a0*h0)/(Math.PI*$*h0)}function m0(t,o,$,a0,h0,S0,f0,_0,w0){var c0=t.internal_flags,i0,p0=0,F0,V0=t.out_samplerate/j(t.out_samplerate,t.in_samplerate);V0>P1.BPC&&(V0=P1.BPC);var O0=Math.abs(c0.resample_ratio-Math.floor(.5+c0.resample_ratio))<1e-4?1:0,W0=1/c0.resample_ratio;W0>1&&(W0=1);var Z0=31;Z0%2==0&&--Z0,Z0+=O0;var $0=Z0+1;if(c0.fill_buffer_resample_init==0){for(c0.inbuf_old[0]=x1($0),c0.inbuf_old[1]=x1($0),i0=0;i0<=2*V0;++i0)c0.blackfilt[i0]=x1($0);for(c0.itime[0]=0,c0.itime[1]=0,p0=0;p0<=2*V0;p0++){var Ke=0,ne=(p0-V0)/(2*V0);for(i0=0;i0<=Z0;i0++)Ke+=c0.blackfilt[p0][i0]=l0(i0-ne,W0,Z0);for(i0=0;i0<=Z0;i0++)c0.blackfilt[p0][i0]/=Ke}c0.fill_buffer_resample_init=1}var _e=c0.inbuf_old[w0];for(F0=0;F0<a0;F0++){var Ze,o1;if(Ze=F0*c0.resample_ratio,p0=0|Math.floor(Ze-c0.itime[w0]),Z0+p0-Z0/2>=f0)break;var ne=Ze-c0.itime[w0]-(p0+.5*(Z0%2));Xe(Math.abs(ne)<=.501),o1=0|Math.floor(ne*2*V0+V0+.5);var ze=0;for(i0=0;i0<=Z0;++i0){var ae=0|i0+p0-Z0/2,n1;Xe(ae<f0),Xe(ae+$0>=0),n1=ae<0?_e[$0+ae]:h0[S0+ae],ze+=n1*c0.blackfilt[o1][i0]}o[$+F0]=ze}if(_0.num_used=Math.min(f0,Z0+p0-Z0/2),c0.itime[w0]+=_0.num_used-F0*c0.resample_ratio,_0.num_used>=$0)for(i0=0;i0<$0;i0++)_e[i0]=h0[S0+_0.num_used+i0-$0];else{var Aa=$0-_0.num_used;for(i0=0;i0<Aa;++i0)_e[i0]=_e[i0+_0.num_used];for(p0=0;i0<$0;++i0,++p0)_e[i0]=h0[S0+p0];Xe(p0==_0.num_used)}return F0}function b0(t,o,$,a0,h0,S0){var f0=t.internal_flags;if(f0.resample_ratio<.9999||f0.resample_ratio>1.0001)for(var _0=0;_0<f0.channels_out;_0++){var w0=new G;S0.n_out=m0(t,o[_0],f0.mf_size,t.framesize,$[_0],a0,h0,w0,_0),S0.n_in=w0.num_used}else{S0.n_out=Math.min(t.framesize,h0),S0.n_in=S0.n_out;for(var c0=0;c0<S0.n_out;++c0)o[0][f0.mf_size+c0]=$[0][a0+c0],f0.channels_out==2&&(o[1][f0.mf_size+c0]=$[1][a0+c0])}}}ct.exports=J0});var D1=T0((N3,Ya)=>{"use strict";var Le=Y0(),a1=Le.System,B3=Le.VbrMode,E3=Le.Float,y3=Le.ShortBlock,T3=Le.Util,_i=Le.Arrays,p3=Le.new_array_n,li=Le.new_byte,I3=Le.new_double,L3=Le.new_float,oi=Le.new_float_n,vi=Le.new_int,V3=Le.new_int_n,R0=Le.assert,dt=Y1(),Xa=aa(),ba=te(),M1=X1(),ma=U1(),K1=class{constructor(){this.total=0}},I1=class{constructor(c){this.context=c,this.CRC16_POLYNOMIAL=32773,this.MAX_LENGTH=32,this.buf=null,this.totbit=0,this.bufByteIdx=0,this.bufBitIdx=0,this.ga=null,this.mpg=null,this.ver=null,this.vbr=null}setModules(c,w,f,k){this.ga=c,this.mpg=w,this.ver=f,this.vbr=k}putbits2(c,w,f){for(R0(f<this.MAX_LENGTH-2);f>0;){var k;this.bufBitIdx==0&&(this.bufBitIdx=8,this.bufByteIdx++,R0(this.bufByteIdx<ma.LAME_MAXMP3BUFFER),R0(c.header[c.w_ptr].write_timing>=this.totbit),c.header[c.w_ptr].write_timing==this.totbit&&this.putheader_bits(c),this.buf[this.bufByteIdx]=0),k=Math.min(f,this.bufBitIdx),f-=k,this.bufBitIdx-=k,R0(f<this.MAX_LENGTH),R0(this.bufBitIdx<this.MAX_LENGTH),this.buf[this.bufByteIdx]|=w>>f<<this.bufBitIdx,this.totbit+=k}}getframebits(c){var w=c.internal_flags,f;w.bitrate_index!=0?f=Xa.bitrate_table[c.version][w.bitrate_index]:f=c.brate,R0(8<=f&&f<=640);var k=0|(c.version+1)*72e3*f/c.out_samplerate+w.padding;return 8*k}drain_into_ancillary(c,w){var f=c.internal_flags,k;if(R0(w>=0),w>=8&&(this.putbits2(f,76,8),w-=8),w>=8&&(this.putbits2(f,65,8),w-=8),w>=8&&(this.putbits2(f,77,8),w-=8),w>=8&&(this.putbits2(f,69,8),w-=8),w>=32){var V=this.ver.getLameShortVersion();if(w>=32)for(k=0;k<V.length&&w>=8;++k)w-=8,this.putbits2(f,V.charAt(k),8)}for(;w>=1;w-=1)this.putbits2(f,f.ancillary_flag,1),f.ancillary_flag^=c.disable_reservoir?0:1;R0(w==0)}putheader_bits(c){a1.arraycopy(c.header[c.w_ptr].buf,0,this.buf,this.bufByteIdx,c.sideinfo_len),this.bufByteIdx+=c.sideinfo_len,this.totbit+=c.sideinfo_len*8,c.w_ptr=c.w_ptr+1&M1.MAX_HEADER_BUF-1}putbits_noheaders(c,w,f){for(R0(f<this.MAX_LENGTH-2);f>0;){var k;this.bufBitIdx==0&&(this.bufBitIdx=8,this.bufByteIdx++,R0(this.bufByteIdx<ma.LAME_MAXMP3BUFFER),this.buf[this.bufByteIdx]=0),k=Math.min(f,this.bufBitIdx),f-=k,this.bufBitIdx-=k,R0(f<this.MAX_LENGTH),R0(this.bufBitIdx<this.MAX_LENGTH),this.buf[this.bufByteIdx]|=w>>f<<this.bufBitIdx,this.totbit+=k}}writeheader(c,w,f){for(var k=c.header[c.h_ptr].ptr;f>0;){var V=Math.min(f,8-(k&7));f-=V,R0(f<this.MAX_LENGTH),R0(k>>3<ma.LAME_MAXMP3BUFFER),c.header[c.h_ptr].buf[k>>3]|=w>>f<<8-(k&7)-V,k+=V}c.header[c.h_ptr].ptr=k}CRC_update(c,w){c<<=8;for(var f=0;f<8;f++)c<<=1,w<<=1,((w^c)&65536)!=0&&(w^=this.CRC16_POLYNOMIAL);return w}CRC_writeheader(c,w){var f=65535;f=this.CRC_update(w[2]&255,f),f=this.CRC_update(w[3]&255,f);for(var k=6;k<c.sideinfo_len;k++)f=this.CRC_update(w[k]&255,f);w[4]=byte(f>>8),w[5]=byte(f&255)}encodeSideInfo2(c,w){var f=c.internal_flags,k,V,U;if(k=f.l3_side,f.header[f.h_ptr].ptr=0,_i.fill(f.header[f.h_ptr].buf,0,f.sideinfo_len,0),c.out_samplerate<16e3?this.writeheader(f,4094,12):this.writeheader(f,4095,12),this.writeheader(f,c.version,1),this.writeheader(f,1,2),this.writeheader(f,c.error_protection?0:1,1),this.writeheader(f,f.bitrate_index,4),this.writeheader(f,f.samplerate_index,2),this.writeheader(f,f.padding,1),this.writeheader(f,c.extension,1),this.writeheader(f,c.mode.ordinal(),2),this.writeheader(f,f.mode_ext,2),this.writeheader(f,c.copyright,1),this.writeheader(f,c.original,1),this.writeheader(f,c.emphasis,2),c.error_protection&&this.writeheader(f,0,16),c.version==1){for(R0(k.main_data_begin>=0),this.writeheader(f,k.main_data_begin,9),f.channels_out==2?this.writeheader(f,k.private_bits,3):this.writeheader(f,k.private_bits,5),U=0;U<f.channels_out;U++){var D;for(D=0;D<4;D++)this.writeheader(f,k.scfsi[U][D],1)}for(V=0;V<2;V++)for(U=0;U<f.channels_out;U++){var O=k.tt[V][U];this.writeheader(f,O.part2_3_length+O.part2_length,12),this.writeheader(f,O.big_values/2,9),this.writeheader(f,O.global_gain,8),this.writeheader(f,O.scalefac_compress,4),O.block_type!=ba.NORM_TYPE?(this.writeheader(f,1,1),this.writeheader(f,O.block_type,2),this.writeheader(f,O.mixed_block_flag,1),O.table_select[0]==14&&(O.table_select[0]=16),this.writeheader(f,O.table_select[0],5),O.table_select[1]==14&&(O.table_select[1]=16),this.writeheader(f,O.table_select[1],5),this.writeheader(f,O.subblock_gain[0],3),this.writeheader(f,O.subblock_gain[1],3),this.writeheader(f,O.subblock_gain[2],3)):(this.writeheader(f,0,1),this.writeheader(f,O.table_select[0],5),O.table_select[1]==14&&(O.table_select[1]=16),this.writeheader(f,O.table_select[1],5),O.table_select[2]==14&&(O.table_select[2]=16),this.writeheader(f,O.table_select[2],5),R0(0<=O.region0_count&&O.region0_count<16),R0(0<=O.region1_count&&O.region1_count<8),this.writeheader(f,O.region0_count,4),this.writeheader(f,O.region1_count,3)),this.writeheader(f,O.preflag,1),this.writeheader(f,O.scalefac_scale,1),this.writeheader(f,O.count1table_select,1)}}else for(R0(k.main_data_begin>=0),this.writeheader(f,k.main_data_begin,8),this.writeheader(f,k.private_bits,f.channels_out),V=0,U=0;U<f.channels_out;U++){var O=k.tt[V][U];this.writeheader(f,O.part2_3_length+O.part2_length,12),this.writeheader(f,O.big_values/2,9),this.writeheader(f,O.global_gain,8),this.writeheader(f,O.scalefac_compress,9),O.block_type!=ba.NORM_TYPE?(this.writeheader(f,1,1),this.writeheader(f,O.block_type,2),this.writeheader(f,O.mixed_block_flag,1),O.table_select[0]==14&&(O.table_select[0]=16),this.writeheader(f,O.table_select[0],5),O.table_select[1]==14&&(O.table_select[1]=16),this.writeheader(f,O.table_select[1],5),this.writeheader(f,O.subblock_gain[0],3),this.writeheader(f,O.subblock_gain[1],3),this.writeheader(f,O.subblock_gain[2],3)):(this.writeheader(f,0,1),this.writeheader(f,O.table_select[0],5),O.table_select[1]==14&&(O.table_select[1]=16),this.writeheader(f,O.table_select[1],5),O.table_select[2]==14&&(O.table_select[2]=16),this.writeheader(f,O.table_select[2],5),R0(0<=O.region0_count&&O.region0_count<16),R0(0<=O.region1_count&&O.region1_count<8),this.writeheader(f,O.region0_count,4),this.writeheader(f,O.region1_count,3)),this.writeheader(f,O.scalefac_scale,1),this.writeheader(f,O.count1table_select,1)}c.error_protection&&this.CRC_writeheader(f,f.header[f.h_ptr].buf);{var J=f.h_ptr;R0(f.header[J].ptr==f.sideinfo_len*8),f.h_ptr=J+1&M1.MAX_HEADER_BUF-1,f.header[f.h_ptr].write_timing=f.header[J].write_timing+w,f.h_ptr==f.w_ptr&&a1.err.println(`Error: MAX_HEADER_BUF too small in bitstream.c 
`)}}huffman_coder_count1(c,w){var f=Xa.ht[w.count1table_select+32],k,V=0,U=w.big_values,D=w.big_values;for(R0(w.count1table_select<2),k=(w.count1-w.big_values)/4;k>0;--k){var O=0,J=0,y;y=w.l3_enc[U+0],y!=0&&(J+=8,w.xr[D+0]<0&&O++,R0(y<=1)),y=w.l3_enc[U+1],y!=0&&(J+=4,O*=2,w.xr[D+1]<0&&O++,R0(y<=1)),y=w.l3_enc[U+2],y!=0&&(J+=2,O*=2,w.xr[D+2]<0&&O++,R0(y<=1)),y=w.l3_enc[U+3],y!=0&&(J++,O*=2,w.xr[D+3]<0&&O++,R0(y<=1)),U+=4,D+=4,this.putbits2(c,O+f.table[J],f.hlen[J]),V+=f.hlen[J]}return V}Huffmancode(c,w,f,k,V){var U=Xa.ht[w],D=0;if(R0(w<32),w==0)return D;for(var O=f;O<k;O+=2){var J=0,y=0,K=U.xlen,T=U.xlen,I=0,e=V.l3_enc[O],R=V.l3_enc[O+1];if(e!=0&&(V.xr[O]<0&&I++,J--),w>15){if(e>14){var p=e-15;R0(p<=U.linmax),I|=p<<1,y=K,e=15}if(R>14){var d=R-15;R0(d<=U.linmax),I<<=K,I|=d,y+=K,R=15}T=16}R!=0&&(I<<=1,V.xr[O+1]<0&&I++,J--),R0((e|R)<16),e=e*T+R,y-=J,J+=U.hlen[e],R0(J<=this.MAX_LENGTH),R0(y<=this.MAX_LENGTH),this.putbits2(c,U.table[e],J),this.putbits2(c,I,y),D+=J+y}return D}ShortHuffmancodebits(c,w){var f=3*c.scalefac_band.s[3];f>w.big_values&&(f=w.big_values);var k=this.Huffmancode(c,w.table_select[0],0,f,w);return k+=this.Huffmancode(c,w.table_select[1],f,w.big_values,w),k}LongHuffmancodebits(c,w){var f,k,V,U;f=w.big_values,R0(0<=f&&f<=576);var D=w.region0_count+1;return R0(0<=D),R0(D<c.scalefac_band.l.length),V=c.scalefac_band.l[D],D+=w.region1_count+1,R0(0<=D),R0(D<c.scalefac_band.l.length),U=c.scalefac_band.l[D],V>f&&(V=f),U>f&&(U=f),k=this.Huffmancode(c,w.table_select[0],0,V,w),k+=this.Huffmancode(c,w.table_select[1],V,U,w),k+=this.Huffmancode(c,w.table_select[2],U,f,w),k}writeMainData(c){var w,f,k,V,U=0,D=c.internal_flags,O=D.l3_side;if(c.version==1)for(w=0;w<2;w++)for(f=0;f<D.channels_out;f++){var J=O.tt[w][f],y=dt.slen1_tab[J.scalefac_compress],K=dt.slen2_tab[J.scalefac_compress];for(V=0,k=0;k<J.sfbdivide;k++)J.scalefac[k]!=-1&&(this.putbits2(D,J.scalefac[k],y),V+=y);for(;k<J.sfbmax;k++)J.scalefac[k]!=-1&&(this.putbits2(D,J.scalefac[k],K),V+=K);R0(V==J.part2_length),J.block_type==ba.SHORT_TYPE?V+=this.ShortHuffmancodebits(D,J):V+=this.LongHuffmancodebits(D,J),V+=this.huffman_coder_count1(D,J),R0(V==J.part2_3_length+J.part2_length),U+=V}else for(w=0,f=0;f<D.channels_out;f++){var J=O.tt[w][f],T,I,e=0;if(R0(J.sfb_partition_table!=null),V=0,k=0,I=0,J.block_type==ba.SHORT_TYPE){for(;I<4;I++){var R=J.sfb_partition_table[I]/3,p=J.slen[I];for(T=0;T<R;T++,k++)this.putbits2(D,Math.max(J.scalefac[k*3+0],0),p),this.putbits2(D,Math.max(J.scalefac[k*3+1],0),p),this.putbits2(D,Math.max(J.scalefac[k*3+2],0),p),e+=3*p}V+=this.ShortHuffmancodebits(D,J)}else{for(;I<4;I++){var R=J.sfb_partition_table[I],p=J.slen[I];for(T=0;T<R;T++,k++)this.putbits2(D,Math.max(J.scalefac[k],0),p),e+=p}V+=this.LongHuffmancodebits(D,J)}V+=this.huffman_coder_count1(D,J),R0(V==J.part2_3_length),R0(e==J.part2_length),U+=e+V}return U}compute_flushbits(c,w){var f=c.internal_flags,k,V,U,D,O;return O=f.w_ptr,D=f.h_ptr-1,D==-1&&(D=M1.MAX_HEADER_BUF-1),k=f.header[D].write_timing-this.totbit,w.total=k,k>=0&&(V=1+D-O,D<O&&(V=1+D-O+M1.MAX_HEADER_BUF),k-=V*8*f.sideinfo_len),U=this.getframebits(c),k+=U,w.total+=U,w.total%8!=0?w.total=1+w.total/8:w.total=w.total/8,w.total+=this.bufByteIdx+1,k<0&&a1.err.println(`strange error flushing buffer ... 
`),k}flush_bitstream(c){var w=c.internal_flags,f,k,V=w.h_ptr-1;if(V==-1&&(V=M1.MAX_HEADER_BUF-1),f=w.l3_side,!((k=this.compute_flushbits(c,new K1))<0)){if(this.drain_into_ancillary(c,k),R0(w.header[V].write_timing+this.getframebits(c)==this.totbit),w.ResvSize=0,f.main_data_begin=0,w.findReplayGain){var U=this.context.gainAnalysis.GetTitleGain(w.rgdata);R0(this.NEQ(U,GainAnalysis.GAIN_NOT_ENOUGH_SAMPLES)),w.RadioGain=Math.floor(U*10+.5)|0}w.findPeakSample&&(w.noclipGainChange=Math.ceil(Math.log10(w.PeakSample/32767)*20*10)|0,w.noclipGainChange>0&&(this.EQ(c.scale,1)||this.EQ(c.scale,0))?w.noclipScale=Math.floor(32767/w.PeakSample*100)/100:w.noclipScale=-1)}}add_dummy_byte(c,w,f){for(var k=c.internal_flags,V;f-- >0;)for(this.putbits_noheaders(k,w,8),V=0;V<M1.MAX_HEADER_BUF;++V)k.header[V].write_timing+=8}format_bitstream(c){var w=c.internal_flags,f;f=w.l3_side;var k=this.getframebits(c);this.drain_into_ancillary(c,f.resvDrain_pre),this.encodeSideInfo2(c,k);var V=8*w.sideinfo_len;if(V+=this.writeMainData(c),this.drain_into_ancillary(c,f.resvDrain_post),V+=f.resvDrain_post,f.main_data_begin+=(k-V)/8,this.compute_flushbits(c,new K1)!=w.ResvSize&&a1.err.println("Internal buffer inconsistency. flushbits <> ResvSize"),f.main_data_begin*8!=w.ResvSize&&(a1.err.printf(`bit reservoir error: 
l3_side.main_data_begin: %d 
Resvoir size:             %d 
resv drain (post)         %d 
resv drain (pre)          %d 
header and sideinfo:      %d 
data bits:                %d 
total bits:               %d (remainder: %d) 
bitsperframe:             %d 
`,8*f.main_data_begin,w.ResvSize,f.resvDrain_post,f.resvDrain_pre,8*w.sideinfo_len,V-f.resvDrain_post-8*w.sideinfo_len,V,V%8,k),a1.err.println("This is a fatal error.  It has several possible causes:"),a1.err.println("90%%  LAME compiled with buggy version of gcc using advanced optimizations"),a1.err.println(" 9%%  Your system is overclocked"),a1.err.println(" 1%%  bug in LAME encoding library"),w.ResvSize=f.main_data_begin*8),R0(this.totbit%8==0),this.totbit>1e9){var U;for(U=0;U<M1.MAX_HEADER_BUF;++U)w.header[U].write_timing-=this.totbit;this.totbit=0}return 0}copy_buffer(c,w,f,k,V){var U=this.bufByteIdx+1;if(U<=0)return 0;if(k!=0&&U>k)return-1;if(a1.arraycopy(this.buf,0,w,f,U),this.bufByteIdx=-1,this.bufBitIdx=0,V!=0){var D=vi(1);if(D[0]=c.nMusicCRC,this.vbr.updateMusicCRC(D,w,f,U),c.nMusicCRC=D[0],U>0&&(c.VBR_seek_table.nBytesWritten+=U),c.decode_on_the_fly){for(var O=oi([2,1152]),J=U,y=-1,K;y!=0;)if(y=mpg.hip_decode1_unclipped(c.hip,w,f,J,O[0],O[1]),J=0,y==-1&&(y=0),y>0){if(R0(y<=1152),c.findPeakSample){for(K=0;K<y;K++)O[0][K]>c.PeakSample?c.PeakSample=O[0][K]:-O[0][K]>c.PeakSample&&(c.PeakSample=-O[0][K]);if(c.channels_out>1)for(K=0;K<y;K++)O[1][K]>c.PeakSample?c.PeakSample=O[1][K]:-O[1][K]>c.PeakSample&&(c.PeakSample=-O[1][K])}if(c.findReplayGain&&ga.AnalyzeSamples(c.rgdata,O[0],0,O[1],0,y,c.channels_out)==GainAnalysis.GAIN_ANALYSIS_ERROR)return-6}}}return U}init_bit_stream_w(c){this.buf=li(ma.LAME_MAXMP3BUFFER),c.h_ptr=c.w_ptr=0,c.header[c.h_ptr].write_timing=0,this.bufByteIdx=-1,this.bufBitIdx=0,this.totbit=0}};I1.EQ=function(M,c){return Math.abs(M)>Math.abs(c)?Math.abs(M-c)<=Math.abs(M)*1e-6:Math.abs(M-c)<=Math.abs(c)*1e-6};I1.NEQ=function(M,c){return!I1.EQ(M,c)};Ya.exports=I1;Ya.exports.TotalBytes=K1});var At=T0((H3,St)=>{"use strict";function hi(){var M,c;this.setModules=function(w,f){M=w,c=f}}St.exports=hi});var wt=T0((O3,xt)=>{"use strict";function ui(){this.over_noise=0,this.tot_noise=0,this.max_noise=0,this.over_count=0,this.over_SSD=0,this.bits=0}xt.exports=ui});var Bt=T0((q3,Rt)=>{"use strict";var Da=Y0(),Mt=Da.new_float,fi=Da.new_int,C3=Da.assert;function bi(){this.global_gain=0,this.sfb_count1=0,this.step=fi(39),this.noise=Mt(39),this.noise_log=Mt(39)}Rt.exports=bi});var Pa=T0((K3,pt)=>{"use strict";var Ve=Y0(),l1=Ve.System,Et=Ve.VbrMode,F3=Ve.Float,k3=Ve.ShortBlock,Ga=Ve.Util,L1=Ve.Arrays,X3=Ve.new_array_n,Y3=Ve.new_byte,D3=Ve.new_double,Z1=Ve.new_float,G3=Ve.new_float_n,U3=Ve.new_int,P3=Ve.new_int_n,Pe=Ve.assert,mi=At(),Ua=wt(),ci=Bt(),L0=te(),yt=ra(),Tt=k1();function di(){var M;this.rv=null;var c;this.qupvt=null;var w,f=new mi,k;this.setModules=function(d,n,S,H){M=d,c=n,this.rv=n,w=S,this.qupvt=S,k=H,f.setModules(w,k)},this.ms_convert=function(d,n){for(var S=0;S<576;++S){var H=d.tt[n][0].xr[S],x=d.tt[n][1].xr[S];d.tt[n][0].xr[S]=(H+x)*(Ga.SQRT2*.5),d.tt[n][1].xr[S]=(H-x)*(Ga.SQRT2*.5)}};function V(d,n,S,H){H=0;for(var x=0;x<=S;++x){var B=Math.abs(d.xr[x]);H+=B,n[x]=Math.sqrt(B*Math.sqrt(B)),n[x]>d.xrpow_max&&(d.xrpow_max=n[x])}return H}this.init_xrpow=function(d,n,S){var H=0,x=0|n.max_nonzero_coeff;if(Pe(S!=null),n.xrpow_max=0,Pe(0<=x&&x<=575),L1.fill(S,x,576,0),H=V(n,S,x,H),H>1e-20){var B=0;(d.substep_shaping&2)!=0&&(B=1);for(var a=0;a<n.psymax;a++)d.pseudohalf[a]=B;return!0}return L1.fill(n.l3_enc,0,576,0),!1};function U(d,n){var S=d.ATH,H=n.xr;if(n.block_type!=L0.SHORT_TYPE)for(var x=!1,B=L0.PSFB21-1;B>=0&&!x;B--){var a=d.scalefac_band.psfb21[B],r=d.scalefac_band.psfb21[B+1],s=w.athAdjust(S.adjust,S.psfb21[B],S.floor);d.nsPsy.longfact[21]>1e-12&&(s*=d.nsPsy.longfact[21]);for(var i=r-1;i>=a;i--)if(Math.abs(H[i])<s)H[i]=0;else{x=!0;break}}else for(var u=0;u<3;u++)for(var x=!1,B=L0.PSFB12-1;B>=0&&!x;B--){var a=d.scalefac_band.s[12]*3+(d.scalefac_band.s[13]-d.scalefac_band.s[12])*u+(d.scalefac_band.psfb12[B]-d.scalefac_band.psfb12[0]),r=a+(d.scalefac_band.psfb12[B+1]-d.scalefac_band.psfb12[B]),h=w.athAdjust(S.adjust,S.psfb12[B],S.floor);d.nsPsy.shortfact[12]>1e-12&&(h*=d.nsPsy.shortfact[12]);for(var i=r-1;i>=a;i--)if(Math.abs(H[i])<h)H[i]=0;else{x=!0;break}}}this.init_outer_loop=function(d,n){n.part2_3_length=0,n.big_values=0,n.count1=0,n.global_gain=210,n.scalefac_compress=0,n.table_select[0]=0,n.table_select[1]=0,n.table_select[2]=0,n.subblock_gain[0]=0,n.subblock_gain[1]=0,n.subblock_gain[2]=0,n.subblock_gain[3]=0,n.region0_count=0,n.region1_count=0,n.preflag=0,n.scalefac_scale=0,n.count1table_select=0,n.part2_length=0,n.sfb_lmax=L0.SBPSY_l,n.sfb_smin=L0.SBPSY_s,n.psy_lmax=d.sfb21_extra?L0.SBMAX_l:L0.SBPSY_l,n.psymax=n.psy_lmax,n.sfbmax=n.sfb_lmax,n.sfbdivide=11;for(var S=0;S<L0.SBMAX_l;S++)n.width[S]=d.scalefac_band.l[S+1]-d.scalefac_band.l[S],n.window[S]=3;if(n.block_type==L0.SHORT_TYPE){var H=Z1(576);n.sfb_smin=0,n.sfb_lmax=0,n.mixed_block_flag!=0&&(n.sfb_smin=3,n.sfb_lmax=d.mode_gr*2+4),n.psymax=n.sfb_lmax+3*((d.sfb21_extra?L0.SBMAX_s:L0.SBPSY_s)-n.sfb_smin),n.sfbmax=n.sfb_lmax+3*(L0.SBPSY_s-n.sfb_smin),n.sfbdivide=n.sfbmax-18,n.psy_lmax=n.sfb_lmax;var x=d.scalefac_band.l[n.sfb_lmax];l1.arraycopy(n.xr,0,H,0,576);for(var S=n.sfb_smin;S<L0.SBMAX_s;S++)for(var B=d.scalefac_band.s[S],a=d.scalefac_band.s[S+1],r=0;r<3;r++)for(var s=B;s<a;s++)n.xr[x++]=H[3*s+r];for(var i=n.sfb_lmax,S=n.sfb_smin;S<L0.SBMAX_s;S++)n.width[i]=n.width[i+1]=n.width[i+2]=d.scalefac_band.s[S+1]-d.scalefac_band.s[S],n.window[i]=0,n.window[i+1]=1,n.window[i+2]=2,i+=3}n.count1bits=0,n.sfb_partition_table=w.nr_of_sfb_block[0][0],n.slen[0]=0,n.slen[1]=0,n.slen[2]=0,n.slen[3]=0,n.max_nonzero_coeff=575,L1.fill(n.scalefac,0),U(d,n)};function D(d){this.ordinal=d}D.BINSEARCH_NONE=new D(0),D.BINSEARCH_UP=new D(1),D.BINSEARCH_DOWN=new D(2);function O(d,n,S,H,x){var B,a=d.CurrentStep[H],r=!1,s=d.OldValue[H],i=D.BINSEARCH_NONE;for(n.global_gain=s,S-=n.part2_length,Pe(a!=0);;){var u;if(B=k.count_bits(d,x,n,null),a==1||B==S)break;B>S?(i==D.BINSEARCH_DOWN&&(r=!0),r&&(a/=2),i=D.BINSEARCH_UP,u=a):(i==D.BINSEARCH_UP&&(r=!0),r&&(a/=2),i=D.BINSEARCH_DOWN,u=-a),n.global_gain+=u,n.global_gain<0&&(n.global_gain=0,r=!0),n.global_gain>255&&(n.global_gain=255,r=!0)}for(Pe(n.global_gain>=0),Pe(n.global_gain<256);B>S&&n.global_gain<255;)n.global_gain++,B=k.count_bits(d,x,n,null);return d.CurrentStep[H]=s-n.global_gain>=4?4:2,d.OldValue[H]=n.global_gain,n.part2_3_length=B,B}this.trancate_smallspectrums=function(d,n,S,H){var x=Z1(Tt.SFBMAX);if(!((d.substep_shaping&4)==0&&n.block_type==L0.SHORT_TYPE||(d.substep_shaping&128)!=0)){w.calc_noise(n,S,x,new Ua,null);for(var a=0;a<576;a++){var B=0;n.l3_enc[a]!=0&&(B=Math.abs(n.xr[a])),H[a]=B}var a=0,r=8;n.block_type==L0.SHORT_TYPE&&(r=6);do{var s,i,u,h,_=n.width[r];if(a+=_,!(x[r]>=1)&&(L1.sort(H,a-_,_),!BitStream.EQ(H[a-1],0))){s=(1-x[r])*S[r],i=0,h=0;do{var v;for(u=1;h+u<_&&!BitStream.NEQ(H[h+a-_],H[h+a+u-_]);u++);if(v=H[h+a-_]*H[h+a-_]*u,s<v){h!=0&&(i=H[h+a-_-1]);break}s-=v,h+=u}while(h<_);if(!BitStream.EQ(i,0))do Math.abs(n.xr[a-_])<=i&&(n.l3_enc[a-_]=0);while(--_>0)}}while(++r<n.psymax);n.part2_3_length=k.noquant_count_bits(d,n,null)}};function J(d){for(var n=0;n<d.sfbmax;n++)if(d.scalefac[n]+d.subblock_gain[d.window[n]]==0)return!1;return!0}function y(d){return Ga.FAST_LOG10(.368+.632*d*d*d)}function K(d,n){for(var S=1e-37,H=0;H<n.psymax;H++)S+=y(d[H]);return Math.max(1e-20,S)}function T(d,n,S,H,x){var B;switch(d){default:case 9:{n.over_count>0?(B=S.over_SSD<=n.over_SSD,S.over_SSD==n.over_SSD&&(B=S.bits<n.bits)):B=S.max_noise<0&&S.max_noise*10+S.bits<=n.max_noise*10+n.bits;break}case 0:B=S.over_count<n.over_count||S.over_count==n.over_count&&S.over_noise<n.over_noise||S.over_count==n.over_count&&BitStream.EQ(S.over_noise,n.over_noise)&&S.tot_noise<n.tot_noise;break;case 8:S.max_noise=K(x,H);case 1:B=S.max_noise<n.max_noise;break;case 2:B=S.tot_noise<n.tot_noise;break;case 3:B=S.tot_noise<n.tot_noise&&S.max_noise<n.max_noise;break;case 4:B=S.max_noise<=0&&n.max_noise>.2||S.max_noise<=0&&n.max_noise<0&&n.max_noise>S.max_noise-.2&&S.tot_noise<n.tot_noise||S.max_noise<=0&&n.max_noise>0&&n.max_noise>S.max_noise-.2&&S.tot_noise<n.tot_noise+n.over_noise||S.max_noise>0&&n.max_noise>-.05&&n.max_noise>S.max_noise-.1&&S.tot_noise+S.over_noise<n.tot_noise+n.over_noise||S.max_noise>0&&n.max_noise>-.1&&n.max_noise>S.max_noise-.15&&S.tot_noise+S.over_noise+S.over_noise<n.tot_noise+n.over_noise+n.over_noise;break;case 5:B=S.over_noise<n.over_noise||BitStream.EQ(S.over_noise,n.over_noise)&&S.tot_noise<n.tot_noise;break;case 6:B=S.over_noise<n.over_noise||BitStream.EQ(S.over_noise,n.over_noise)&&(S.max_noise<n.max_noise||BitStream.EQ(S.max_noise,n.max_noise)&&S.tot_noise<=n.tot_noise);break;case 7:B=S.over_count<n.over_count||S.over_noise<n.over_noise;break}return n.over_count==0&&(B=B&&S.bits<n.bits),B}function I(d,n,S,H,x){var B=d.internal_flags,a;n.scalefac_scale==0?a=1.2968395546510096:a=1.6817928305074292;for(var r=0,s=0;s<n.sfbmax;s++)r<S[s]&&(r=S[s]);var i=B.noise_shaping_amp;switch(i==3&&(x?i=2:i=1),i){case 2:break;case 1:r>1?r=Math.pow(r,.5):r*=.95;break;case 0:default:r>1?r=1:r*=.95;break}for(var u=0,s=0;s<n.sfbmax;s++){var h=n.width[s],_;if(u+=h,!(S[s]<r)){if((B.substep_shaping&2)!=0&&(B.pseudohalf[s]=B.pseudohalf[s]==0?1:0,B.pseudohalf[s]==0&&B.noise_shaping_amp==2))return;for(n.scalefac[s]++,_=-h;_<0;_++)H[u+_]*=a,H[u+_]>n.xrpow_max&&(n.xrpow_max=H[u+_]);if(B.noise_shaping_amp==2)return}}}function e(d,n){for(var S=1.2968395546510096,H=0,x=0;x<d.sfbmax;x++){var B=d.width[x],a=d.scalefac[x];if(d.preflag!=0&&(a+=w.pretab[x]),H+=B,(a&1)!=0){a++;for(var r=-B;r<0;r++)n[H+r]*=S,n[H+r]>d.xrpow_max&&(d.xrpow_max=n[H+r])}d.scalefac[x]=a>>1}d.preflag=0,d.scalefac_scale=1}function R(d,n,S){var H,x=n.scalefac;for(H=0;H<n.sfb_lmax;H++)if(x[H]>=16)return!0;for(var B=0;B<3;B++){var a=0,r=0;for(H=n.sfb_lmax+B;H<n.sfbdivide;H+=3)a<x[H]&&(a=x[H]);for(;H<n.sfbmax;H+=3)r<x[H]&&(r=x[H]);if(!(a<16&&r<8)){if(n.subblock_gain[B]>=7)return!0;n.subblock_gain[B]++;var s=d.scalefac_band.l[n.sfb_lmax];for(H=n.sfb_lmax+B;H<n.sfbmax;H+=3){var i,u=n.width[H],h=x[H];if(Pe(h>=0),h=h-(4>>n.scalefac_scale),h>=0){x[H]=h,s+=u*3;continue}x[H]=0;{var _=210+(h<<n.scalefac_scale+1);i=w.IPOW20(_)}s+=u*(B+1);for(var v=-u;v<0;v++)S[s+v]*=i,S[s+v]>n.xrpow_max&&(n.xrpow_max=S[s+v]);s+=u*(3-B-1)}{var i=w.IPOW20(202);s+=n.width[H]*(B+1);for(var v=-n.width[H];v<0;v++)S[s+v]*=i,S[s+v]>n.xrpow_max&&(n.xrpow_max=S[s+v])}}}return!1}function p(d,n,S,H,x){var B=d.internal_flags;I(d,n,S,H,x);var a=J(n);return a?!1:(B.mode_gr==2?a=k.scale_bitcount(n):a=k.scale_bitcount_lsf(B,n),a?(B.noise_shaping>1&&(L1.fill(B.pseudohalf,0),n.scalefac_scale==0?(e(n,H),a=!1):n.block_type==L0.SHORT_TYPE&&B.subblock_gain>0&&(a=R(B,n,H)||J(n))),a||(B.mode_gr==2?a=k.scale_bitcount(n):a=k.scale_bitcount_lsf(B,n)),!a):!0)}this.outer_loop=function(d,n,S,H,x,B){var a=d.internal_flags,r=new yt,s=Z1(576),i=Z1(Tt.SFBMAX),u=new Ua,h,_=new ci,v=9999999,l=!1,L=!1,Z=0;if(O(a,n,B,x,H),a.noise_shaping==0)return 100;w.calc_noise(n,S,i,u,_),u.bits=n.part2_3_length,r.assign(n);var G=0;for(l1.arraycopy(H,0,s,0,576);!l;){do{var j=new Ua,l0,m0=255;if((a.substep_shaping&2)!=0?l0=20:l0=3,a.sfb21_extra&&(i[r.sfbmax]>1||r.block_type==L0.SHORT_TYPE&&(i[r.sfbmax+1]>1||i[r.sfbmax+2]>1))||!p(d,r,i,H,L))break;r.scalefac_scale!=0&&(m0=254);var b0=B-r.part2_length;if(b0<=0)break;for(;(r.part2_3_length=k.count_bits(a,H,r,_))>b0&&r.global_gain<=m0;)r.global_gain++;if(r.global_gain>m0)break;if(u.over_count==0){for(;(r.part2_3_length=k.count_bits(a,H,r,_))>v&&r.global_gain<=m0;)r.global_gain++;if(r.global_gain>m0)break}if(w.calc_noise(r,S,i,j,_),j.bits=r.part2_3_length,n.block_type!=L0.SHORT_TYPE?h=d.quant_comp:h=d.quant_comp_short,h=T(h,u,j,r,i)?1:0,h!=0)v=n.part2_3_length,u=j,n.assign(r),G=0,l1.arraycopy(H,0,s,0,576);else if(a.full_outer_loop==0&&(++G>l0&&u.over_count==0||a.noise_shaping_amp==3&&L&&G>30||a.noise_shaping_amp==3&&L&&r.global_gain-Z>15))break}while(r.global_gain+r.scalefac_scale<255);a.noise_shaping_amp==3?L?l=!0:(r.assign(n),l1.arraycopy(s,0,H,0,576),G=0,Z=r.global_gain,L=!0):l=!0}return Pe(n.global_gain+n.scalefac_scale<=255),d.VBR==Et.vbr_rh||d.VBR==Et.vbr_mtrh?l1.arraycopy(s,0,H,0,576):(a.substep_shaping&1)!=0&&trancate_smallspectrums(a,n,S,H),u.over_count},this.iteration_finish_one=function(d,n,S){var H=d.l3_side,x=H.tt[n][S];k.best_scalefac_store(d,n,S,H),d.use_best_huffman==1&&k.best_huffman_divide(d,x),c.ResvAdjust(d,x)},this.VBR_encode_granule=function(d,n,S,H,x,B,a){var r=d.internal_flags,s=new yt,i=Z1(576),u=a,h=a+1,_=(a+B)/2,v,l,L=0,Z=r.sfb21_extra;Pe(u<=LameInternalFlags.MAX_BITS_PER_CHANNEL),L1.fill(s.l3_enc,0);do Pe(_>=B),Pe(_<=a),Pe(B<=a),_>u-42?r.sfb21_extra=!1:r.sfb21_extra=Z,l=outer_loop(d,n,S,H,x,_),l<=0?(L=1,h=n.part2_3_length,s.assign(n),l1.arraycopy(H,0,i,0,576),a=h-32,v=a-B,_=(a+B)/2):(B=_+32,v=a-B,_=(a+B)/2,L!=0&&(L=2,n.assign(s),l1.arraycopy(i,0,H,0,576)));while(v>12);r.sfb21_extra=Z,L==2&&l1.arraycopy(s.l3_enc,0,n.l3_enc,0,576),Pe(n.part2_3_length<=u)},this.get_framebits=function(d,n){var S=d.internal_flags;S.bitrate_index=S.VBR_min_bitrate;var H=M.getframebits(d);S.bitrate_index=1,H=M.getframebits(d);for(var x=1;x<=S.VBR_max_bitrate;x++){S.bitrate_index=x;var B=new MeanBits(H);n[x]=c.ResvFrameBegin(d,B),H=B.bits}},this.VBR_old_prepare=function(d,n,S,H,x,B,a,r,s){var i=d.internal_flags,u,h=0,_=1,v=0;i.bitrate_index=i.VBR_max_bitrate;var l=c.ResvFrameBegin(d,new MeanBits(0))/i.mode_gr;get_framebits(d,B);for(var L=0;L<i.mode_gr;L++){var Z=w.on_pe(d,n,r[L],l,L,0);i.mode_ext==L0.MPG_MD_MS_LR&&(ms_convert(i.l3_side,L),w.reduce_side(r[L],S[L],l,Z));for(var G=0;G<i.channels_out;++G){var j=i.l3_side.tt[L][G];j.block_type!=L0.SHORT_TYPE?(h=1.28/(1+Math.exp(3.5-n[L][G]/300))-.05,u=i.PSY.mask_adjust-h):(h=2.56/(1+Math.exp(3.5-n[L][G]/300))-.14,u=i.PSY.mask_adjust_short-h),i.masking_lower=Math.pow(10,u*.1),init_outer_loop(i,j),s[L][G]=w.calc_xmin(d,H[L][G],j,x[L][G]),s[L][G]!=0&&(_=0),a[L][G]=126,v+=r[L][G]}}for(var L=0;L<i.mode_gr;L++)for(var G=0;G<i.channels_out;G++)v>B[i.VBR_max_bitrate]&&(r[L][G]*=B[i.VBR_max_bitrate],r[L][G]/=v),a[L][G]>r[L][G]&&(a[L][G]=r[L][G]);return _},this.bitpressure_strategy=function(d,n,S,H){for(var x=0;x<d.mode_gr;x++)for(var B=0;B<d.channels_out;B++){for(var a=d.l3_side.tt[x][B],r=n[x][B],s=0,i=0;i<a.psy_lmax;i++)r[s++]*=1+.029*i*i/L0.SBMAX_l/L0.SBMAX_l;if(a.block_type==L0.SHORT_TYPE)for(var i=a.sfb_smin;i<L0.SBMAX_s;i++)r[s++]*=1+.029*i*i/L0.SBMAX_s/L0.SBMAX_s,r[s++]*=1+.029*i*i/L0.SBMAX_s/L0.SBMAX_s,r[s++]*=1+.029*i*i/L0.SBMAX_s/L0.SBMAX_s;H[x][B]=0|Math.max(S[x][B],.9*H[x][B])}},this.VBR_new_prepare=function(d,n,S,H,x,B){var a=d.internal_flags,r=1,s=0,i=0,u;if(d.free_format){a.bitrate_index=0;var h=new MeanBits(s);u=c.ResvFrameBegin(d,h),s=h.bits,x[0]=u}else{a.bitrate_index=a.VBR_max_bitrate;var h=new MeanBits(s);c.ResvFrameBegin(d,h),s=h.bits,get_framebits(d,x),u=x[a.VBR_max_bitrate]}for(var _=0;_<a.mode_gr;_++){w.on_pe(d,n,B[_],s,_,0),a.mode_ext==L0.MPG_MD_MS_LR&&ms_convert(a.l3_side,_);for(var v=0;v<a.channels_out;++v){var l=a.l3_side.tt[_][v];a.masking_lower=Math.pow(10,a.PSY.mask_adjust*.1),init_outer_loop(a,l),w.calc_xmin(d,S[_][v],l,H[_][v])!=0&&(r=0),i+=B[_][v]}}for(var _=0;_<a.mode_gr;_++)for(var v=0;v<a.channels_out;v++)i>u&&(B[_][v]*=u,B[_][v]/=i);return r},this.calc_target_bits=function(d,n,S,H,x,B){var a=d.internal_flags,r=a.l3_side,s,i,u,h,_=0;a.bitrate_index=a.VBR_max_bitrate;var v=new MeanBits(_);for(B[0]=c.ResvFrameBegin(d,v),_=v.bits,a.bitrate_index=1,_=M.getframebits(d)-a.sideinfo_len*8,x[0]=_/(a.mode_gr*a.channels_out),_=d.VBR_mean_bitrate_kbps*d.framesize*1e3,(a.substep_shaping&1)!=0&&(_*=1.09),_/=d.out_samplerate,_-=a.sideinfo_len*8,_/=a.mode_gr*a.channels_out,s=.93+.07*(11-d.compression_ratio)/(11-5.5),s<.9&&(s=.9),s>1&&(s=1),i=0;i<a.mode_gr;i++){var l=0;for(u=0;u<a.channels_out;u++){if(H[i][u]=int(s*_),n[i][u]>700){var L=int((n[i][u]-700)/1.4),Z=r.tt[i][u];H[i][u]=int(s*_),Z.block_type==L0.SHORT_TYPE&&L<_/2&&(L=_/2),L>_*3/2?L=_*3/2:L<0&&(L=0),H[i][u]+=L}H[i][u]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(H[i][u]=LameInternalFlags.MAX_BITS_PER_CHANNEL),l+=H[i][u]}if(l>LameInternalFlags.MAX_BITS_PER_GRANULE)for(u=0;u<a.channels_out;++u)H[i][u]*=LameInternalFlags.MAX_BITS_PER_GRANULE,H[i][u]/=l}if(a.mode_ext==L0.MPG_MD_MS_LR)for(i=0;i<a.mode_gr;i++)w.reduce_side(H[i],S[i],_*a.channels_out,LameInternalFlags.MAX_BITS_PER_GRANULE);for(h=0,i=0;i<a.mode_gr;i++)for(u=0;u<a.channels_out;u++)H[i][u]>LameInternalFlags.MAX_BITS_PER_CHANNEL&&(H[i][u]=LameInternalFlags.MAX_BITS_PER_CHANNEL),h+=H[i][u];if(h>B[0])for(i=0;i<a.mode_gr;i++)for(u=0;u<a.channels_out;u++)H[i][u]*=B[0],H[i][u]/=h}}pt.exports=di});var Za=T0((el,Lt)=>{"use strict";var Ne=Y0(),Si=Ne.System,Ka=Ne.VbrMode,Z3=Ne.Float,It=Ne.ShortBlock,z3=Ne.Util,Ai=Ne.Arrays,Q3=Ne.new_array_n,ca=Ne.new_byte,W3=Ne.new_double,j3=Ne.new_float,J3=Ne.new_float_n,$3=Ne.new_int,g3=Ne.new_int_n,xi=Ne.assert;z1.NUMTOCENTRIES=100;z1.MAXFRAMESIZE=2880;function z1(){var M,c,w;this.setModules=function(_,v,l){M=_,c=v,w=l};var f=1,k=2,V=4,U=8,D=z1.NUMTOCENTRIES,O=z1.MAXFRAMESIZE,J=D+4+4+4+4+4,y=J+9+1+1+8+1+1+3+1+1+2+4+2+2,K=128,T=64,I=32,e=null,R="Xing",p="Info",d=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];function n(_,v){if(_.nVbrNumFrames++,_.sum+=v,_.seen++,!(_.seen<_.want)&&(_.pos<_.size&&(_.bag[_.pos]=_.sum,_.pos++,_.seen=0),_.pos==_.size)){for(var l=1;l<_.size;l+=2)_.bag[l/2]=_.bag[l];_.want*=2,_.pos/=2}}function S(_,v){if(!(_.pos<=0))for(var l=1;l<D;++l){var L=l/D,Z,G,j=0|Math.floor(L*_.pos);j>_.pos-1&&(j=_.pos-1),Z=_.bag[j],G=_.sum;var l0=0|256*Z/G;l0>255&&(l0=255),v[l]=255&l0}}this.addVbrFrame=function(_){var v=_.internal_flags,l=Tables.bitrate_table[_.version][v.bitrate_index];xi(v.VBR_seek_table.bag!=null),n(v.VBR_seek_table,l)};function H(_,v){var l=_[v+0]&255;return l<<=8,l|=_[v+1]&255,l<<=8,l|=_[v+2]&255,l<<=8,l|=_[v+3]&255,l}function x(_,v,l){_[v+0]=255&(l>>24&255),_[v+1]=255&(l>>16&255),_[v+2]=255&(l>>8&255),_[v+3]=255&(l&255)}function B(_,v,l){_[v+0]=255&(l>>8&255),_[v+1]=255&(l&255)}function a(_,v){return new String(_,v,R.length(),e).equals(R)||new String(_,v,p.length(),e).equals(p)}function r(_,v,l){return 255&(_<<v|l&~(-1<<v))}function s(_,v){var l=_.internal_flags;v[0]=r(v[0],8,255),v[1]=r(v[1],3,7),v[1]=r(v[1],1,_.out_samplerate<16e3?0:1),v[1]=r(v[1],1,_.version),v[1]=r(v[1],2,1),v[1]=r(v[1],1,_.error_protection?0:1),v[2]=r(v[2],4,l.bitrate_index),v[2]=r(v[2],2,l.samplerate_index),v[2]=r(v[2],1,0),v[2]=r(v[2],1,_.extension),v[3]=r(v[3],2,_.mode.ordinal()),v[3]=r(v[3],2,l.mode_ext),v[3]=r(v[3],1,_.copyright),v[3]=r(v[3],1,_.original),v[3]=r(v[3],2,_.emphasis),v[0]=255;var L=255&(v[1]&241),Z;_.version==1?Z=K:_.out_samplerate<16e3?Z=I:Z=T,_.VBR==Ka.vbr_off&&(Z=_.brate);var G;_.free_format?G=0:G=255&16*M.BitrateIndex(Z,_.version,_.out_samplerate),_.version==1?(v[1]=255&(L|10),L=255&(v[2]&13),v[2]=255&(G|L)):(v[1]=255&(L|2),L=255&(v[2]&13),v[2]=255&(G|L))}this.getVbrTag=function(_){var v=new VBRTagData,l=0;v.flags=0;var L=_[l+1]>>3&1,Z=_[l+2]>>2&3,G=_[l+3]>>6&3,j=_[l+2]>>4&15;if(j=Tables.bitrate_table[L][j],_[l+1]>>4==14?v.samprate=Tables.samplerate_table[2][Z]:v.samprate=Tables.samplerate_table[L][Z],L!=0?G!=3?l+=36:l+=21:G!=3?l+=21:l+=13,!a(_,l))return null;l+=4,v.hId=L;var l0=v.flags=H(_,l);if(l+=4,(l0&f)!=0&&(v.frames=H(_,l),l+=4),(l0&k)!=0&&(v.bytes=H(_,l),l+=4),(l0&V)!=0){if(v.toc!=null)for(var m0=0;m0<D;m0++)v.toc[m0]=_[l+m0];l+=D}v.vbrScale=-1,(l0&U)!=0&&(v.vbrScale=H(_,l),l+=4),v.headersize=(L+1)*72e3*j/v.samprate,l+=21;var b0=_[l+0]<<4;b0+=_[l+1]>>4;var t=(_[l+1]&15)<<8;return t+=_[l+2]&255,(b0<0||b0>3e3)&&(b0=-1),(t<0||t>3e3)&&(t=-1),v.encDelay=b0,v.encPadding=t,v},this.InitVbrTag=function(_){var v=_.internal_flags,l;_.version==1?l=K:_.out_samplerate<16e3?l=I:l=T,_.VBR==Ka.vbr_off&&(l=_.brate);var L=(_.version+1)*72e3*l/_.out_samplerate,Z=v.sideinfo_len+y;if(v.VBR_seek_table.TotalFrameSize=L,L<Z||L>O){_.bWriteVbrTag=!1;return}v.VBR_seek_table.nVbrNumFrames=0,v.VBR_seek_table.nBytesWritten=0,v.VBR_seek_table.sum=0,v.VBR_seek_table.seen=0,v.VBR_seek_table.want=1,v.VBR_seek_table.pos=0,v.VBR_seek_table.bag==null&&(v.VBR_seek_table.bag=new int[400],v.VBR_seek_table.size=400);var G=ca(O);s(_,G);for(var j=v.VBR_seek_table.TotalFrameSize,l0=0;l0<j;++l0)c.add_dummy_byte(_,G[l0]&255,1)};function i(_,v){var l=v^_;return v=v>>8^d[l&255],v}this.updateMusicCRC=function(_,v,l,L){for(var Z=0;Z<L;++Z)_[0]=i(v[l+Z],_[0])};function u(_,v,l,L,Z){var G=_.internal_flags,j=0,l0=_.encoder_delay,m0=_.encoder_padding,b0=100-10*_.VBR_q-_.quality,t=w.getLameVeryShortVersion(),o,$=0,a0,h0=[1,5,3,2,4,0,3],S0=0|(_.lowpassfreq/100+.5>255?255:_.lowpassfreq/100+.5),f0=0,_0=0,w0=0,c0=_.internal_flags.noise_shaping,i0=0,p0=0,F0=0,V0=0,O0=0,W0=(_.exp_nspsytune&1)!=0,Z0=(_.exp_nspsytune&2)!=0,$0=!1,Ke=!1,ne=_.internal_flags.nogap_total,_e=_.internal_flags.nogap_current,Ze=_.ATHtype,o1=0,ze;switch(_.VBR){case vbr_abr:ze=_.VBR_mean_bitrate_kbps;break;case vbr_off:ze=_.brate;break;default:ze=_.VBR_min_bitrate_kbps}switch(_.VBR.ordinal()<h0.length?o=h0[_.VBR.ordinal()]:o=0,a0=16*$+o,G.findReplayGain&&(G.RadioGain>510&&(G.RadioGain=510),G.RadioGain<-510&&(G.RadioGain=-510),_0=8192,_0|=3072,G.RadioGain>=0?_0|=G.RadioGain:(_0|=512,_0|=-G.RadioGain)),G.findPeakSample&&(f0=Math.abs(0|G.PeakSample/32767*Math.pow(2,23)+.5)),ne!=-1&&(_e>0&&(Ke=!0),_e<ne-1&&($0=!0)),o1=Ze+((W0?1:0)<<4)+((Z0?1:0)<<5)+(($0?1:0)<<6)+((Ke?1:0)<<7),b0<0&&(b0=0),_.mode){case MONO:i0=0;break;case STEREO:i0=1;break;case DUAL_CHANNEL:i0=2;break;case JOINT_STEREO:_.force_ms?i0=4:i0=3;break;case NOT_SET:default:i0=7;break}_.in_samplerate<=32e3?F0=0:_.in_samplerate==48e3?F0=2:_.in_samplerate>48e3?F0=3:F0=1,(_.short_blocks==It.short_block_forced||_.short_blocks==It.short_block_dispensed||_.lowpassfreq==-1&&_.highpassfreq==-1||_.scale_left<_.scale_right||_.scale_left>_.scale_right||_.disable_reservoir&&_.brate<320||_.noATH||_.ATHonly||Ze==0||_.in_samplerate<=32e3)&&(p0=1),V0=c0+(i0<<2)+(p0<<5)+(F0<<6),O0=G.nMusicCRC,x(l,L+j,b0),j+=4;for(var ae=0;ae<9;ae++)l[L+j+ae]=255&t.charAt(ae);j+=9,l[L+j]=255&a0,j++,l[L+j]=255&S0,j++,x(l,L+j,f0),j+=4,B(l,L+j,_0),j+=2,B(l,L+j,w0),j+=2,l[L+j]=255&o1,j++,ze>=255?l[L+j]=255:l[L+j]=255&ze,j++,l[L+j]=255&l0>>4,l[L+j+1]=255&(l0<<4)+(m0>>8),l[L+j+2]=255&m0,j+=3,l[L+j]=255&V0,j++,l[L+j++]=0,B(l,L+j,_.preset),j+=2,x(l,L+j,v),j+=4,B(l,L+j,O0),j+=2;for(var n1=0;n1<j;n1++)Z=i(l[L+n1],Z);return B(l,L+j,Z),j+=2,j}function h(_){_.seek(0);var v=ca(10);_.readFully(v);var l;return new String(v,"ISO-8859-1").startsWith("ID3")?l=0:l=((v[6]&127)<<21|(v[7]&127)<<14|(v[8]&127)<<7|v[9]&127)+v.length,l}this.getLameTagFrame=function(_,v){var l=_.internal_flags;if(!_.bWriteVbrTag||l.Class_ID!=Lame.LAME_ID||l.VBR_seek_table.pos<=0)return 0;if(v.length<l.VBR_seek_table.TotalFrameSize)return l.VBR_seek_table.TotalFrameSize;Ai.fill(v,0,l.VBR_seek_table.TotalFrameSize,0),s(_,v);var L=ca(D);if(_.free_format)for(var Z=1;Z<D;++Z)L[Z]=255&255*Z/100;else S(l.VBR_seek_table,L);var G=l.sideinfo_len;_.error_protection&&(G-=2),_.VBR==Ka.vbr_off?(v[G++]=255&p.charAt(0),v[G++]=255&p.charAt(1),v[G++]=255&p.charAt(2),v[G++]=255&p.charAt(3)):(v[G++]=255&R.charAt(0),v[G++]=255&R.charAt(1),v[G++]=255&R.charAt(2),v[G++]=255&R.charAt(3)),x(v,G,f+k+V+U),G+=4,x(v,G,l.VBR_seek_table.nVbrNumFrames),G+=4;var j=l.VBR_seek_table.nBytesWritten+l.VBR_seek_table.TotalFrameSize;x(v,G,0|j),G+=4,Si.arraycopy(L,0,v,G,L.length),G+=L.length,_.error_protection&&c.CRC_writeheader(l,v);for(var l0=0,Z=0;Z<G;Z++)l0=i(v[Z],l0);return G+=u(_,j,v,G,l0),l.VBR_seek_table.TotalFrameSize},this.putVbrTag=function(_,v){var l=_.internal_flags;if(l.VBR_seek_table.pos<=0||(v.seek(v.length()),v.length()==0))return-1;var L=h(v);v.seek(L);var Z=ca(O),G=getLameTagFrame(_,Z);return G>Z.length?-1:(G<1||v.write(Z,0,G),0)}}Lt.exports=z1});var za=T0((al,Nt)=>{"use strict";function Vt(){this.flags=0,this.year=0,this.title=null,this.artist=null,this.album=null,this.comment=null,this.track_id3v1=0,this.genre_id3v1=0,this.albumart=null,this.albumart_size=0,this.padding_size=0,this.albumart_mimetype=null,this.values=[],this.num_values=0,this.v2_head=null,this.v2_tail=null}Vt.prototype.setModules=function(M,c){this.bs=M,this.ver=c};Nt.exports=Vt});var wi={};Jt(wi,{MPEGMode:()=>J1,Mp3Encoder:()=>Sa});var J1=(V=>(V[V.STEREO=0]="STEREO",V[V.JOINT_STEREO=1]="JOINT_STEREO",V[V.DUAL_CHANNEL=2]="DUAL_CHANNEL",V[V.MONO=3]="MONO",V[V.NOT_SET=4]="NOT_SET",V))(J1||{}),E1={STEREO:{value:0,ordinal:()=>0},JOINT_STEREO:{value:1,ordinal:()=>1},DUAL_CHANNEL:{value:2,ordinal:()=>2},MONO:{value:3,ordinal:()=>3},NOT_SET:{value:4,ordinal:()=>4}};var Ht=Ye(Ia()),Ot=Ye(D1()),Ct=Ye(ua()),qt=Ye(Pa()),Ft=Ye(Za()),kt=Ye(za()),Xt=Ye(oa()),Yt=Ye(Y1()),Dt=Ye(ha()),Gt=Ye(fa()),Ut=Ye(U1()),Pt=Ye(_a()),da=class{constructor(){this.id3=new kt.default,this.reservoir=new Xt.default,this.quantizePVT=new Dt.default,this.takehiro=new Yt.default(this),this.quantize=new qt.default,this.vbrTag=new Ft.default,this.presets=new Gt.default,this.lame=new Ut.default,this.version=new Ht.default(this),this.bitStream=new Ot.default(this),this.gainAnalysis=new Ct.default,this.psyModel=new Pt.default,this.quantizePVT.setModules(this.takehiro,this.reservoir,this.psyModel),this.takehiro.setModules(this.quantizePVT),this.quantize.setModules(this.bitStream,this.reservoir,this.quantizePVT,this.takehiro),this.presets.setModules(this.lame),this.bitStream.setModules(this.gainAnalysis,null,this.version,this.vbrTag),this.id3.setModules(this.bitStream,this.version),this.reservoir.setModules(this.bitStream),this.vbrTag.setModules(this.lame,this.bitStream,this.version),this.lame.setModules(this.gainAnalysis,this.bitStream,this.presets,this.quantizePVT,this.quantize,this.vbrTag,this.version,this.id3,null)}};var sl=U1(),nl=D1(),_l=ua(),ll=Pa(),ol=Za(),vl=Ia(),hl=za(),ul=oa(),fl=Y1(),bl=ha(),ml=fa(),Sa=class{constructor(c){var k;this.context=new da,this.gfp=this.context.lame.lame_init(),this.gfp.num_channels=c.channels,this.gfp.in_samplerate=c.sampleRate,this.gfp.brate=c.bitRate;let w={0:E1.STEREO,1:E1.JOINT_STEREO,2:E1.DUAL_CHANNEL,3:E1.MONO,4:E1.NOT_SET};if(this.gfp.mode=w[(k=c.mode)!=null?k:0],this.gfp.quality=c.quality||3,this.gfp.bWriteVbrTag=!1,this.gfp.disable_reservoir=!0,this.gfp.write_id3tag_automatic=!1,this.context.lame.lame_init_params(this.gfp)!==0)throw new Error("Failed to initialize LAME encoder");this.maxSamples=c.maxBuffer||1152,this.mp3buf_size=Math.floor(1.25*this.maxSamples+7200),this.mp3buf=new Uint8Array(this.mp3buf_size)}encodeBuffer(c,w){if(this.gfp.num_channels===1&&(w=c),!w)throw new Error("Right channel required for stereo");if(c.length!==w.length)throw new Error("Left and right channels must be same length");c.length>this.maxSamples&&(this.maxSamples=c.length,this.mp3buf_size=Math.floor(1.25*this.maxSamples+7200),this.mp3buf=new Uint8Array(this.mp3buf_size));let f=this.context.lame.lame_encode_buffer(this.gfp,c,w,c.length,this.mp3buf,0,this.mp3buf_size);return new Int8Array(this.mp3buf.subarray(0,f))}flush(){let c=this.context.lame.lame_encode_flush(this.gfp,this.mp3buf,0,this.mp3buf_size);return new Int8Array(this.mp3buf.subarray(0,c))}close(){this.gfp&&(this.context.lame.lame_encode_flush(this.gfp,this.mp3buf,0,this.mp3buf_size),this.gfp=null)}};return $t(wi);})();
//# sourceMappingURL=index.global.js.map